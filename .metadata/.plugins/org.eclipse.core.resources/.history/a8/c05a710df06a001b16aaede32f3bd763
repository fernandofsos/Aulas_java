<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:a4j="http://richfaces.org/a4j"
				xmlns:rich="http://richfaces.org/rich"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:t="http://myfaces.apache.org/tomahawk"
				xmlns:mj="http://mojarra.dev.java.net/mojarra_ext"
				template="crud_template.xhtml">
	
	<ui:param name="crudBean" value="#{gerenciarUsuarioForm}" />
	
	<ui:define name="saveStateObjectsDefined"> 
		<t:saveState value="#{crudBean}" />
	</ui:define>	
			
			
	<ui:define name="buttonItens" style="height:100%; width:100%;"></ui:define>
			
	<ui:define name="content">
			    <h:panelGrid id="fileUploadSection" columns="1" width="100%">
			        <!-- ##### File uploader ##### -->
			        <!-- https://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_fileUpload.html -->
			        <rich:spacer width="10px" height="0px" />
			        <h:outputText value="Upload Arquivo:" />
					<rich:fileUpload fileUploadListener="#{gerenciarUsuarioForm.validateFileUploadListener}" 
					                 acceptedTypes="xls"
					                 ontyperejected="alert('É permitido apenas arquivos de extensão XLS.');"
					                 id="upload" 
					                 onerror="alert('Nome do arquivo é inválido.'); reRenderUploadSection();"
						             maxFilesQuantity="1" 
						             listHeight="100px" 
						             listWidth="570px" 
						             addControlLabel="Adicionar" 
						             uploadControlLabel="Enviar" 
						             cancelEntryControlLabel="Cancelar"
						             clearAllControlLabel="Limpar tudo" 
						             clearControlLabel="Limpar Tudo" 
						             stopControlLabel="Parar"
						             doneLabel="Concluído"
						             progressLabel="Enviando" 
						             stopEntryControlLabel="Parar" 
						             immediateUpload="true" 
						             style="margin:auto"
						             onclear="btnRemoverArquivoImportacao(); reRenderUploadSection();" >
						<a4j:support event="onuploadcomplete" reRender="formulario:btns" />
					</rich:fileUpload>
			    </h:panelGrid>
			    <h:panelGroup layout="block" id="btns" style="margin-bottom: 10px ; margin-top: 10px ">
				       <a4j:commandButton action="#{gerenciarUsuarioForm.importaXls}" 
					                    reRender="formulario" 
				                        oncomplete="mensgemImportacaoArquivo(#{gerenciarUsuarioForm.valor});" 
				                        disabled ="#{gerenciarUsuarioForm.btnAtivarDesativar}"
				                        style="border: 0; width: 154px; height: 29px;" 
				                        id="bntDesativar" 
				                        image="imagens/btnDesativar-01.png" 
				                        value="Desabilitar">
									<f:setPropertyActionListener value="N" target="#{gerenciarUsuarioForm.flgSituacao}" />      
				       </a4j:commandButton>             
					   
					   <a4j:commandButton action="#{gerenciarUsuarioForm.importaXls}" 
				                          reRender="formulario" 
				                          disabled= "#{gerenciarUsuarioForm.btnAtivarDesativar}"
					                      style="border: 0; width: 154px; height: 29px;" 
					                      id="bntAtivar" 
					                      value="Ativar" 
					                      image="imagens/btnAtivar-01.png" 
					                      oncomplete="mensgemImportacaoArquivo(#{gerenciarUsuarioForm.valor});" > 			                    
				  					<f:setPropertyActionListener value="S" target="#{gerenciarUsuarioForm.flgSituacao}" />               
				  	   </a4j:commandButton>      
			  	 </h:panelGroup>
			  	 <a4j:commandButton action="#{gerenciarUsuarioForm.deletaArquivoTmp}"  
			                        reRender="formulario" 
				                    style="display:none" 
				                    id="btnDeletaArquivoTmp" > 			                    
			  	   </a4j:commandButton>      
			  	   
			  	       
			         <a4j:jsFunction 
			          reRender="fileUploadSection" 
			          ignoreDupResponses="true" 
			          ajaxSingle="true" 
			          name="reRenderUploadSection" 
			          oncomplete="reallyUpdateIt();" />
    </ui:define>	
</ui:composition>