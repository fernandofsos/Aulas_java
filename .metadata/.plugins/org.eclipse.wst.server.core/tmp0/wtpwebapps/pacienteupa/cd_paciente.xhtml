<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
					  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
<head>
	<script src="SCRIPTS/mascara.js" type="text/javascript"></script>
</head>

<ui:composition template="template.xhtml">
<ui:define name="headHtml">
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="pragma" content="no-cache" />	
	<style>
	div.quadroEdicao div{
		float: left;
	}
	</style>
	<script type="text/javascript">
	    // <![CDATA[
	    var curDt = new Date();
	    disableAfterToday = function(day) {
	        return (day.date.getTime() - curDt.getTime() < 0);
	    }
	    // ]]>
	</script>
</ui:define>   
<ui:define name="conteudo">    
	<a4j:keepAlive beanName="pacienteForm" />	
	<a4j:keepAlive beanName="emergenciaExameForm" />
	
	<rich:modalPanel id="panPacienteDuplicados" width="700" autosized="true" headerClass="headerPanel3">
		<f:facet name="header">
			<h:outputText value="PACIENTES COM O MESMO NOME"></h:outputText>		
		</f:facet>  
		<f:facet name="controls">
    	 	<h:panelGroup>
        		<h:graphicImage value="IMG/fechar.png" id="fechaPanel"/>
        		<rich:componentControl for="panPacienteDuplicados" attachTo="fechaPanel" operation="hide" event="onclick" />
        	</h:panelGroup>
    	</f:facet>
    		
		<div class="avisoPacienteDuplicado">
	    	<p>Os seguintes pacientes possuem o mesmo nome do novo paciente em cadastro. Verifique se o mesmo já esta cadastrado.</p>
		</div>
		<h:form id="formPD">
			<rich:extendedDataTable id="tblPacientes" 
	    		value="#{pacienteForm.lstPacienteCadastro}" var="paciente"
	    		onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
				width="680px" 
        		height="250px">
	     		<f:facet name="header">	
                 	<rich:columnGroup>
                 	   	<h:column><h:outputText>Sel.</h:outputText></h:column>
                 		<h:column><h:outputText>Nome Paciente</h:outputText></h:column>
                 		<h:column><h:outputText>Nome Mãe</h:outputText></h:column>
                 		<h:column><h:outputText>Dt.Nasc.</h:outputText></h:column>
                 		<h:column><h:outputText>Naturalidade</h:outputText></h:column>
                 		<h:column><h:outputText>Dt.Cad.</h:outputText></h:column>
                 	</rich:columnGroup>	
                </f:facet>
                
	     		<rich:column width="5%">
	     			<a4j:commandLink id="selPac" reRender="#{pacienteForm.listaIDRerender}" >
		     			<h:graphicImage id="imgSelecionar02" url="IMG/selecionar.png" style="border:0;" />	
						<f:setPropertyActionListener value="#{paciente}" target="#{pacienteForm.objPaciente}"/>
						<rich:componentControl for="panPacienteDuplicados" attachTo="selPac" 
					                       operation="hide" event="onclick" />
					</a4j:commandLink>								
	     		</rich:column>
	     		<rich:column width="30%"><h:outputText value="#{paciente.dscNome}"/></rich:column>
	     		<rich:column width="25%"><h:outputText value="#{paciente.dscMae}"/></rich:column>
	     		<rich:column width="10%">
		        	<h:outputText value="#{paciente.datNascimento}">
		        		<f:convertDateTime pattern="dd/MM/yyyy"/>
					</h:outputText>
		 		</rich:column>
	     		<rich:column width="20%"><h:outputText value="#{paciente.dscNaturalidade}"/></rich:column>
	     		<rich:column>
	     			<h:outputText value="#{paciente.datCadastro}">
		     			<f:convertDateTime pattern="dd/MM/yyyy"/>
		     		</h:outputText>
	    	 	</rich:column>
			</rich:extendedDataTable>
			<div style="margin-top: 10px; text-align: center">
				<a4j:commandButton value="CONTINUAR COM O NOVO CADASTRO" id="btnContinuar"
				                   style="height: 30px; width: 250px">
					<rich:componentControl for="panPacienteDuplicados" attachTo="btnContinuar" 
			                       operation="hide" event="onclick" />
				</a4j:commandButton>
			</div>
		</h:form>
	</rich:modalPanel>
	
	<rich:modalPanel id="panConfirmacao" width="300" autosized="true" headerClass="headerPanel3">
		<f:facet name="header">
			<h:outputText value="CONFIRMAÇÃO"></h:outputText>		
		</f:facet>  
		<f:facet name="controls">
    	 	<h:panelGroup>
        		<h:graphicImage value="IMG/fechar.png" id="fechaPanelConfirmacao"/>
        		<rich:componentControl for="panConfirmacao" attachTo="fechaPanelConfirmacao" operation="hide" event="onclick" />
        	</h:panelGroup>
    	</f:facet>
    	<div>
	    	<p>Deseja realizar um novo atendimento?</p>
		</div>
    	
    	<br/>	
		<h:form id="formPC">
			<div style="margin-top: 10px; text-align: center">
				<a4j:commandButton value="Sim" id="btnSim" style="height: 20px; width: 80px" action="#{pacienteForm.gravarPaciente}" oncomplete="validacaoCadastro(#{pacienteForm.erroCadastroPaciente}); Richfaces.hideModalPanel('panConfirmacao');">
					<f:setPropertyActionListener value="#{'3'}" target="#{pacienteForm.acaoCadastro}" />
					<f:setPropertyActionListener value="#{'3'}" target="#{pacienteForm.acaoCadastro}" />					
					<f:setPropertyActionListener value="#{true}" target="#{emergenciaExameForm.novaInternacao}"/>		  			
					<f:setPropertyActionListener value="#{pacienteForm.objPaciente}" target="#{emergenciaExameForm.objPaciente}"/>
					<f:setPropertyActionListener value="#{pacienteForm.objInternacao}" target="#{emergenciaExameForm.objInternacao}"/>
				</a4j:commandButton>
				<a4j:commandButton value="Não" id="btnNão" style="height: 20px; width: 80px" action="#{pacienteForm.gravarPaciente}" oncomplete="validacaoCadastro(#{pacienteForm.erroCadastroPaciente}); Richfaces.hideModalPanel('panConfirmacao');">
					<f:setPropertyActionListener value="#{'1'}" target="#{pacienteForm.acaoCadastro}" />
				</a4j:commandButton>
			</div>
		</h:form>
	</rich:modalPanel>
	
	<h:form id="cadPaciente">	
	
		<rich:hotKey key="return" selector="#cadPaciente" 
		    		             handler="#{rich:element('btnNovoAtendimento')}.click()"/>
		    		                 
		<div>
			<table class="tablePaginaPaciente">
			<tr>
				<td class="tdTitulo">CADASTRO | PACIENTE</td>
				<td class="tdCampos">
					<table style="width:100%">
					<tr>
						<td>
							<label>Nº PRONTUÁRIO</label>
							<h:outputText id="txtProntuario" value="#{pacienteForm.objPaciente.numProntuario}" styleClass="campoVazio" style="width:120px" />
						</td>
						<td>
							<label>Nº REGISTRO</label>
							<h:outputText id="txtRegistro" value="#{pacienteForm.objPaciente.isnPaciente}" styleClass="campoVazio" style="width:120px" />
						</td>
						<td>
							<label>DATA CADASTRO</label>
							<h:outputText id="txtDataCadastro" value="#{pacienteForm.objPaciente.datCadastro}" styleClass="campoVazio" style="width:120px; font-weight:bold" >
								<f:convertDateTime datePattern="dd/MM/yyyy" />			   
							</h:outputText>
						</td>
					</tr>
					</table>
				</td>
			</tr>
			</table>
         	<table class="tablePaginaPaciente">
         	<tr>
         		<td valign="top">
         			<fieldset class="fsPaginaPaciente">
		         		<legend>IDENTIFICAÇÃO</legend>
		         		<div style="margin:0 auto 0 auto; width:660px; float:none;">
			         	    <div>
			         	 		<h:outputLabel value="CARTÃO NACIONAL SAÚDE" for="inputCartao" /><br />
								<h:inputText id="inputCartao" 
										 value="#{pacienteForm.objPaciente.numCns}"
										 style="width:260px" 
										 maxlength="20"
										 styleClass="campoTexto"/>
			         	 	</div>
			         	 	<div>
			        	 		<h:outputLabel value="PACIENTE" for="inputNome" /><h:outputLabel value="*" style="color:red;" /><br />
								<h:inputText id="inputNome" 
								             styleClass="campoTexto" 
								             style="text-transform:uppercase; width:350px"
								              maxlength="50" 					              
								         	 value="#{pacienteForm.objPaciente.dscNome}">
								    <a4j:support event="onblur" action="#{pacienteForm.pesquisarNomePaciente}"
								                 reRender="panPacienteDuplicados" 
								                 oncomplete="if (#{pacienteForm.pacienteDuplicado}) { Richfaces.showModalPanel('panPacienteDuplicados'); }"/>   	 											         	 
								</h:inputText>
			         	 	</div>
									<br style="clear: both;" />
									<div style=" width:260px;">

										<h:outputLabel value="NOME SOCIAL?" for="selFoto2" /><br />
										<h:selectOneRadio id="radioSocial"
											value="#{pacienteForm.objPaciente.flgNomeSocial}">
											<f:selectItem id="nomeSocial1" itemValue="S" itemLabel="SIM"></f:selectItem>
											<f:selectItem id="nomeSocial2" itemValue="N" itemLabel="NÃO"></f:selectItem>
											<a4j:support event="onclick"
												actionListener="#{pacienteForm.limpaNomeSocial}"
												reRender="inputSocial" />
										</h:selectOneRadio>

									</div>
									<div>
										<h:outputLabel value="NOME SOCIAL" for="inputSocial"
											style="margin-left:5px;" />
										<h:outputLabel value="*" style="color:red;" />
										<br />
										<h:inputText id="inputSocial"   styleClass="campoTexto" 
											style="text-transform:uppercase; width:350px;"
											disabled="#{pacienteForm.objPaciente.flgNomeSocial == 'N' || empty pacienteForm.objPaciente.flgNomeSocial}"
											value="#{pacienteForm.objPaciente.nomeSocial}" maxlength="20">
										</h:inputText>
									</div>
									<br style="clear: both;" />
									<div>
				         	 	<h:outputLabel value="DATA NASCIMENTO" for="inputDataNascimento" /><h:outputLabel value="*" style="color:red;" /><br />
								<rich:calendar datePattern="dd/MM/yyyy" 
											   id="inputDataNascimento"	
											   enableManualInput="true" 
											   converter="ConversorDeDatas" 
											   isDayEnabled="disableAfterToday"
											   inputClass="campoTexto"
											   oninputkeypress="return formataData(event, this);"
											   maxlength="10"
											   value="#{pacienteForm.objPaciente.datNascimento}" 
											   oninputblur="if(!validarData(this.value)){alert('Data '+this.value+' é inválida!'); this.value=''; this.focus(); }"/>						
			         	 	</div>
			         	 	<div style="float:left; margin-right:22px">
		        	 			<h:outputLabel value="SEXO" for="ddpSexo" /><h:outputLabel value="*" style="color:red;" /><br />
								<h:selectOneMenu id="ddpSexo" style="width:115px" 
								                 value="#{pacienteForm.objPaciente.sexo.isnSexo}" 
								                 styleClass="selectItens">
									<f:selectItems value="#{pacienteForm.sliSexo}" />
								</h:selectOneMenu>
							</div>
							<div style="margin-right:5px">
					         	<h:outputLabel value="FILIAÇÃO | PAI" for="inputNomePai" /><br />
								<h:inputText id="inputNomePai"
								             styleClass="campoTexto"
								             onkeyup="limitarTamanhoCampo(this,50)"
								             style="text-transform:uppercase; width:350px;" 
								             maxlength="50" 
											 value="#{pacienteForm.objPaciente.dscPai}"  />	
					        </div>
					        <br style="clear:both;"/>
					        <div>
			         	 		<h:outputLabel value="APELIDO" for="inputApelido" /><br />
								<h:inputText id="inputApelido"
								             style="text-transform:uppercase; width:110px;"
								             maxlength="30"
								             styleClass="campoTexto"
								     		 value="#{pacienteForm.objPaciente.dscApelido}"/>
			         	 	</div>
			         	 	<div style="float:left;">
								<h:outputLabel value="COR" for="ddpCor" /><h:outputLabel value="*" style="color:red;" /><br />
								<h:selectOneMenu id="ddpCor" style="width:130px;" 
												 styleClass="selectItens"
												 value="#{pacienteForm.objPaciente.cor.isnCor}">
									<f:selectItems value="#{pacienteForm.sliCor}" />
								</h:selectOneMenu>
							</div>
							<div style="margin-left:6px;">
					         	<h:outputLabel value="FILIAÇÃO | MÃE" for="inputNomeMae" style="margin-left:5px;" /><h:outputLabel value="*" style="color:red;" /><br />
								<h:inputText id="inputNomeMae" 
								             styleClass="campoTexto"
								             onkeyup="limitarTamanhoCampo(this,50)"
								             style="text-transform:uppercase; width:350px;"	
								             maxlength="50"				             
											 value="#{pacienteForm.objPaciente.dscMae}"  /> 								
					        </div>
					        <br style="clear:both;"/>
					        <div>
			         	 	    <h:outputLabel value="NACIONALIDADE" for="ddpNacionalidade" /><h:outputLabel value="*" style="color:red;" /><br />
								<h:selectOneMenu id="ddpNacionalidade" 
												 style="width:262px" 
												 styleClass="selectItens"
												 value="#{pacienteForm.objPaciente.nacionalidade.isnNacionalidade}"
												 onchange="selecionarPais()">
									<f:selectItems value="#{pacienteForm.sliNacionalidade}" />
								</h:selectOneMenu>
			         	 	</div>
			         	 	<h:panelGroup id="nacBrasil" style="padding:0; margin:0;">
			                    <div style="float:left; margin-left:10px">        	 	 	
			        	 			<h:outputLabel value="UF" for="dropDownUf" /><h:outputLabel value="*" style="color:red;" /><br />
									<h:selectOneMenu id="dropDownUf" 
													 style="font-size:12px;" 
													 styleClass="selectItens"
													 value="#{pacienteForm.objPaciente.ufNaturalidade.isnUf}">
										<f:selectItems value="#{pacienteForm.sliUf}" />
									</h:selectOneMenu> 		
								</div>
								<div style="float:left; ">
									<h:outputLabel value="NATURALIDADE" for="inputNaturalidade" /><h:outputLabel value="*" style="color:red;" /><br />
									<h:inputText id="inputNaturalidade" 								 
											 style="width:172px;"
											 styleClass="campoTexto"
											 value="#{pacienteForm.objPaciente.dscNaturalidade}"
											 maxlength="500" />
								</div>
			         	 	</h:panelGroup>     
			         	 	<h:panelGroup id="nacOutra" style="display: none;">
			         	 		<div style="float:left;margin-left:10px;">
				         	 		<h:outputLabel value="PAÍS DE ORIGEM" for="dropPais" /><h:outputLabel value="*" style="color:red;" /><br />
									<h:selectOneMenu id="dropPais" 
													 style="width:352px; font-size:12px;" 
													 styleClass="selectItens"
													 value="#{pacienteForm.objPaciente.isnPais}">
										<f:selectItems value="#{pacienteForm.sliPais}" />
									</h:selectOneMenu>
								</div>
			         	 	</h:panelGroup>
			         	 	<br style="clear:both;"/>
			         	 	<div>
			         	 		<h:outputLabel value="CPF" for="inputCPF" /><br />
								<h:inputText id="inputCPF"
											style="width:130px" 
											value="#{pacienteForm.objPaciente.numCPF}" 
											maxlength="14"
											styleClass="campoTexto" 
											onkeyup="formataCPF(this);" >						
								</h:inputText>
			         	 	</div>
			         	 	<div>
			         	 		<h:outputLabel value="RG" for="inputRG" /><br />
								<h:inputText id="inputRG" 
								          	style="width:110px"	 
											value="#{pacienteForm.objPaciente.numRG}" maxlength="15"
											styleClass="campoTexto" />
			         	 	</div>
			         	 	<div>
		         	 			<h:outputLabel value="ORG. EMISSOR" for="inputOrgaoEmissor" /><br />
								<h:inputText id="inputOrgaoEmissor" 
								             style="width:80px"
								             styleClass="campoTexto"
							       	 		 value="#{pacienteForm.objPaciente.dscOrgaoEmissaoRg}" />
			         	 	</div>         	 	 	
			         	 	<div>
							   	<h:outputLabel value="UF RG" for="dropDownUfDoc" /><br />
								<h:selectOneMenu id="dropDownUfDoc" 
												 style="width:100px"
												 styleClass="selectItens"
							    				 value="#{pacienteForm.objPaciente.ufEmissaoRg.isnUf}">
									<f:selectItems value="#{pacienteForm.sliUf}" />
								</h:selectOneMenu> 
							</div>         	 	 	
			         	 	<div>
			        	 		<h:outputLabel value="EMISSÃO RG" for="inputDataEmissaoRG" /><br />						
								<rich:calendar datePattern="dd/MM/yyyy"	id="inputDataEmissaoRG"
												enableManualInput="true"
												converter="ConversorDeDatas"
												oninputkeypress="return formataData(event, this);" 
												maxlength="10"
												ondateselected="checkBirthDate(this,event.rich.date);"
												inputClass="campoTexto"							   
												value="#{pacienteForm.objPaciente.datEmissaoRg}" />						
			         	 	</div>
			         	 	<br style="clear:both;"/>
			         	 	<div>
			         	       	<h:outputLabel value="TIPO CERTIDÃO" for="dropDownTipo" /><br />
								<h:selectOneMenu id="dropDownTipo" 
											    style="width:262px"
											    styleClass="selectItens"
												value="#{pacienteForm.objPaciente.certidao.isnTipoCertidao}">
									<f:selectItems value="#{pacienteForm.sliTipoCertidao}" />						
								</h:selectOneMenu>
			         		</div>
			         		<div style="margin-left:5px;">
			         	 		<h:outputLabel value="CARTÓRIO" for="inputCartorio" style="margin-left:5px;" /><br />
								<h:inputText id="inputCartorio" 
								             style="width:350px"
								             styleClass="campoTexto"
											 value="#{pacienteForm.objPaciente.dscCartorio}" maxlength="30"/>
							</div>
							<br style="clear:both;"/>
							<div>
			         	 		<h:outputLabel value="MATRÍCULA" for="inputMatricula" /><br />
								<h:inputText id="inputMatricula"  
								            style="width:260px" 
								            styleClass="campoTexto"
										 	value="#{pacienteForm.objPaciente.numMatricula}" maxlength="35"/>
			         	 	</div>
							<div>
								<h:outputLabel value="LIVRO" for="inputLivro" /><br />
								<h:inputText id="inputLivro"
							             style="width:50px" 
							             styleClass="campoTexto"
										 value="#{pacienteForm.objPaciente.dscLivro}" maxlength="10"/>
							</div>         		
		         		    <div>
		         	        	<h:outputLabel value="FOLHA" for="inputFolha" /><br />
								<h:inputText id="inputFolha" 
										style="width:50px"
										styleClass="campoTexto"
										value="#{pacienteForm.objPaciente.dsc_folha}" maxlength="10"/>	  
		         	 		</div>
			         	 	<div>
		         	        	<h:outputLabel value="TERMO" for="inputTermo" /><br />
								<h:inputText id="inputTermo"
											style="width:45px"
											styleClass="campoTexto" 
											value="#{pacienteForm.objPaciente.dscTermo}" maxlength="10"/>
							</div>
							<div>			
								<h:outputLabel value="DATA EMISSÃO" for="inputDataCertidao" /><br /> 
		   	       				<rich:calendar datePattern="dd/MM/yyyy" id="inputDataCertidao" 
		       	       					enableManualInput="true"  
		       	       					oninputkeypress="return formataData(event, this);" 
		       	       					maxlength="10"
		       	       					converter="ConversorDeDatas"  
		       	       					inputClass="campoTexto"     	       							
									    value="#{pacienteForm.objPaciente.datEmissaoCertidao}" />
							</div>
							
							<div>
			       	        	<h:outputLabel value="APRESENTOU DOCUMENTO COM FOTO?" for="inputTermo" /><br />
			       	        	<h:selectBooleanCheckbox value="#{pacienteForm.objPaciente.flgDocFotoBoolean}" style="border:white;" />
							</div>
						</div>
					</fieldset>
        		</td>
        		<td style="width:10px;">&nbsp;</td>
        		<td valign="top" style="width:370px">
        			<fieldset class="fsPaginaPaciente">
	         			<legend>OBSERVAÇÃO</legend>
	         			<div style="margin-left:auto;margin-right:auto;">
	         				<h:inputTextarea id="inputDscObs" 
					              style="text-transform:uppercase; width:320px; height:358px"
								  value="#{pacienteForm.objPaciente.dscObs}" 
								  onkeyup="return limitarTamanhoCampo(this,500);" 
								  styleClass="campoTexto countdown limit_500_"/>
							<div class="restantes" style="width:300px; font-size:12px">&nbsp;</div>
						</div>
					</fieldset>
				</td>
				</tr>
				</table>
         	 	<br style="clear: both"/>
		 		<div style="font-size: 0.65em; margin: 8px 0 8px 0; font-weight: bold">
		 			<h:panelGroup rendered="#{pacienteForm.objPaciente != null and pacienteForm.objPaciente.isnPaciente != null}">
			 		    <h:outputText value="Cadastrado por: " />
			 		    <h:outputText value="#{pacienteForm.nomeUsuario}" />
		 			</h:panelGroup>
		 		</div>
	 		<br style="clear: both"/>
   			<div style="text-align: center; margin-bottom: 10px">
				<a4j:commandButton id="btnGrava"
	  	    		value="Alterar"	  	    		
					styleClass="botaoModal100"				 
					style="margin-right: 10px;"
					rendered="#{pacienteForm.objPaciente != null and pacienteForm.objPaciente.isnPaciente != null}"
					onclick="Richfaces.showModalPanel('panConfirmacao');">
					<f:setPropertyActionListener value="#{'1'}" target="#{pacienteForm.acaoCadastro}" />														
				</a4j:commandButton>
						
				<a4j:commandButton id="btnNovaInternacao" 
									rendered="#{pacienteForm.siglaHospital=='HRC'}"
							    	value="Nova Internação"
									style='margin-right: 10px;'					 
									action ="#{pacienteForm.gravarPaciente}"
									onclick="this.disabled=true"
									styleClass="botaoModal100"	
									oncomplete="this.disabled=false;validacaoCadastro(#{pacienteForm.erroCadastroPaciente})" >
									<f:setPropertyActionListener value="#{'2'}" target="#{pacienteForm.acaoCadastro}" />	
							    	<f:setPropertyActionListener value="#{false}" target="#{internacaoForm.desabilitar}" />
						  			<f:setPropertyActionListener value="#{true}" target="#{internacaoForm.novaInternacao}"/>		  			
						  			<f:setPropertyActionListener value="#{'1'}" target="#{internacaoForm.objInternacao.flgSemAndar}"/>
						  			<f:setPropertyActionListener value="#{'N'}" target="#{internacaoForm.objInternacao.flgPreso}"/>
									<f:setPropertyActionListener value="#{pacienteForm.objPaciente}" target="#{internacaoForm.objPaciente}"/>
					  				<f:setPropertyActionListener value="#{pacienteForm.objInternacao}" target="#{internacaoForm.objInternacao}"/>	  				
				</a4j:commandButton>
				
				<a4j:commandButton id="btnNovoAtendimento" 
							    	value="Novo Atendimento"										 
									action ="#{pacienteForm.gravarPaciente}"
									style='margin-right: 10px;'
									styleClass="botaoModal100"
									onclick="this.disabled=true"
									oncomplete="this.disabled=false;validacaoCadastro(#{pacienteForm.erroCadastroPaciente})" 
									rendered="#{pacienteForm.siglaHospital=='UPA'}">	
									<f:setPropertyActionListener value="#{'3'}" target="#{pacienteForm.acaoCadastro}" />					
									<f:setPropertyActionListener value="#{true}" target="#{emergenciaExameForm.novaInternacao}"/>
									<f:setPropertyActionListener value="#{true}" target="#{emergenciaExameForm.bairroFortaleza}"/>
									<f:setPropertyActionListener value="#{pacienteForm.objPaciente}" target="#{emergenciaExameForm.objPaciente}"/>
									<f:setPropertyActionListener value="#{pacienteForm.objInternacao}" target="#{emergenciaExameForm.objInternacao}"/>		    		  				
				</a4j:commandButton>
				
				<a4j:commandButton id="btnNovoAmbulatorio" 
									value="Novo Ambulatório"										 
									rendered="#{pacienteForm.siglaHospital=='HRC'}"
									action ="#{pacienteForm.gravarPaciente}"
									style='margin-right: 10px;'
									styleClass="botaoModal100"
									onclick="this.disabled=true"
									oncomplete="this.disabled=false;validacaoCadastro(#{pacienteForm.erroCadastroPaciente})">	
									<f:setPropertyActionListener value="#{'4'}" target="#{pacienteForm.acaoCadastro}" />	
							    	<f:setPropertyActionListener value="#{false}" target="#{internacaoForm.desabilitar}" />
						  			<f:setPropertyActionListener value="#{true}" target="#{internacaoForm.novaInternacao}"/>		  			
						  			<f:setPropertyActionListener value="#{'1'}" target="#{internacaoForm.objInternacao.flgSemAndar}"/>
						  			<f:setPropertyActionListener value="#{'N'}" target="#{internacaoForm.objInternacao.flgPreso}"/>
						  			<f:setPropertyActionListener value="#{'S'}" target="#{internacaoForm.flgAmbulatoriosPendentes}"/>
									<f:setPropertyActionListener value="#{pacienteForm.objPaciente}" target="#{internacaoForm.objPaciente}"/>
					  				<f:setPropertyActionListener value="#{pacienteForm.objInternacao}" target="#{internacaoForm.objInternacao}"/>
					  				<f:setPropertyActionListener value="#{pacienteForm.marcacaoBean}" target="#{internacaoForm.objInternacao.marcacaoBean}"/>
					  				<f:setPropertyActionListener value="#{pacienteForm.dscClinica}" target="#{internacaoForm.objLeito.enfermaria.clinica.dscClinica}"/>
					  				<f:setPropertyActionListener value="#{pacienteForm.dscEnfermaria}" target="#{internacaoForm.objLeito.enfermaria.dscEnfermaria}"/>
					  				<f:setPropertyActionListener value="#{pacienteForm.dscLeito}" target="#{internacaoForm.objLeito.dscLeito}"/>
					  				<f:setPropertyActionListener value="#{pacienteForm.isnLeito}" target="#{internacaoForm.objLeito.isnLeito}"/>
					  				<f:setPropertyActionListener value="#{pacienteForm.flgLeito}" target="#{internacaoForm.objLeito.flgLeito}"/>
				</a4j:commandButton>

				<h:commandButton id="btnCancelar" 
			   	 	value="Cancelar"
					style='margin-right: 10px;' 
					action="#{pacienteForm.cancelarCadastro}" immediate="true" 
					styleClass="botaoModal100">					
				</h:commandButton> 				
			</div>
			<br/>
			<br/>
			<br/>		
   		</div>
   		<script type="text/javascript">
   		<!--
   		    //
   		    selecionarPais();
   		    
   		    //
   		    function validacaoCadastro(erro) {   		   
   		       if (erro==3) {
   		           alert("Usuário sem permissão.");   		           
   		       } else if (erro==4) {
   		           alert("Campo SEXO é obrigatório.");
   		           document.getElementById("cadPaciente:ddpSexo").focus();			       	
   		       } else if (erro==5) {
   		           alert("Campo COR é obrigatório.");
   		           document.getElementById("cadPaciente:ddpCor").focus();
   		       } else if (erro==6) {
   		           alert("Informe a DATA DE NASCIMENTO.");
   		           document.getElementById("cadPaciente:inputDataNascimento").focus();
   		       } else if (erro==21) { 
   		           alert("DATA DE NASCIMENTO inválida!");
   		           document.getElementById("cadPaciente:inputDataNascimentoInputDate").focus(); 
   		       } else if (erro==7) { 
   		           alert("DATA DE NASCIMENTO não pode ser maior que hoje ou paciente não pode ter 150 anos ou mais!");
   		           document.getElementById("cadPaciente:inputDataNascimentoInputDate").focus();
   		       } else if (erro==8) {
   		           alert("DATA DA CERTIDÃO é inválida!");
   		           document.getElementById("cadPaciente:inputDataCertidaoInputDate").focus();
   		       } else if (erro==9) {
   		           alert("Informe a UF e/ou NATURALIDADE do paciente.");
   		           document.getElementById("cadPaciente:inputNaturalidade").focus();
   		       } else if (erro==10) {
   		           alert("Informe a NACIONALIDADE do paciente.");
   		           document.getElementById("cadPaciente:ddpNacionalidade").focus();
   		       } else if (erro==11) {
   		           alert("Erro de gravação! Contate o NTI.");
   		       } else if (erro==12) {
   		           alert("Já existe um paciente cadastrado com esse nome e mesmo nome da mãe.");
   		       } else if (erro==13) {
   		           alert("Nome do paciente é obrigatório");
   		           document.getElementById("cadPaciente:inputNome").focus();
   		       } else if (erro==14) {
   		           alert("Nome da mãe é obrigatório.");
   		           document.getElementById("cadPaciente:inputNomeMae").focus();
   		       } else if (erro==15) {
   		           alert("Paciente não é brasileiro, informe o país de origem.");
   		           document.getElementById("cadPaciente:dropPais").focus();   		           
   		       } else if (erro==16) {
   		           alert("Nome do paciente não é válido! Não use abreviações, nenhum tipo de pontuação e não pode usar apenas um nome.");
   		           document.getElementById("cadPaciente:inputNome").focus();
   		       } else if (erro==17) {
   		           alert("Nome da mãe não é válido! Não use abreviações, nenhum tipo de pontuação e não pode usar apenas um nome.");
   		           document.getElementById("cadPaciente:inputNomeMae").focus();
   		       } else if (erro==18) {
   		           alert("CPF informado não é válido!");
   		           document.getElementById("cadPaciente:inputCPF").focus();              
   		       } else if(erro==19){
					alert("DATA DA CERTIDÃO não pode ser maior que hoje e/ou menor que ano de 1500!");
					document.getElementById("cadPaciente:inputDataCertidaoInputDate").focus();
   		       } else if(erro==20) {
					alert("DATA EMISSÃO DO RG não pode ser maior que hoje e/ou menor que ano de 1500!");
					document.getElementById("cadPaciente:inputDataEmissaoRG").focus();
   		       } else if (erro==2) {
   		           alert(" ATENÇÃO: Paciente já possui emergência/internação em aberto.");
   		       }else if (erro==27) {
	        	alert(" ATENÇÃO: Selecione se o paciente tem nome social.");
   		       }else if (erro==28) {
	        	alert(" ATENÇÃO:Informe o nome social");
   		       } else if (document.getElementById('cadPaciente:inputDataNascimentoInputDate') == null
   		   		       		|| document.getElementById('cadPaciente:inputDataNascimentoInputDate').value == ''
   	   		   		       		|| !verificaData(document.getElementById('cadPaciente:inputDataNascimentoInputDate')) ) 
		   	   {
    		           alert("Data de nascimento inválida!");
    		           document.getElementById('cadPaciente:inputDataNascimentoInputDate').focus();
   		       } else {
   		           alert("Paciente cadastrado com sucesso.");
   		           var btn = document.getElementById("cadPaciente:btnCancelar");
			       btn.click();	
   		       }   
   		    }		
   		    	
		    function avisoErroExclusao(erro) {
			    if (erro == 1) {
			    	alert("ATENÇÃO: Não é possível excluir. Paciente já possui internação.");
			   		return false;
			    }
			    if (erro == 2) {
				    alert("ATENÇÃO: Paciente já possui uma internação em aberto.");
				    return false;
			    }
			    if (erro == 3) {
				    alert("Usuário sem permissão.");
				    return false;
			    }  
		    }
		    
		    function selecionarPais() {
		       var indice = document.getElementById("cadPaciente:ddpNacionalidade").selectedIndex; 
			   var itbr = document.getElementById("cadPaciente:nacBrasil");
		       var itou = document.getElementById("cadPaciente:nacOutra");
		       
		       if (indice==1 || indice==0) {		          
		          itbr.style.display = "inline";
		          itou.style.display = "none"; 
		       } else {
		          itbr.style.display = "none";
		          itou.style.display = "inline";
		       }
		    }

		    //contador de caracteres de inputs e textareas
		    initCountdown();

		    //checa se a data de nascimento não é uma data futura
		    function checkBirthDate(obj, choosenDate) {
		    	document.getElementById("cadPaciente:inputDataNascimento").component.doCollapse();
		        var now = new Date();
		        var diff = now.getTime() - choosenDate.getTime();
		        if (diff < 0) {
		            alert("A data de nascimento não pode ser maior que a data atual!");
		        }
		        return false;
		    }
			
		//-->
		</script>
	</h:form>
	</ui:define>	
</ui:composition>
</html>