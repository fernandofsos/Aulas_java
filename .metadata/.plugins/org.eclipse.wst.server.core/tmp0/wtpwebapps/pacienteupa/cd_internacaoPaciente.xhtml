<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
					  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<ui:composition template="template.xhtml">	
    <ui:define name="headHtml">
    	<!-- cd_internacaoPaciente.xhtml -->
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="pragma" content="no-cache" />	
	</ui:define>  
	<ui:define name="conteudo">
		<a4j:keepAlive beanName="internacaoForm" />
		
	<!-- MODAL PANEL DE SELEÇÃO DA CLINICA/ HOSPITAL -->
	<rich:modalPanel id="panelDiagnostico" autosized="false" width="700" height="500" resizeable="false"
		                 headerClass="headerPanel3">
			<!-- BARRA DE TITULO MODAL-->
    	<f:facet name="header">
       		<h:outputText value="PESQUISA DE DIAGNÓSTICO INICIAL - CID"></h:outputText>
    	</f:facet>

   		<f:facet name="controls">
   		 	<h:panelGroup>
       			<h:graphicImage value="IMG/fechar.png" styleClass="hidelink" id="hidelink2" />
       			<rich:componentControl for="panelDiagnostico" attachTo="hidelink2" operation="hide" event="onclick" />
       		</h:panelGroup>
  		</f:facet>
		    <!-- FIM DA BARRA DE TITULO MODAL-->
	        
    		<!-- CAMPOS DE BUSCA -->			 
		<h:form id="formCid10">
			<div style="height: 30px">
			    <div class="colLeft">     
	       			<label class="font12">PESQUISAR:</label>
	       		</div>
	       		<div class="colLeft largura220">
	       			<h:inputText value="#{internacaoForm.strCid10}" styleClass="campoTexto largura200" />
	       		</div>
	       		<div class="colLeft">
	    			<a4j:commandButton image="IMG/pesquisa.gif" 
	    		                   action="#{internacaoForm.buscacid10}" 
	    			                   reRender="tabelaCid" />
	    		</div>        
	    	</div>	    		
	    	<div class="margemBottom8">
				<rich:extendedDataTable	id="tabelaCid"
				    onRowClick="mostrarDetalheCID('#{cid10.dscDetalhe}')"
					onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
			        onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"		            	
					value="#{internacaoForm.lstCid10}" 
					var="cid10" 
					width="680px" 
                    height="250px"
                    noDataLabel="** Pesquisa Vazia **">
                    <f:facet name="header">	
                    	<rich:columnGroup>
                	       	<h:column><h:outputText>Sel.</h:outputText></h:column>
                 	   		<h:column><h:outputText>Código</h:outputText></h:column>
                 	   		<h:column><h:outputText>Descrição</h:outputText></h:column>
                 	   	</rich:columnGroup>	
                 	</f:facet>
                 	    		
					<rich:column width="5%">				    		
						<center>
							<a4j:commandLink id="selecionarCid10" styleClass="primeiro" reRender="mostraCid10">
								<h:graphicImage id="imgSelecionar02" url="IMG/selecionar.png" style="border:0;" />	
								<f:setPropertyActionListener value="#{cid10}" target="#{internacaoForm.objCid10}"/>
								<rich:componentControl for="panelDiagnostico" attachTo="selecionarCid10" operation="hide" event="onclick" />
							</a4j:commandLink>
						</center>
					</rich:column>
														
					<rich:column width="10%" style="text-align: center; font-size: 14px">
						<h:outputText value="#{cid10.codCid10}" />					
					</rich:column>
							
					<rich:column width="85%" style="font-size: 12px">				    		
						<h:outputText value="#{cid10.dscCid10}" />											
					</rich:column>
				</rich:extendedDataTable>
			</div>		
			<label class="font12"><b>DETALHES</b></label>		
			<div class="quadroDetalheCID" id="detalheCID">			    	
			</div>
		</h:form>		
 	</rich:modalPanel>	
	<!-- FINAL DO MODAL PANEL DE INTERNACAO DE PACIENTE -->    
		
	<!-- MODAL PANEL DE SELEÇÃO DA CLINICA/ HOSPITAL -->
	<rich:modalPanel id="panelLeito" autosized="false" width="700" height="500" resizeable="false"
		                 headerClass="headerPanel3" >
		<!-- BARRA DE TITULO MODAL-->
        <f:facet name="header">
            <h:outputText value="PESQUISA DE LEITO"></h:outputText>            
        </f:facet>

        <f:facet name="controls">
            <h:panelGroup>
            	<h:graphicImage value="IMG/fechar.png" styleClass="hidelink" id="hidelink" />
            	<rich:componentControl for="panelLeito" attachTo="hidelink" operation="hide" event="onclick" />
            </h:panelGroup>            
        </f:facet>
     	<!-- FIM DA BARRA DE TITULO MODAL-->
	        
        <!-- CAMPOS DE BUSCA -->			 
	   	<h:form>
	   		<div style="font-family: verdana; font-size: 14px; margin-bottom: 5px">	        		
	        	<label style="vertical-align:baseline;">UNIDADE:</label>
		        <h:selectOneMenu id="dropDownClinica" style="font-size: 12px; height: 20px; width: 200px;  margin-right: 5px"
		     					 value="#{internacaoForm.objLeito.enfermaria.clinica.isnClinica}">
						<a4j:support id="sptSolicitacao2" 
									 reRender="tabelaItens3"						             
						             action="#{internacaoForm.buscaLeitoDesocupado}" 
						             event="onchange"
						             ajaxSingle="true">
						</a4j:support>		 
						<f:selectItems value="#{internacaoForm.sliClinica}" />
				</h:selectOneMenu>										
			</div>
	        <!-- FIM CAMPOS DE BUSCA -->		        
	        
		    <!-- INICIO DA TABELA -->
		    <rich:dataTable id="tabelaItens3"
							onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
			            	onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
							value="#{internacaoForm.lstLeitoDesocupado}" 
							var="leitoDesocupado" 
							rows="15" 
							rowKeyVar="linha" 
							style="width:100%;" 
							reRender="ds">							
				<f:facet name="header">							
					<rich:columnGroup>
						<h:column><h:outputText value="Selecione" /></h:column>
						<h:column><h:outputText value="Enfermaria" /></h:column>
						<h:column><h:outputText value="Leito" /></h:column>
						<h:column><h:outputText value="Sexo" /></h:column>
						<h:column><h:outputText value="Status" /></h:column>
						<h:column><h:outputText value="Reservado para" /></h:column>
					</rich:columnGroup>
				</f:facet>
							
				<rich:column width="5%">
					<center>																
						<a4j:commandLink id="selecionar" 
						                 styleClass="primeiro"
						                 oncomplete="validarLeito(#{internacaoForm.erroInternacao})" 
						                 reRender="tabelaItens3,panelTeste" >
							<h:graphicImage id="imgSelecionar" url="IMG/selecionar.png" style="border:0;" />	
							<f:setPropertyActionListener value="#{leitoDesocupado}" target="#{internacaoForm.objLeito}"/>							
						</a4j:commandLink>
					</center>
				</rich:column>
														
				<rich:column >
					<h:outputText value="#{leitoDesocupado.enfermaria.dscEnfermaria}" />
				</rich:column>
							
				<rich:column >
					<h:outputText value="#{leitoDesocupado.dscLeito}" />
				</rich:column>
				
				<rich:column >
					<h:outputText value="#{(leitoDesocupado.flgSexo==null)?'MAS/FEM':((leitoDesocupado.flgSexo=='F')?'FEM':'MAS')}" />
				</rich:column>
				
				<rich:column >
					<h:outputText value="#{(leitoDesocupado.flgLeito == 'R'?'Resevado':'Livre')}" />
				</rich:column>									
				
				<rich:column >
					<h:outputText value="#{leitoDesocupado.paciente}" />
				</rich:column>
								
				<f:facet name="footer">
					<rich:datascroller id="ds" ajaxSingle="false" />
				</f:facet>
			</rich:dataTable>
	   	</h:form>
</rich:modalPanel>

<h:form id="cdInternacao" >   	
	<label class="tituloPagina">INTERNAÇÃO</label>
	<div class="quadroPaciente">			
		<div class="col390">
			<label>Nome do Paciente:</label><br />
		   	<h:outputText id="nmPaciente" value="#{internacaoForm.objPaciente.dscNome}" 
			              styleClass="campoVazio col380" ></h:outputText>
		</div>
		<div class="col390">
			<label>Nome da Mãe:</label><br />
		   	<h:outputText id="nmMae" value="#{internacaoForm.objPaciente.dscMae}" 
				        styleClass="campoVazio col380" ></h:outputText>
		</div>	
		<div class="col390">
			<div class="col70" style="margin-right: 10px">				
				<label>Sexo:</label><br />
				<h:outputText value="#{internacaoForm.objPaciente.sexo.dscSexo}" styleClass="campoVazio col70" />
			</div>
			<div class="col220" style="margin-right: 10px">
			    <label>Data Nascimento:</label><br />						
				<h:outputText value="#{internacaoForm.objPaciente.idade}" styleClass="campoVazio col220" />								
			</div>
			<div class="col70">
			    <label>Prontuario:</label><br />
				<h:outputText value="#{internacaoForm.objPaciente.numProntuario} " styleClass="campoVazio col70" />
			</div>
		</div>			
		<div class="col390">
			<div class="col300" style="margin-right: 10px">
				<label>Último Leito:</label><br />
				<h:outputText value="#{internacaoForm.objPaciente.leitoAtual}" styleClass="campoVazio col300" />
			</div>
		   	<div class="col70">
		   	    <rich:spacer height="18" style="display:block"/>
		   	    <div class="col60 campoVazio">
		       		<h:graphicImage value="IMG/iconeCCIH.png" alt="CCIH" 
		       		rendered="#{internacaoForm.objPaciente.flgVre=='S'}"/>
		       	</div>
		   	</div>
		</div>								
	</div>
	<h3 class="subTitulo">DADOS DA INTERNAÇÃO</h3>
	<div class="quadroEdicaoU">      	  
		<div class="col450"  style="margin-right: 10px"> 
			<label>Situação Familiar:</label>
			<h:outputText value="*" style="color:red;font-weight: bold;" /><br />
			<h:selectOneMenu id="dropDownSituacao" 
					value="#{internacaoForm.objInternacao.situacaoFamiliar.isnSituacaoFamiliar}"
					style="width: 435px" styleClass="selectItens">
				<f:selectItems value="#{internacaoForm.sliSituacaoFamilia}" />
			</h:selectOneMenu>			   
		</div>
		<div class="col320">
        	<label>Escolaridade:</label>
            <h:outputText value="*" style="color:red;font-weight: bold;" /><br />
			<h:selectOneMenu id="dropDownEscolaridade" 
							value="#{internacaoForm.objInternacao.escolaridade.isnEscolariade}"
							style="width: 300px" styleClass="selectItens">
				<f:selectItems value="#{internacaoForm.sliEscolaridade}" />
			</h:selectOneMenu>			   
		</div>
		<div class="col450" style="margin-right: 10px"> 
			<label>Religião:</label>
            <h:outputText value="*" style="color:red;font-weight: bold;" /><br />
			<h:inputText id="inputReligiao" style="width: 435px;"				  	       
				       value="#{internacaoForm.objInternacao.dscReligiao}"
				       maxlength="30" styleClass="campoTexto"/>
			       			  		       
		</div>
        <div class="col320">
			<label>Ocupação:</label>
			<h:outputText value="*" style="color:red;font-weight: bold;" /><br />
			<h:selectOneMenu id="dropDownOcupacao" 
			  				 value="#{internacaoForm.objInternacao.ocupacao.isnOcupacao}"
			  				 style="width: 300px" styleClass="selectItens">
				<f:selectItems value="#{internacaoForm.sliOcupacao}"/>
			</h:selectOneMenu>			  
		</div>
	</div>
	<div class="quadroEdicaoU">          
    	<div class="col450">
        	<label>Endereço:</label>
            <h:outputText value="*" style="color:red;font-weight: bold;" /><br />
			<h:inputText id="inputEndereco" 
				     	value="#{internacaoForm.objInternacao.dscEndereco}"					     
				     	style="width: 400px;"
				     	maxlength="80"
				     	styleClass="campoTexto" />
		</div>
        <div class="col320">
        	<label>Complemento:</label><br />
			<h:inputText id="inputComplemento" value="#{internacaoForm.objInternacao.dscComplemento}"							 
						style="width: 310px;"
						maxlength="30" 
						styleClass="campoTexto" />
        </div>                 
		<div class="col450">
            <div class="col280">  
                <label>Bairro:</label>
                <h:outputText value="*" style="color:red;font-weight: bold;" /><br />
				<h:inputText id="inputBairro" 
					 	value="#{internacaoForm.objInternacao.dscBairro}"
					 	maxlength="30"					 
					 	style="width: 250px;" styleClass="campoTexto"/>					 					 
			</div>              
			<div class="col130">
                <label>CEP:</label>
                <h:outputText value="*" style="color:red;font-weight: bold;" /><br />
				<h:inputText id="inputCep" 				     	
		             	value="#{internacaoForm.objInternacao.numCep}"
		             	maxlength="9"
		             	onkeydown="formataCEP(this);"		             	
		             	style="width: 120px" styleClass="campoTexto" />	   			 	
           	</div>
        </div>                
        <div class="col320">
			<div class="col70">
				<label>UF:</label><br />
			    <h:selectOneMenu id="ddpUF" style="width: 60px"  
				                     value="#{internacaoForm.isnUf}" 
				                     styleClass="selectItens">
					<a4j:support action="#{internacaoForm.lerMunicipiosPaciente}"
						             event="onchange"						              
						             ajaxSingle="true"
						             reRender="ddpMunicipio" />
					<f:selectItems value="#{internacaoForm.sliUf}" />
			  	</h:selectOneMenu>
			</div>
            <div class="col250">	
                <label>Cidade:</label>
                <h:outputLabel style="color:red;font-weight: bold;" value=" * " /><br />
				<h:selectOneMenu id="ddpMunicipio" style="width: 240px"  
				                   value="#{internacaoForm.objInternacao.municipio.isnMunicipio}" 
				                   styleClass="selectItens">						
					<f:selectItems value="#{internacaoForm.sliMunicipio}" />
				</h:selectOneMenu>				  
            </div>  
		</div> 
	</div>
    <div class="quadroEdicaoU">
		<div class="col390">
        	<label><b>Telefone 1</b></label>
	        <div>
				<label style="width: 90px">Tipo, DDD, Nº:</label>
				<h:selectOneMenu id="dropDownTipoTelefone1" 
			                     value="#{internacaoForm.objInternacao.tipoTelefone1.isnTipoTelefone}"
			                     styleClass="selectItens">
					<f:selectItems value="#{internacaoForm.sliTipoTelefone}" />
			    </h:selectOneMenu>
			    <label></label>			    	     	  
				<h:inputText id="inputDDDFixo1" value="#{internacaoForm.objInternacao.numDdd1}"
				   		   maxlength="2" style="width: 30px; margin-right: 10px" styleClass="campoTexto"/>	
				<label style="margin-right: 5px"></label> 				 				  
				<h:inputText id="inputTelefoneFixo1" 	    	         	
	        	     		value="#{internacaoForm.objInternacao.numTelefone1}"
					 		maxlength="9" style="width: 90px" styleClass="campoTexto"/>    				  
	        </div>     
	        <div>
				<label style="width: 90px">Contato:</label>
				<h:inputText id="inputContato1"  value="#{internacaoForm.objInternacao.dscTelefone1Contato}"
							 maxlength="15" style="width: 250px" styleClass="campoTexto"/>
			</div>         
		</div>
		<div class="col390">
			<label><b>Telefone 2</b></label>
			<div>
				<label style="width: 90px">Tipo, DDD, Nº:</label>	    			  
				<h:selectOneMenu id="dropDownTipoTelefone2" 
			                     value="#{internacaoForm.objInternacao.tipoTelefone2.isnTipoTelefone}"
			                     styleClass="selectItens">
					<f:selectItems value="#{internacaoForm.sliTipoTelefone}" />
				</h:selectOneMenu>             
                <label></label>	                      
                <h:inputText id="inputDDDCelular2"  value="#{internacaoForm.objInternacao.numDdd2}"
				 		  maxlength="2" style="width: 30px" styleClass="campoTexto"/>
	            <label style="margin-right: 5px"></label>	                           					
			 	<h:inputText id="inputTelefoneCelular2" 	    	      		    
		       		       value="#{internacaoForm.objInternacao.numTelefone2}"
						   maxlength="9"					    
					 	   style="width: 90px" styleClass="campoTexto"/>					  	   
	        </div>     
	        <div>
	        	<label style="width: 90px">Contato:</label>
			 	<h:inputText id="inputContato2" 		   	      	   
		       		   value="#{internacaoForm.objInternacao.dscTelefone2Contato}"
					   maxlength="15" style="width: 250px" styleClass="campoTexto"/>
	        </div>         
        </div>
	</div>
	<div class="quadroEdicaoU">
		<div class="col390">
           	<label>Referência:</label><h:outputLabel style="color:red;" value=" * " /><br />
  			<h:selectOneMenu id="dropDownReferencia" 
           			         value="#{internacaoForm.objInternacao.referencia.isnReferencia}"
               			     style="width: 360px" styleClass="campoTexto">
					<f:selectItems value="#{internacaoForm.sliReferencia}" />
  			</h:selectOneMenu>   			
        </div>            
        <div class="col390">
            <label>Admitido por:</label><h:outputLabel style="color:red;" value=" * " /><br />
  			<h:selectOneMenu id="dropDownProfissional" 
               				 value="#{internacaoForm.isnProfissional}"
               				 style="width: 370px" styleClass="selectItens">
				<f:selectItems value="#{internacaoForm.sliProfissional}" />
  			</h:selectOneMenu>   			
		</div> 
    </div>    
	<div class="quadroEdicaoU">        
        <div class="col320">
	       	<label>Cirurgia:</label><br />
			<h:inputText value="#{internacaoForm.objInternacao.dscCirurgia}"  
				  style="width: 310px;"
				  maxlength="50" 
				  styleClass="campoTexto"/>                      
        </div>
	</div>
	<div class="quadroEdicaoU">        
		<div class="col390">
        	<label><b>CONDIÇÕES EM QUE O PACIENTE CHEGOU</b></label><br />                 
   			<h:selectOneRadio id="radioCondPaciente" value="#{internacaoForm.objInternacao.flgSemAndar}">
				<f:selectItem id="condPaciente1" itemLabel="Deambulando"     itemValue="1" />
				<f:selectItem id="condPaciente2" itemLabel="Cadeira de Roda" itemValue="2" />
				<f:selectItem id="condPaciente3" itemLabel="Maca"            itemValue="3" />
			</h:selectOneRadio>
		</div>
		<div class="col390">
            <label><b>ACOMPANHADO POR AGENTE JUDICIÁRIO:</b></label><br />
			<h:selectOneRadio id="radioJud" value="#{internacaoForm.objInternacao.flgPreso}">
				<f:selectItem id="judNao" itemLabel="Não" itemValue="N" />
			 	<f:selectItem id="judSim" itemLabel="Sim" itemValue="S" />			 	
   			</h:selectOneRadio>	
		</div>
	</div>
	<h3 class="subTitulo">RESPONSÁVEL PELO PACIENTE</h3>
	<div class="quadroEdicao">
      	<div class="col390" style="margin-right: 10px" >	
        	<label>Responsável:</label><br />
			<h:inputText id="inputResponsavel"
			         styleClass="campoTexto"
				     value="#{internacaoForm.objAcompanhante.nomAcompanhante}" 
					 maxlength="60" 
					 style="width: 375px;"/>
        </div>
        <div class="col380">
     		<div class="col180">		      
				<label>Parentesco</label><br />
				<h:selectOneMenu id="dropDownParentesco" 
		       			   value="#{internacaoForm.objAcompanhante.parentesco.isnParentesco}"
		       			   style="width: 160px" styleClass="selectItens">
					<f:selectItems value="#{internacaoForm.sliParentesco}" />
	    		</h:selectOneMenu>
           	</div>           
           	<div class="col180">
            	<label>Sexo:</label><br />
				<h:selectOneMenu id="dropDownSexoResp" 
			          value="#{internacaoForm.objAcompanhante.sexo.isnSexo}"
			          style="width: 160px" styleClass="selectItens">
			  		<f:selectItems value="#{internacaoForm.sliSexo}" />
				</h:selectOneMenu>
            </div>
		</div>
	</div>
    <div class="quadroEdicaoU">
		<div>
			<h:selectBooleanCheckbox value="#{internacaoForm.mesmoEndereco}">
				<a4j:support event="onclick" action="#{internacaoForm.replicaEndereco}"
				             reRender="#{internacaoForm.idsEndereco}"></a4j:support>
			</h:selectBooleanCheckbox>
			<label>Endereço do Responsável é o mesmo do paciente.</label>
		</div>          
		<div class="col450">
       		<label>Endereço:</label><br />
			<h:inputText id="inputEndResp"
	    	         value="#{internacaoForm.objAcompanhante.dscEndereco}"	    	          
				     maxlength="80" style="width: 400px;" styleClass="campoTexto"/>
        </div>	
        <div class="col320">
         	<label>Complemento:</label><br />
			<h:inputText id="inputCompresp"							  
						 value="#{internacaoForm.objAcompanhante.dscComplemento}" 
					     maxlength="50" style="width: 310px;" styleClass="campoTexto"/>
        </div>
        <div class="col450">
  			<div class="col280">       	
         		<label>Bairro:</label><br />
				<h:inputText id="inputBairroResp"							 
		    		         value="#{internacaoForm.objAcompanhante.dscBairro}" 
						   	 maxlength="30" style="width: 260px;" styleClass="campoTexto"/>
			</div>
			<div class="col130">
			   	<label>CEP:</label><br />
				<h:inputText id="inputCepResp" 			    	 
		             	value="#{internacaoForm.objAcompanhante.numCep}"
		             	maxlength="9" onkeydown="formataCEP(this);" 
		             	style="width: 120px" styleClass="campoTexto"/>
		   	</div>		
        </div>
        <div class="col320">
            <div class="col70">
				<label>UF:</label><br />
			    <h:selectOneMenu id="ddpUFResp" style="width: 60px"  
				                     value="#{internacaoForm.isnUfResp}" 
				                     styleClass="selectItens">
					<a4j:support action="#{internacaoForm.lerMunicipiosAcompanhante}"
						             event="onchange"						              
						             ajaxSingle="true"
						             reRender="ddpMunicipioResp" />
					<f:selectItems value="#{internacaoForm.sliUf}" />
			  	</h:selectOneMenu>
			</div>
        	<div class="col250">
           		<label>Cidade:</label><br />
				<h:selectOneMenu id="ddpMunicipioResp"		                      
			                	 value="#{internacaoForm.objAcompanhante.municipio.isnMunicipio}" 
			                	 style="width: 240px" styleClass="campoTexto" >					
					<f:selectItems value="#{internacaoForm.sliMunicipioAcomp}" />
				</h:selectOneMenu>          
			</div>			
		</div>         
	</div>
	<div class="quadroEdicaoU">
        <div class="col390"> 
        	<label><b>Telefone 1</b></label>
	        <div>
	        	<label style="width: 95px">Tipo, DDD, Nº:</label>	                
	        	<h:selectOneMenu id="ddpTipoTelefone1Acomp" 
			                     value="#{internacaoForm.objAcompanhante.isnTipoTelefone1.isnTipoTelefone}"
			                     styleClass="selectItens">
				 	<f:selectItems value="#{internacaoForm.sliTipoTelefone}" />
			    </h:selectOneMenu>			   
	            <label></label>		  	
	            <h:inputText id="txtAcompDD1"								 
					     	 value="#{internacaoForm.objAcompanhante.numDdd1}"
					    	 style="width: 30px;" 
					    	 styleClass="campoTexto" 
					    	 maxlength="2"/>
	         	<label style="margin-right: 5px"></label>			
				<h:inputText id="inputTelefoneFixoResp1"
		             		 value="#{internacaoForm.objAcompanhante.numTelefone1}"
		             		 style="width: 90px" styleClass="campoTexto"
		             		 maxlength="9"/>		        	   
	        </div>
         	<div>
         		<label style="width: 95px">Contato:</label>
				<h:inputText id="inputContatoRep1"
	    	       			 value="#{internacaoForm.objAcompanhante.dscContato1}"
							 style="width: 250px;" styleClass="campoTexto"
							 maxlength="30"/>	
         	</div>
       	</div>
        <div class="col390">
            <label><b>Telefone 2</b></label>
	       	<div>
	      		<label style="width: 95px">Tipo, DDD, Nº:</label>				    
	    		<h:selectOneMenu id="ddpTipoTelefone2Acomp" 
		                         value="#{internacaoForm.objAcompanhante.isnTipoTelefone2.isnTipoTelefone}"
		                         styleClass="selectItens">
			 	 	<f:selectItems value="#{internacaoForm.sliTipoTelefone}" />
		     	</h:selectOneMenu>
		     	<label></label>
	    		<h:inputText id="inputDDDResp2"				     
	  	     				 value="#{internacaoForm.objAcompanhante.numDdd2}"
						     style="width: 30px;" 
						     styleClass="campoTexto"
						     maxlength="2"/>
				<label style="margin-right: 5px"></label>		      
	    		<h:inputText id="inputTelResp2"						
				      	     value="#{internacaoForm.objAcompanhante.numTelefone2}"  
				      	     style="width: 90px" styleClass="campoTexto"
				      	     maxlength="9"/>
	       	</div>
	       	<div>
	        	<label style="width: 95px">Contato:</label>
				<h:inputText id="inputContatoRep2"					    	     
			        	 value="#{internacaoForm.objAcompanhante.dscContato2}" 
			        	 style="width: 250px;" styleClass="campoTexto"
			        	  maxlength="30"/>
	       	</div>
         </div>        
     </div>     
	 <div class="quadroEdicaoU">         
         <div class="col300">
            <label>CPF:</label><br />
			<h:inputText id="inputCpf"			     
		             value="#{internacaoForm.objAcompanhante.numCpf}"		            
		             maxlength="14"					
					 onkeyup="formataCPF(this)" 
					 style="width: 260px" styleClass="campoTexto">
				 <f:validator validatorId="ValidadorCPF"/>
			</h:inputText>					 
         </div>
         <div class="col300">
            <label>RG:</label><br />
			<h:inputText id="inputRg" value="#{internacaoForm.objAcompanhante.numRg}"
		             maxlength="14" style="width: 260px" styleClass="campoTexto" />                      
         </div>
     </div>     
     <h3 class="subTitulo">LEITO DE INTERNAÇÃO</h3>
     <div class="quadroEdicao"> 
         <a4j:commandLink id="cmdAssociar" reRender="tabelaItens3" ajaxSingle="true" 
                          rendered="#{internacaoForm.novaInternacao and (internacaoForm.flgAmbulatoriosPendentes == null or (internacaoForm.flgAmbulatoriosPendentes != null and internacaoForm.flgAmbulatoriosPendentes == 'N')) }">
			<h:graphicImage id="gimgbusca" url="IMG/pesquisar.gif" style="border: 0;" />
			<rich:componentControl for="panelLeito" attachTo="cmdAssociar" operation="show" event="onclick" />
  		 </a4j:commandLink>
  		 <label>Clinica/Enfermaria/Leito: </label><h:outputLabel style="color:red;" value=" *" />
         <h:panelGroup id="panelTeste" style="font-size: 1.2em; font-weight: bold;">            
            <h:outputText id="lblLeito3" value="#{internacaoForm.objLeito.enfermaria.clinica.dscClinica}"  />
		 	<h:outputText id="lblBarra2" value="-"  /> 
		 	<h:outputText id="lblEnfermaria" value="#{internacaoForm.objLeito.enfermaria.dscEnfermaria}" />
		 	<h:outputText id="lblBarra" value="."  />
		 	<h:outputText id="lblLeito" value="#{internacaoForm.objLeito.dscLeito}"  />		 			 	
		 </h:panelGroup>   	 
     </div>
	 <div class="quadroEdicaoU">   
         <div class="col390">
            <div class="colLeft" style="margin-right: 10px">
            	<label>Regulação:</label><h:outputLabel style="color:red;" value="*" /><br />
 				<h:selectOneMenu id="dropDownRegulacao" 
            	             value="#{internacaoForm.objInternacaoLeito.regulacao.isnRegulacao}"            	                         	                          	                         	              
            	             disabled="#{internacaoForm.desabilitar}"
            	             styleClass="selectItens">
					<f:selectItems value="#{internacaoForm.sliRegulacao}" />
 				</h:selectOneMenu>  				
  			</div>
  			<div class="colLeft">       
  			    <div id="panNumRegulacao">
  					<label>Numero da Regulação:</label><h:outputLabel style="color:red;" value="*" /><br />
					<h:inputText id="inputNumRegulacao" styleClass="campoTexto"				     
		            	 		value="#{internacaoForm.objInternacaoLeito.numRegulacao}"
		             	 		maxlength="50" 
		             	 		style="width: 200px;"/>		        	
		        </div>    
		    </div>               
       	 </div>   
       	 <div class="col390" >
	        <label>Observação da admissão:</label><br />
		    <h:inputTextarea id="inputAreaObsInternacaoLeito" 
	   	       		       	   style="width: 380px; height: 35px"
	   	       		       	   styleClass="campoTexto"
	           			   	   value="#{internacaoForm.objInternacaoLeito.dscObsInternacao}" 
	           			   	   disabled="#{internacaoForm.desabilitar}" />
         </div>     	    
      </div>
      <div style="font-size: 0.65em; margin: 8px 0 8px 0; font-weight: bold">
	     <h:outputText value="Cadastrado por: " />
	     <h:outputText value="#{internacaoForm.nomeUsuario}" />
	  </div>
      <div style="margin-top: 10px; text-align: center">            
   			<a4j:commandButton id="btnGrava" 
				  	    value="Gravar"						  	    		  	    				
		  				action="#{internacaoForm.gravar}"
		  				onclick="this.disabled=true"
		  				oncomplete="this.disabled=false;avisoErros(#{internacaoForm.erroInternacao},#{(internacaoForm.objInternacao.isnInternacao == null)?0:internacaoForm.objInternacao.isnInternacao},'#{internacaoForm.siglaHospital}','#{internacaoForm.enderecoRelatorios}')"
		  				styleClass="botaoModal100"	 
		  				style='margin-right: 10px'>
		  	</a4j:commandButton>
		  			  				
			<h:commandButton id="btnCancelar" value="Cancelar"
		  				style='margin-right: 10px' 
		  				action="#{internacaoForm.cancelar}" 
		  				styleClass="botaoModal100"	
		  				immediate="true" rendered="#{internacaoForm.btnCancelar}">
		  		<f:setPropertyActionListener value="#{internacaoForm.objPaciente}" 
		  		                             target="#{geralForm.objPaciente}"/>			
		    </h:commandButton>
		    		  	
		  	<h:commandButton id="btnCancelarPendentes" value="Cancelar"
		  				style='margin-right: 10px' 
		  				styleClass="botaoModal100"	
		  				action="#{internacaoForm.cancelarPendentes}" 
		  				immediate="true" rendered="#{internacaoForm.btnCancelarPendentes}">
		    </h:commandButton>
		    		  	
		  	<a4j:commandButton id="btnExcluir" 
	  	    		value="Excluir"
	  	    		onclick="if (! confirm('Confirma a exclusão?') ) { return false }"		      			  	    		
	  	            oncomplete="avisoErros(#{internacaoForm.erroInternacao})"	  	    		
	  	    		action="#{internacaoForm.excluir}" 	 
	  	    		styleClass="botaoModal100 botaoExcluir"   		 
	  	    		rendered="#{internacaoForm.objInternacao.ativa}">
	  		</a4j:commandButton>
	  		
	  		<a4j:commandButton id="imprimirEtiqueta" 
	  		                 action="#{internacaoForm.imprimirEtiqueta}"
	  		                 style="visibility: hidden"
	  		                 ajaxSingle="true" />	
	  	    
	  	    <a4j:commandButton id="finalizar" 
	  		                 action="#{internacaoForm.finalizarCadastro}"
	  		                 style="visibility: hidden"
	  		                 ajaxSingle="true" >
	  		     <f:setPropertyActionListener value="#{internacaoForm.objPaciente}" 
		  		                             target="#{geralForm.objPaciente}"/>	           
	  		</a4j:commandButton>		                 		
	</div>
	<br/><br/><br/>
	
	<script>
    	function mostrarDetalheCID(valor) {
    	   var dc = document.getElementById("detalheCID");
    	   dc.innerHTML = valor; 
    	}
    	    	
    	function validarLeito(erro) {
        	if (erro==31) {
            	alert("Leito selecionado não é compativel com o sexo do paciente.");
        	} else {
            	Richfaces.hideModalPanel("panelLeito");
        	}
    	}
    	
    	function avisoErros(erro, internacao, hospital, server) {
		    if (erro == 3) {
			    alert("Usuário sem permissão.");
			    return false;
		    } else if (erro == 2) {			    
		    	alert("Não é possível excluir a internação. Internação possui movimentação/prescrição.");
			    return false;
		    } else if (erro == 10) {
		    	alert("Campo Situação Familiar é obrigatório!");
		    	document.getElementById("cdInternacao:dropDownSituacao").focus();
		    } else if (erro == 11) {
		    	alert("Campo Escolaridade é obrigatório!");       
		    	document.getElementById("cdInternacao:dropDownEscolaridade").focus();
		    } else if (erro == 12) {
		    	alert("Campo Ocupação é obrigatório!");		
		    	document.getElementById("cdInternacao:dropDownOcupacao").focus();   	        
		    } else if (erro == 13) {
		    	alert("Campo Cidade é obrigatório!");
		    	document.getElementById("cdInternacao:dropDownMunicipio").focus();		    			    	        
		    } else if (erro == 14) {
		    	alert("Campo 'Admitido por' é obrigatório!");
		    	document.getElementById("cdInternacao:dropDownProfissional").focus();		    			    	        
		    } else if (erro == 15) {
		    	alert("Campo Referência é obrigatório!");
		    	document.getElementById("cdInternacao:dropDownReferencia").focus();		    			    	        
		    } else if (erro == 16) {
		    	alert("Campo Regulação é obrigatório!");
		    	document.getElementById("cdInternacao:dropDownRegulacao").focus();
		    } else if (erro == 17) {
		    	alert("Campo Diagnostico inicial (CID10) é obrigatório!");
		    } else if (erro == 18) {
		    	alert("Campo Leito da Internação é obrigatório!");
		    } else if (erro == 19) {
		    	alert("Informe o Numero da Regulação!");
		    } else if (erro == 20) {
		    	alert("Campo Sexo do Acompanhante é obrigatório!");
		    	document.getElementById("cdInternacao:dropDownSexoResp").focus();
		    } else if (erro == 21) {
		    	alert("Campo Parentesco do Acompanhante é obrigatório!");
		    	document.getElementById("cdInternacao:dropDownParentesco").focus();
		    } else if (erro == 22) {
		    	alert("Endereço do Acompanhante esta incompleto!");
		    	document.getElementById("cdInternacao:inputEndResp").focus();
		    } else if (erro == 23) {
		    	alert("ATENÇÃO: Leito já foi ocupado, escolha outro!");
		    } else if (erro == 24) {
		    	alert("ATENÇÃO: Paciente já possui uma internação em aberto!");
		    } else if (erro == 25) {
		    	alert("ATENÇÃO: Houve problema de gravação, contate o NTI!");		    	
		    } else if (erro == 26) {
		    	alert("Campo Religião é obrigatório!");
		    	document.getElementById("cdInternacao:inputReligiao").focus();	
		    } else if (erro == 27) {
		    	alert("Campo Endereço é obrigatório!");
		    	document.getElementById("cdInternacao:inputEndereco").focus();
		    } else if (erro == 28) {
		    	alert("Campo bairro obrigatório para a cidade de Fortaleza!");
		    	document.getElementById("cdInternacao:inputBairro").focus();
		    } else if (erro == 29) {
		    	alert("Campo Número do CEP é obrigatório!");	
		    	document.getElementById("cdInternacao:inputCep").focus();		
		    } else {			   
			    if (hospital=="HGWA") {
			    	if (confirm("Internação efetuada com sucesso! \n Deseja imprimir a etiqueta de internação?")) {
			    		var item = document.getElementById("cdInternacao:imprimirEtiqueta");
			    		item.click();			    			    	
			    	}
			    }			    
			    if (confirm("Deseja imprimir a Termo de Internação?")) {
			       window.open(server+"/relatorios/GeraRelMovPaciente?p1="+internacao+"&amp;p2=1","relatorio","width=800,height=600;left=0");
			    }
			    
			    var item = document.getElementById("cdInternacao:finalizar");
			    item.click();
		    }
	    }   	 
	</script>	  							
</h:form>
</ui:define>
</ui:composition>
</html>