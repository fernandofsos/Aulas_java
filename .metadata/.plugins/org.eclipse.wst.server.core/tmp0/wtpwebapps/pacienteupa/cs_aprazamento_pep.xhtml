<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:c="http://java.sun.com/jstl/core"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich" 
      xmlns:t="http://myfaces.apache.org/tomahawk">

	<head>
		<!-- cs_aprazamento_pep.xhtml -->
	</head>

	<body>
		<a4j:keepAlive beanName="aprazamentoPepiForm" />
		<a4j:keepAlive beanName="prescricaoForm" />
		<a4j:keepAlive beanName="emergenciaForm" />
		<a4j:keepAlive beanName="templateForm" />
		
		<style>
		<!--
	    .rf-panel-header {
	    	color: #0054BD;
	    }
	    .panel {
	    	vertical-align: top;
	    }
	    .top {
	     	width: 200px;
	     	height: 100px;
	    }
	    .head2 {
	     	height: 18px;
	     	text-align: center;
	     	vertical-align: middle;
	     	padding: 4px 0;
	    }
	    .pbody {
	     	height: 185px;
	     	/*overflow: auto;*/
	    }
	    .tblResumo td{
	    	width:50%;
	    }
	    .textEmpty{
	    	font-size:110%;
	    	font-weight:bold;
	    	line-height:40px;
	    	color:grey;
	    }
	    .scrolls{
	        width:300px;
	        height:80px;
	        overflow:auto;
	    }
	    .col{
	    	width:90%;
	    }
		.tdTitulo td{
			width:20px;
		}
		//-->
		</style>
		
	    <rich:modalPanel id="panelAutorizar" autosized="true" width="525" height="80" resizeable="false">
	        <f:facet name="header">
	    		<h:panelGroup styleClass="headerModal">
					<h:graphicImage value="/images/icons/access.png" style="border:0; margin-right:10px;" />
					<h:outputText value="Autenticação de Senha" style="font-size:11px; font-weight:bold;"/>
				</h:panelGroup>
	    	</f:facet>	
	        <h:form id="formAutorizar">		 
				<fieldset class="fsPepResp">
				    <div style="float: left; margin-right: 40px">		
						<h:outputLabel value="Usuário/Conselho"/><h:outputLabel value="*" style="color:red;" /><br/>
						<h:inputText value="#{aprazamentoPepiForm.usuario}" maxlength="20" styleClass="campoTexto" style="width: 150px"/>
					</div>
					<div style="float: left;">		
						<h:outputLabel value="Senha/Assinatura" /><h:outputLabel value="*" style="color:red;" /><br/>
						<h:inputSecret value="#{aprazamentoPepiForm.senha}" maxlength="20" styleClass="campoTexto"  style="width: 150px"/>
					</div>
				</fieldset>
				<br/>

				<div style="text-align: center; margin-top: 10px">
					<a4j:commandButton id="btnAprazar" 
					                   value="#{aprazamentoPepiForm.botaoSelecionado}"
					                   action="#{aprazamentoPepiForm.aprazarOuSalvar}" 
									   style="margin-right: 10px" 
							   		   styleClass="botaoModal"
								       oncomplete="retornoPep(#{aprazamentoPepiForm.sucesso},'#{aprazamentoPepiForm.avisoValidacao}')"/>
								       
                    <a4j:commandButton id="btnAprazarInvisivel"
                                       style="display: none;"
                                       action="#{prescricaoForm.carregaPrescricoesPepiRetorno}"/>                                       
                                       
					<a4j:commandButton id="btnCancel"  
					                   value="Cancelar" 
					                   styleClass="botaoModal" 
					                   onclick="Richfaces.hideModalPanel('panelAutorizar');"/>
				</div>
			</h:form>
		</rich:modalPanel>
		
		
		<rich:modalPanel id="panelMpp" autosized="true" width="700" height="450" resizeable="false" align="center">
	        <f:facet name="header">
	    		<h:panelGroup styleClass="headerModal">
					<h:graphicImage value="/images/icons/lupa.png" style="border:0; margin-right:10px;" />
					<h:outputText value="Relação de MPP" style="font-size:11px; font-weight:bold;"/>
				</h:panelGroup>
	    	</f:facet>
	    	<f:facet name="controls">
		   	 	<h:panelGroup>
		       		<h:graphicImage value="IMG/fechar.png" id="fechaPanelMpp"/>
		       		<rich:componentControl for="panelMpp" attachTo="fechaPanelMpp" operation="hide" event="onclick" />
		       	</h:panelGroup>
		   	</f:facet>
	        <div style="height:400px; overflow:scroll; overflow-y:scroll; overflow-x:hidden;">
				<p>
					<strong>AGONISTAS ADRENÉRGICOS INTRAVENOSOS</strong><br/>
					Dobutamina 12,5mg/mL ampola 20mL - sol.injetável <span style="color:red"><span style="color:red; font-size:11px;">**(Dupla Checagem)</span></span><br/>
					Dopamina 5mg/mL ampola 10mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Efedrina 50mg/mL ampola 1mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Epinefrina 1mg/mL ampola 1mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Etilefrina 10mg/mL ampola 1mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Norepinefrina Hemitartarato 2mg/mL ampola 4mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Terbutalina 0,5 mg/ml amp <span style="color:red; font-size:11px;">**(Dupla Checagem)</span>
				</p>
				<p>
					<strong>ANESTÉSICOS GERAIS, INALATÓRIOS E INTRAVENOSOS</strong><br/>
					Isoflurano 1mL/mL frasco 100mL- sol.inalatória<br/>
					Sevoflurano 1mL/mL frasco 250mL- sol.inalatória<br/>
					Bupivacaína 5mg/mL (0,5%) + glicose 8% ampola 4mL (pesada) - sol.injetável<br/>
					Lidocaína 20mg/mL (2%) ampola 5mL - sol.injetável<br/>
					Lidocaína 20mg/mL (2%) com vasoconstrictor frasco-ampola 20mL - sol.injetável<br/>
					Lidocaína 20mg/mL (2%) sem vasoconstrictor frasco-ampola 20mL - sol.injetável<br/>
					Ropivacaína 10mg/mL ampola 20mL - sol.injetável<br/>
					Dextrocetamina 50mg/mL ampola 2mL - sol.injetável<br/>
					Diazepam 5mg/mL ampola 2mL - sol.injetável<br/>
					Etomidato 2mg/mL ampola 10mL - sol.injetável<br/>
					Flumazenil 0,1mg/mL ampola 5mL - sol.injetável<br/>
					Propofol 10mg/mL frasco-ampola 20mL - sol.injetável<br/>
					Fentanila 0,05mg/mL frasco-ampola 10mL - sol.injetável<br/>
					Fentanila 0,05mg/mL ampola 2mL - sol.injetável<br/>
					Remifentanila 2mg frasco-ampola - pó liofilizado<br/>
					Sufentanila 5mcg/mL ampola 2mL - sol.injetável<br/>
					Levobupivacaina c/ epinefrina 1.200.000 -  FA
				</p>
				<p>
					<strong>ANTAGONISTAS ADRENÉRGICOS</strong><br/> 
					Propranolol 40mg - comprimido<br/>
					Atenolol 25mg - comprimido<br/>
					Atenolol 50mg - comprimido<br/>
					Metoprolol (succinato) 25mg - comprimido<br/>
					Carvedilol 3,125mg - comprimido<br/>
					Carvedilol 6,25mg - comprimido<br/>
					Metildopa 250 mg - commprimido
				</p>
				<p>
					<strong>ANTIARRÍTMICOS INTRAVENOSOS</strong><br/>
					Adenosina 3mg/mL ampola 2mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Amiodarona 200mg - comprimido<br/>
					Amiodarona 50mg/mL ampola 3mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Verapamil 80mg - comprimido<br/>
					Atropina 0,25 mg/ ml - solução injetável
				</p>
				<p>
					<strong>ANTICOAGULANTES</strong><br/>
					Enoxaparina Sódica 20mg/0,2mL seringa preenchida - sol. injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Enoxaparina Sódica 40mg/0,4mL seringa preenchida - sol. injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Enoxaparina Sódica 60mg/0,6mL seringa preenchida - sol. injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Enoxaparina Sódica 80mg/0,8mL seringa preenchida - sol. injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Heparina sódica endovenosa 5.000 UI/mL frasco-ampola 5mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Heparina sódica subcutânea 5.000 UI/0,25mL ampola 0,25mL - sol. injetável<br/>
					Varfarina sódica 2,5mg - comprimido<br/>
					Varfarina sódica 5mg - comprimido
				</p>
				<p>
					<strong>TROMBOLÍTICOS</strong><br/>
					Estreptoquinase 1.500.000UI frasco-ampola - pó liofilizado<br/>
					Ateplase 50 mg FA- solução injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span>
				</p>
				<p>
					<strong>BLOQUEADORES NEUROMUSCULARES</strong><br/>
					Cisatracúrio 2mg/mL ampola 5mL - sol.injetável<br/>
					Pancurônio 2mg/mL ampola 2mL - sol.injetável<br/>
					Rocurônio 10mg/mL ampola 5mL - sol.injetável<br/>
					Suxametônio 100mg frasco-ampola - pó liofilizado <span style="color:red; font-size:11px;">**(Dupla Checagem)</span>
				</p>
				<p>
					<strong>CONTRASTES RADIOLÓGICOS INTRAVENOSOS</strong><br/>
					Azul patente ampola 2mL (corante) - uso tópico<br/>
					Contraste iodado iônico 300mg/mL frasco-ampola 100mL - sol.injetável<br/>
					Contraste iodado não iônico 300mg/mL frasco-ampola 100mL - sol.injetável<br/>
					Contraste para ressonância (gadolineo) frasco-ampola 10mL - sol.injetável<br/>
					Sulfato de bário gel 1g/mL (100%) frasco 150mL - suspensão oral
				</p>
				<p>
					<strong>HIPOGLICEMIANTES ORAIS/ INTRAVENOSOS</strong><br/>
					Glibenclamida 5mg - comprimido<br/>
					Glicazida 30mg - comprimido de liberação prolongada<br/>
					Metformina 500mg - comprimido<br/>
					Solução Glicose 50%<br/>
					Solução Glicose 25%
				</p>
				<p>
					<strong>INOTRÓPICOS INTRAVENOSOS</strong><br/>
					Deslanosídeo 0,2mg/mL ampola 2mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Milrinona 1mg/mL ampola 10mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span>
				</p>
				<p>
					<strong>INSULINA SUBCUTÂNEA E INTRAVENOSA</strong><br/>
					Insulina NPH Humana 100UI/mL frasco-ampola 10mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Insulina Regular Humana 100 UI/mL frasco-ampola 10mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span>
				</p>
				<p>
					<strong>MEDICAMENTOS NA FORMA LIPOSSOMAL E CONVENCIONAIS</strong><br/>
					Anfotericina B 50mg frasco-ampola - pó liofilizado <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Anfotericina B lipossomal 50mg <span style="color:red; font-size:11px;">**(Dupla Checagem)</span>
				</p>
				<p>
					<strong>ANALGÉSICOS OPIÓIDES INTRAVENOSOS, TRANSDÉRMICOS, E DE USO ORAL</strong><br/>
					Metadona 10mg - comprimido<br/>
					Morfina 0,2 mg/mL ampola 1mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Morfina 10mg/mL ampola 1mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Morfina 1mg/mL ampola 2mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Morfina 10mg - comprimido<br/>
					Morfina 30mg - comprimido<br/>
					Nalbufina 10mg/mL ampola 1mL - sol.injetável<br/>
					Paracetamol 500mg + Codeína 30mg - comprimido<br/>
					Petidina 50mg/mL ampola 2mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Tramadol 50mg/mL ampola 2mL - sol.injetável<br/>
					Tramadol 50mg - cápsula<br/>
					Tramadol 100mg/mL frasco-gotas 10mL - sol.oral
				</p>
				<p>
					<strong>QUIMIOTERÁPICOS DE USO PARENTERAL E ORAL</strong><br/>
					Ganciclovir 500mg frasco-ampola - pó liofilizado
				</p>
				<p>
					<strong>SEDATIVOS DE USO ORAL DE AÇÃO MODERADA, PARA CRIANÇAS</strong><br/>
					Hidrato de cloral <span style="color:red; font-size:11px;">**(Dupla Checagem)</span>
				</p>
				<p>
					<strong>SEDATIVOS MODERADOS INTRAVENOSOS</strong><br/> 
					Midazolam 5mg/mL ampola 3mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Midazolam 5mg/mL ampola 10mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Midazolam 1mg/mL ampola 5mL - sol.injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Dexmedetomidina 100mcg/mL FA 2mL - sol. injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span>
				</p>
				<p>
					<strong>SOLUÇÕES DE NUTRIÇÃO PARENTERAL</strong><br/>
					Bolsa de nutrição parenteral industrializada 900kcal<br/> 
					Bolsa de nutrição parenteral industrializada 1400kcal<br/>
					Bolsa de nutrição parenteral industrializada 1900kcal  
				</p>
				<p>
					<strong>MEDICAMENTOS ESPECÍFICOS</strong><br/>
					Água estéril para inalação e irrigação em embalagens de 100mL ou volume superior<br/>
					Cloreto de potássio concentrado injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Cloreto de sódio hipertônico injetável (concentração maior que 0,9%) <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Fosfato de potássio injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Glicose hipertônica (concentração maior ou igual a 20%) <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Metotrexato de uso oral (uso não oncológico)<br/>
					Nitroprussiato de sódio injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Prometazina intravenosa<br/>
					Sulfato de magnésio injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Vasopressina injetável <span style="color:red; font-size:11px;">**(Dupla Checagem)</span><br/>
					Pidolato de Magnésio 150 mg/ml - Flaconete<br/>
					Manitol 20% 250 ml<br/>
					Frutose 5% - 500 ml
				</p>
				<p>
					<strong>SOLUÇÕES CARDIOPLÉGICAS</strong><br/>
					Cloreto de Potássio 10% 10 ml<br/>
					Cloreto de Sódio 20%<br/>
					Bicarbonato de Sódio<br/>
					Cloreto de Magnésio
				</p>
				<p>
					<strong>INIBIDORES DE GLICOPROTEINA IIB/ IIIA</strong><br/>
					Cloreto de Tirofibana 0,25 mg/ml - 50 ml FA<br/>
				</p>
				<p>
					<strong>SOLUÇÃO DE DIALISE PERITONEAL</strong><br/>
					Solução de dialise peritoneal 1000 ml<br/>
				</p>
	        </div>
		</rich:modalPanel>	
		
		<div>
			<ui:include src="cd_template_emergencia.xhtml"/>
		</div>
		<a4j:status id="loading" onstart="#{rich:component('panelStatus')}.show()" onstop="#{rich:component('panelStatus')}.hide()" />

		<rich:panel styleClass="panelContent" style="width:99%; margin:0px auto 0px auto; border:0;">
			<fieldset class="fsPep">
				<legend><strong>PRESCRIÇÃO</strong></legend>
				<div>
				    <div>     
	       				<label style="font-size:11px; font-weight:bold;"><b>Tipo Prescrição:</b></label>
	       				<rich:spacer width="5" /><h:outputText value="#{aprazamentoPepiForm.dscTipoPrescricao}" />
	       			</div>
	    		</div>
				<div>
				    <div>     
	       				<label style="font-size:11px; font-weight:bold;"><b>Prescrição:</b></label>
	       				<rich:spacer width="5" /><h:outputText value="#{aprazamentoPepiForm.datPrescricao}" />
	       				<h:graphicImage id="aberto" value="images/icons/chave.gif" rendered="#{aprazamentoPepiForm.datConclusao == null}"/>
						<h:graphicImage id="fechado" value="images/icons/Cadeado.gif" rendered="#{aprazamentoPepiForm.datConclusao != null}" />
						<h:graphicImage id="aprazado" value="images/icons/relogio.png" rendered="#{aprazamentoPepiForm.datApz != null}"/>
	       				<rich:spacer width="20" /><label style="font-size:11px; font-weight:bold;"><b>Abertura:</b></label>
	       				<rich:spacer width="5" /><h:outputText value="#{aprazamentoPepiForm.datCadastro}" ><f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="GMT-3" /></h:outputText>
	       				<rich:spacer width="20" /><label style="font-size:11px; font-weight:bold;"><b>Conclusão:</b></label>
	       				<rich:spacer width="5" /><h:outputText value="#{aprazamentoPepiForm.datConclusao}" ><f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="GMT-3" /></h:outputText>
	       				<rich:spacer width="20" /><label style="font-size:11px; font-weight:bold;"><b>Aprazada:</b></label>
	       				<rich:spacer width="5" /><h:outputText value="#{aprazamentoPepiForm.datApz}" ><f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="GMT-3" /></h:outputText>
	       			</div>
	    		</div>
				<div>
				    <div>     
	       				<label style="font-size:11px; font-weight:bold;"><b>Observação:</b></label>
	       				<rich:spacer width="5" /><h:outputText value="#{aprazamentoPepiForm.dscObs}" />
	       			</div>
	    		</div>
	    		<br/>
	    		<div>
					<a4j:commandLink value="Visualizar Relação de MPP." onclick="Richfaces.showModalPanel('panelMpp')" />
				</div>
			</fieldset>
			<fieldset class="fsPep">
				<legend><strong>ITENS PRESCRITOS</strong></legend>
				<h:form id="formPrescricao">
					<rich:dataTable id="prescricao"
									onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
					           		onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
									value="#{aprazamentoPepiForm.listaPrescricaoPepItem}" 
									var="rst" 
									style="width:100%;" border="1" cellspacing="0" cellpadding="0">
						<f:facet name="header">
							<rich:columnGroup >
								<c:forEach var="cabecalho" items="#{aprazamentoPepiForm.cabecalho}">
									<rich:column><h:outputText value="#{cabecalho}"/></rich:column>
								</c:forEach>
								<rich:column style="text-align:center;">
									<c:forEach var="cabecalho2" items="#{aprazamentoPepiForm.cabecalho2}">
										<h:outputText value="#{cabecalho2}" style="font-size:11px; border-right:1px solid #000; padding:0 2px 0 9px;"/>
									</c:forEach>
								</rich:column>
								<c:forEach var="cabecalho3" items="#{aprazamentoPepiForm.cabecalho3}">
									<rich:column><h:outputText value="#{cabecalho3}"/></rich:column>
								</c:forEach>
								<c:forEach var="cabecalho5" items="#{aprazamentoPepiForm.cabecalho5}">
									<rich:column><h:outputText value="#{cabecalho5}"/></rich:column>
								</c:forEach>
							</rich:columnGroup>
						</f:facet>
						
						<rich:column width="5%" style="text-align:center; #{(rst.flgAlterado == 'S' and rst.flgItemSugerido == 'S' and rst.isnPrescricaoPepIs == null)?'background-color:#CD3333;':''}">
							<h:outputText value="#{rst.tipoPrescricao.dscTipoPrescricao}" />
						</rich:column>
						
						<rich:column width="20%" style="text-align:left; #{(rst.flgAlterado == 'S' and rst.flgItemSugerido == 'S' and rst.isnPrescricaoPepIs == null)?'background-color:#CD3333;':''}">
							<h:panelGroup rendered="#{rst.isnTipoPrescricao != 19 and rst.isnTipoPrescricao != 20 and rst.isnTipoPrescricao != 2}">
								<h:outputText value="#{rst.dscPrescricao}" rendered="#{rst.isnPrescricaoPepIs == null and !rst.edit}" escape="false" style="font-size:11px;"/>
							  	<h:outputText value="#{rst.dscPrescricao}" style="font-size:11px; text-decoration: line-through;" rendered="#{rst.isnPrescricaoPepIs != null}" escape="false"/>
							  	<h:outputText value="#{rst.flgSeNecessario eq 'S'?'/ **Se Necessario** /':'/'}"      rendered="#{rst.tipoPrescricao.isnTipoPrescricao eq 20 or rst.tipoPrescricao.isnTipoPrescricao eq 2}"/>
							  	<h:outputText value=" ** ACM ** /"      rendered="#{rst.flgAcm eq 'S'}"/>
							  	<h:outputText value="#{rst.dscComplemento}"/>
							  	<h:outputText value="#{rst.diasDietaZero}"/>
							</h:panelGroup>
							
							<h:panelGroup rendered="#{rst.isnTipoPrescricao == 19 or rst.isnTipoPrescricao == 20 or rst.isnTipoPrescricao == 2}">
								<h:outputText value="#{rst.dscPrescricao}" rendered="#{rst.isnPrescricaoPepIs == null and !rst.edit}" escape="false" style="#{(rst.flgMppT)?'font-size:11px; text-decoration: underline; font-weight:bold;':'font-size:11px;'}"/>
							  	<h:outputText value="#{rst.dscPrescricao}" style="#{(rst.flgMppT)?'font-size:11px; text-decoration: line-through underline; font-weight:bold;':'font-size:11px; text-decoration: line-through;'}" rendered="#{rst.isnPrescricaoPepIs != null}" escape="false"/>
							  	<h:outputText value="#{rst.flgSeNecessario eq 'S'?' / **Se Necessario** / ':' / '}" rendered="#{rst.tipoPrescricao.isnTipoPrescricao eq 20 or rst.tipoPrescricao.isnTipoPrescricao eq 2}"/>
							  	<h:outputText value=" ** ACM ** /" rendered="#{rst.flgAcm eq 'S'}"/>
							  	<h:outputText value="#{rst.dscComplemento}"/>	
							  	<h:outputText value="#{rst.contadorAntibiotico}"/>
							</h:panelGroup>							
						</rich:column>
						
						<rich:column width="60%" style="text-align:center; #{(rst.flgAlterado == 'S' and rst.flgItemSugerido == 'S' and rst.isnPrescricaoPepIs == null)?'background-color:#CD3333;':''}">
							
							<div>
							Hora Início: 							
							<h:selectOneMenu value="#{rst.horaInicio}" disabled="#{aprazamentoPepiForm.datApz != null or rst.isnPrescricaoPepIs != null or rst.intervalo == 99}">
			           			<f:selectItems value="#{aprazamentoPepiForm.sliCabecalho2}" />
			           			<a4j:support  event="onchange" action="#{aprazamentoPepiForm.marcarApz(rst.isnPrescricaoPepItem)}" reRender="formPrescricao"/>
			         	 	</h:selectOneMenu>
							Intervalo:
							<h:selectOneMenu value="#{rst.intervalo}" disabled="#{(rst.isnPrescricaoPepIs != null) or (( rst.isnPrescricaoPosologia != 16 and rst.isnPrescricaoPosologia != 1 and rst.isnPrescricaoPosologia != 9 and rst.isnPrescricaoPosologia != 10 and rst.isnPrescricaoPosologia != 11 and rst.isnPrescricaoPosologia != 12 and rst.isnPrescricaoPosologia != 13) and (rst.isnTipoPrescricao == 42 or rst.isnTipoPrescricao == 20 or rst.isnTipoPrescricao == 2 or aprazamentoPepiForm.datApz != null))}">
			           			<f:selectItem itemValue="0" itemLabel="Selecione"/>
			           			<f:selectItem itemValue="1" itemLabel="1 em 1 hora"/>
			           			<f:selectItem itemValue="2" itemLabel="2 em 2 horas"/>
			           			<f:selectItem itemValue="3" itemLabel="3 em 3 horas"/>
			           			<f:selectItem itemValue="4" itemLabel="4 em 4 horas"/>
			           			<f:selectItem itemValue="6" itemLabel="6 em 6 horas"/>
			           			<f:selectItem itemValue="8" itemLabel="8 em 8 horas"/>
			           			<f:selectItem itemValue="12" itemLabel="12 em 12 horas"/>
			           			<f:selectItem itemValue="24" itemLabel="24 em 24 horas"/>
			           			<f:selectItem itemValue="99" itemLabel="Aberto"/>

			           			<a4j:support  event="onchange" action="#{aprazamentoPepiForm.marcarApz(rst.isnPrescricaoPepItem)}" reRender="formPrescricao"/>
			         	 	</h:selectOneMenu>
							</div>
							
							<div align="center" style="margin-left:5px;">
								<h:selectManyCheckbox styleClass="tdTitulo" readonly="#{aprazamentoPepiForm.datApz != null}" disabled="#{rst.intervalo != 99}" value="#{rst.listaApz}" id="selAprazamento">
									<t:selectItems var="o" itemValue="#{o}" itemLabel="" value="#{aprazamentoPepiForm.cabecalho2}" id="valor" description="#{aprazamentoPepiForm.cabecalho2}" />
			          			</h:selectManyCheckbox>
		          			</div>
						</rich:column>
						
						<rich:column width="10%" style="text-align:center; #{(rst.flgAlterado == 'S' and rst.flgItemSugerido == 'S' and rst.isnPrescricaoPepIs == null)?'background-color:#CD3333;':''}">
							<h:inputTextarea id="dscObsApz" style="text-transform:uppercase; width:250px; height:30px" maxlength="70"
								  value="#{rst.dscObsApz}" readonly="#{aprazamentoPepiForm.datApz != null}" disabled="#{(aprazamentoPepiForm.datApz != null) or rst.isnPrescricaoPepIs != null}"
								  onblur="this.value.toUpperCase(); verificaTamanho('formPrescricao',document.getElementById(this.id.substring(0, this.id.lastIndexOf(':')) + ':dscObsApz'), 70, this.id.substring(0, this.id.lastIndexOf(':')) + ':lblDscObs');"
								  onkeyup="verificaTamanho('formPrescricao',document.getElementById(this.id.substring(0, this.id.lastIndexOf(':')) + ':dscObsApz'), 70, this.id.substring(0, this.id.lastIndexOf(':')) + ':lblDscObs');"/> 
								  <br/><h:outputText id="lblDscObs" value="(70 caracteres restantes)" style="font-size:11px;"/>
							<div class="restantes" style="font-size:12px">&nbsp;</div>
						</rich:column>
						
						<rich:column width="5%" style="text-align:center; #{(rst.flgAlterado == 'S' and rst.flgItemSugerido == 'S' and rst.isnPrescricaoPepIs == null)?'background-color:#CD3333;':''}">
							<h:selectBooleanCheckbox id="flgDc" value="#{rst.flgDcT}" readonly="#{aprazamentoPepiForm.flgImp != 'N'  and aprazamentoPepiForm.datApz != null}" 
								  disabled="#{(aprazamentoPepiForm.flgImp != 'N' and aprazamentoPepiForm.datApz != null) or rst.isnPrescricaoPepIs != null or (rst.flgDcDisabled)}"/> 
						</rich:column>
						
						<f:facet name="footer">
							<rich:columnGroup>
								<c:forEach var="cabecalho" items="#{aprazamentoPepiForm.cabecalho}">
									<rich:column style="text-align:center"><h:outputText value="#{cabecalho}"/></rich:column>
								</c:forEach>
								<rich:column style="text-align:center;">
									<c:forEach var="cabecalho2" items="#{aprazamentoPepiForm.cabecalho2}">
										<h:outputText value="#{cabecalho2}" style="font-weight:bold; font-size:11px; border-right:1px solid #000; padding:0 2px 0 9px;"/>
									</c:forEach>
								</rich:column>
								<c:forEach var="cabecalho3" items="#{aprazamentoPepiForm.cabecalho3}">
									<rich:column style="text-align:center"><h:outputText value="#{cabecalho3}"/></rich:column>
								</c:forEach>
								<c:forEach var="cabecalho5" items="#{aprazamentoPepiForm.cabecalho5}">
									<rich:column style="text-align:center"><h:outputText value="#{cabecalho5}"/></rich:column>
								</c:forEach>
							</rich:columnGroup>
						</f:facet>
					</rich:dataTable>
					
					<div style="text-align: center; margin-top: 10px">
						<t:commandLink id="btnImprimir"
							action="#{aprazamentoPepiForm.imprimirPreVisualizacao}"
							target="_blank" title="IMPRESSÃO" styleClass="botaoModal"
							rendered="#{false}">
							<h:graphicImage id="imgRelatorioImprimir"
								url="IMG/prescricao/print.gif" style="border:0;" />
							<f:setPropertyActionListener
								target="#{aprazamentoPepiForm.objPrescricaoPep}"
								value="#{presc}" />
						</t:commandLink>
						<rich:spacer width="5" rendered="#{false}" />
						<a4j:commandButton id="btnSalvar" value="Salvar"
							oncomplete="Richfaces.showModalPanel('panelAutorizar');"
							styleClass="botaoModal"
							action="#{aprazamentoPepiForm.resetarCampos}"
							reRender="panelAutorizar"
							rendered="#{!aprazamentoPepiForm.flgImp}"							 
							disabled="#{aprazamentoPepiForm.datApz != null}">
							<f:setPropertyActionListener target="#{aprazamentoPepiForm.botaoSelecionado}" value="Salvar" />
						</a4j:commandButton>
						<rich:spacer width="5" />
						<a4j:commandButton id="btnAbrirModal" value="Concluir"
							onclick="if (!confirm('Deseja realmente concluir este aprazamento?')) return false"
							oncomplete="if( validarMsg('#{aprazamentoPepiForm.mensagem}') ) { Richfaces.showModalPanel('panelAutorizar') }"
							styleClass="botaoModal"
							action="#{aprazamentoPepiForm.validarObrigatoriedade}"
							reRender="panelAutorizar"
							rendered="#{!aprazamentoPepiForm.flgImp}"
							disabled="#{aprazamentoPepiForm.datApz != null}">
							<f:setPropertyActionListener target="#{aprazamentoPepiForm.botaoSelecionado}" value="Aprazar" />
						</a4j:commandButton>
						<rich:spacer width="5" />
						<a4j:commandButton id="btnVoltar" value="Voltar"
							action="#{prescricaoForm.carregaPagina}"
							styleClass="botaoModal">
						</a4j:commandButton>
					</div>
					<script>
					<!--
						function avisosValidacao(erro) {
							if (erro == 1) {
								alert("O Campo Usuário/Consenho é obrigatório.");
								return false;
							} else if (erro == 2) {
								alert("O Campo Senha/Assinatura é obrigatório.");
								return false;
							} else if (erro == 3) {
								alert("Usuário/Conselho e/ou Senha/Assinatura inválidos.");
								return false;
							}
						}
						
						function retornoPep(sucesso, erro) {
							if (sucesso) {
								document.getElementById("formAutorizar:btnAprazarInvisivel").click();
							} else {
								if (erro == 1) {
									alert("O Campo Usuário/Consenho é obrigatório.");
									return false;
								} else if (erro == 2) {
									alert("O Campo Senha/Assinatura é obrigatório.");
									return false;
								} else if (erro == 3) {
									alert("Usuário/Conselho e/ou Senha/Assinatura inválidos.");
									return false;
								} else if (erro == 4) {
									alert("Usuário sem permissão para esta ação.");
							    	return false;
								}
							}
						 }
						
						function validarMsg(msg) {
							if(msg != '') {
								alert(msg);
								return false;
							}
							return true;
						}

						//metodo que seta os titles dos checkboxes das horas de aprazamento
						window.onload = function() {
					         var arrTitles = #{aprazamentoPepiForm.cabecalho2};
					         var oSel;
					         for(var j = 0; j < #{aprazamentoPepiForm.listaPrescricaoPepItem.size()}; j++) {
						         for(var i = 0; i < arrTitles.length; i++) {
							         eval("oSel = document.getElementById('formPrescricao:prescricao:"+j+":selAprazamento:"+i+"');");
							         oSel.title = arrTitles[i];
						         }
					         }
					         
							 var details;
							 var detailsPai;
					         for(var j2 = 0; j2 < #{aprazamentoPepiForm.listaPrescricaoPepItem.size()}; j2++) {
					        	 details = document.getElementById('formPrescricao:prescricao:'+j2+':flgMpp');
					        	 detailsPai = document.getElementById('formPrescricao:prescricao:'+j2+':flgDc');
					        	 if(detailsPai.checked){
						         	  details.checked = true;
						         	  details.disabled = true;
						         }
					         }
					    }
					//-->
					</script>
				</h:form>
			</fieldset>
		</rich:panel>
	</body>
</html>