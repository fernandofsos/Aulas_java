<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
					  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<ui:composition template="template.xhtml">
	<ui:define name="headHtml">
 
	</ui:define>
	
	<ui:define name="conteudo">
	<a4j:keepAlive beanName="atendimentoForm" />
	
	<!-- MODAL PANEL DE SELEÇÃO DA CLINICA/ HOSPITAL -->
	
	<h:form id="atendimentoFormId" >	
			
		<div id="geral">
		   	<label class="cabAreaPesquisa">ATENDIMENTO AMBULATORIAL</label>  	 
			<div class="areaPesquisa">     	 
        		<div>
        		
                	<fieldset>
                		<legend>Profissional</legend>
                		<table>
                			<tr>
                				<td align="right">
                					<label><b>Nome:</b></label>
                				</td>
                				<td>
                					<label><h:outputText value="#{atendimentoForm.nomeProfissional}" /></label> 
                				</td>
                			</tr>
						</table>         	
                	
					</fieldset>
            	</div>
            	
            	<div>
            		<h:panelGroup id="panelMarcacoes" layout="block">
            		
            			<fieldset>
            				<legend>Marcações</legend>
            				
            				<rich:dataTable id="tblMarcacaoId" value="#{atendimentoForm.tabela}" var="rst" style="width: 100%;" rowKeyVar="linha">
            					<f:facet name="header">
									<rich:columnGroup>
										<rich:column style="text-align: center;">
											Paciente
										</rich:column>
										<rich:column style="text-align: center;">
											Situação
										</rich:column>
										<rich:column style="text-align: center;">
										</rich:column>
									</rich:columnGroup>	            						
            					</f:facet>
            					
            					<rich:column style="text-align: left;">
									<h:outputText value="#{rst.dscNome}" />
								</rich:column>
            					<rich:column style="text-align: left;">
									<h:outputText value="#{rst.marcacaoSituacaoBean.dscMarcacaoSituacao}" />
								</rich:column>
            					<rich:column style="text-align: center;">
            						<a4j:commandButton image="/IMG/ambulatorio.png" style="border:white;" title="PACIENTE ENTRAR NO CONSULTÓRIO" actionListener="#{atendimentoForm.entrarNoConsultorio}" reRender="atendimentoFormId" rendered="#{rst.isnMarcacaoSituacao == 3}" onclick="if (!confirm('Confirmar entrada do paciente ?')) return false" oncomplete="validar('#{atendimentoForm.mensagem}');" />
            						<a4j:commandButton image="/IMG/atendido.png" style="border:white;" title="CONCLUIR ATENDIMENTO" actionListener="#{atendimentoForm.concluirAtendimento}" reRender="atendimentoFormId" rendered="#{rst.isnMarcacaoSituacao == 4}" onclick="if (!confirm('Deseja realmente concluir este atendimento ?')) return false" oncomplete="validar('#{atendimentoForm.mensagem}');" />
								</rich:column>
            					
            				</rich:dataTable>
            				
            			</fieldset>		
            		
            		</h:panelGroup>
            	</div>
            	
            	<br />
            	
            	
        	</div>
        	
	      	<br style="clear: both"/>
	        	        
		</div>
		
		<script language="JavaScript">

		function validar(msg)
		{
			if(msg != '')
			{
				alert(msg);
			}
		}
		
		</script>		
				
	</h:form>
	
	</ui:define>
	
</ui:composition>

</html>