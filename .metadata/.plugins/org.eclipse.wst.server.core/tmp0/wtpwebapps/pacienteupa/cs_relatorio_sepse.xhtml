<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
					  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<head>
<!-- cs_relatorio_sepse.xhtml -->
</head>

<ui:composition template="template.xhtml">
	<ui:define name="headHtml">
		<link rel="stylesheet" type="text/css" href="CSS/layoutCsPaciente.css" />
	</ui:define>
	<ui:define name="conteudo">

		<a4j:keepAlive beanName="relatorioSepseForm" />

		<rich:modalPanel id="panelStatus" autosized="true">
			<h:panelGrid columns="2">
				<h:graphicImage url="IMG/ajax-loader.gif" style="border:0px" />
				<h:outputText value="Carregando..." />
			</h:panelGrid>
		</rich:modalPanel>

		<a4j:form id="formPesquisaId">

			<div class="cabAreaPesquisa">Protocolo Sepse</div>
			<div class="areaPesquisa">
				<div>
					<label>Período:</label>
					<rich:calendar value="#{relatorioSepseForm.datIniInicio}"
						datePattern="dd/MM/yyyy" cellWidth="24px" cellHeight="22px"
						style="width:200px" showWeeksBar="false" inputSize="10"
						enableManualInput="true"
						oninputkeypress="return formataData(event, this);" maxlength="10" />
					<h:outputText value=" a " />
					<rich:calendar value="#{relatorioSepseForm.datIniFim}"
						datePattern="dd/MM/yyyy" cellWidth="24px" cellHeight="22px"
						style="width:200px" showWeeksBar="false" inputSize="10"
						enableManualInput="true"
						oninputkeypress="return formataData(event, this);" maxlength="10" />

					<label>Eixo:</label>
					<h:selectOneMenu value="#{relatorioSepseForm.isnEixo}"
						style="margin-left:5px; margin-right:5px; width:150px;">
						<f:selectItem itemValue="0" itemLabel="TODOS" />
						<f:selectItem itemValue="1" itemLabel="ADULTO" />
						<f:selectItem itemValue="2" itemLabel="PEDIÁTRICO" />
					</h:selectOneMenu>
					
					<label>Protocolo Sepse:</label>					
					<h:selectOneMenu value="#{relatorioSepseForm.statusSepse}"
						style="margin-left:5px; margin-right:5px; width:150px;">
						<f:selectItem itemValue="0" itemLabel="TODOS" />
						<f:selectItem itemValue="1" itemLabel="SIM" />
						<f:selectItem itemValue="2" itemLabel="NÃO" />
					</h:selectOneMenu>

					<a4j:commandButton image="IMG/pesquisa.gif" id="btnPesquisar"
						action="#{relatorioSepseForm.pesquisar}"
						oncomplete="avisosPesquisa('#{relatorioSepseForm.mensagem}')"
						reRender="formPesquisaId" />
				</div>
				<br style="clear: both;" />
			</div>
			<h:panelGrid style="width: 48%; float:left;" columns="2">
				<h:panelGrid style="width:100%;" columns="1">

					<h:panelGroup columns="2">
						<fieldset style="width: 95%;">
							<h:outputText
								value="Nº DE PROTOCOLO SEPSES: #{relatorioSepseForm.numeroProtocoloSepseAberto}"
								style="font-size:11px; font-weight: bold; " />
							<h:commandLink style="float:right;border:0px;margin-right:2px;" action="#{relatorioSepseForm.imprimirExcel}" 
										   rendered="#{!empty relatorioSepseForm.listaInternacaoEPacientesSepseAberto}"
										   title="Visualizar Detalhes no Excel" >
						 		<h:graphicImage id="image" url="IMG/icone_xls.png" title="Exportar Excel" alt="Exportar Excel" style="float:right;border:0px;"/>
							</h:commandLink>
						</fieldset>
					</h:panelGroup>
				</h:panelGrid>
			</h:panelGrid>

			<a4j:status id="statusPanel"
				onstart="Richfaces.showModalPanel('panelStatus');"
				onstop="#{rich:component('panelStatus')}.hide()">
			</a4j:status>

			<script type="text/javascript">
				function avisosPesquisa(msg) {
					if (msg != '') {
						alert(msg);
						return false;
					}
					return true;
				}
			</script>
		</a4j:form>
		<br style="clear: both;" />
		<br style="clear: both;" />
		<br style="clear: both;" />
	</ui:define>
</ui:composition>
</html>