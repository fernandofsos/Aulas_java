<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="subRelProtocoloSepse" pageWidth="555" pageHeight="802" whenNoDataType="BlankPage" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="p1" class="java.lang.Integer"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\anderson.ws\\workspace\\pacienteupa_sepse\\src\\relatorio\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="CAMINHO_SUB_REPORT" class="java.lang.String"/>
	<parameter name="STRRISCOSEPSE" class="java.lang.String"/>
	<parameter name="STRPROTOCOLOSEPSESINAISRESP" class="java.lang.String"/>
	<parameter name="p2" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select ps.*, case when ps.volume is null then '' else (' : ' || round(ps.volume, 2)::varchar || ' ml') end as volume_formatado,
um.dsc_usuario as profissional_medico, ue.dsc_usuario as profissional_enfermagem, jrv.dsc_justificativa_reposicao_volemica,
coalesce(jrv_enf.dsc_justificativa_reposicao_volemica, '') as observacao_enfermagem, ia.dsc_atendimento, volume.dsc_volume_prescricao_sepse
from medpoint.t_protocolo_sepse ps
left join medpoint.t_internacao_atendimento ia on ia.isn_internacao = ps.isn_internacao
left join seguranca.t_usuario um on um.isn_usuario = ps.isn_profissional
left join seguranca.t_usuario ue on ue.isn_usuario = ps.isn_profissional_enfermagem
left join medpoint.t_justificativa_reposicao_volemica jrv on jrv.isn_justificativa_reposicao_volemica = ps.isn_justificativa_reposicao_volemica_medica
left join medpoint.t_justificativa_reposicao_volemica jrv_enf on jrv_enf.isn_justificativa_reposicao_volemica = ps.isn_justificativa_reposicao_volemica
left join medpoint.t_volume_prescricao_sepse volume on volume.isn_volume_prescricao_sepse = ps.isn_volume_prescricao_sepse
where ps.isn_protocolo_sepse = $P{p2}::integer]]>
	</queryString>
	<field name="isn_protocolo_sepse" class="java.lang.Integer"/>
	<field name="cod_tela1" class="java.lang.Integer"/>
	<field name="cod_tela2" class="java.lang.Integer"/>
	<field name="dsc_pa" class="java.lang.String"/>
	<field name="peso" class="java.math.BigDecimal"/>
	<field name="isn_produto" class="java.lang.Integer"/>
	<field name="isn_exame" class="java.lang.Integer"/>
	<field name="volume" class="java.math.BigDecimal"/>
	<field name="dat_cadastro" class="java.sql.Timestamp"/>
	<field name="isn_internacao" class="java.lang.Integer"/>
	<field name="hora_atb" class="java.lang.String"/>
	<field name="volume_reposicao" class="java.math.BigDecimal"/>
	<field name="hora_reposicao" class="java.lang.String"/>
	<field name="hora_coleta_exame" class="java.lang.String"/>
	<field name="flg_sepse_grave" class="java.lang.String"/>
	<field name="flg_choque_septico" class="java.lang.String"/>
	<field name="dat_atb" class="java.sql.Timestamp"/>
	<field name="isn_sintoma_sepse_enf" class="java.lang.Integer"/>
	<field name="isn_justificativa_reposicao_volemica" class="java.lang.Integer"/>
	<field name="isn_profissional_enfermagem" class="java.lang.Integer"/>
	<field name="isn_justificativa_reposicao_volemica_medica" class="java.lang.Integer"/>
	<field name="dat_inicio_atendimento" class="java.sql.Timestamp"/>
	<field name="isn_profissional" class="java.lang.Integer"/>
	<field name="isn_usuario" class="java.lang.Integer"/>
	<field name="suspeita_infeccao" class="java.lang.Boolean"/>
	<field name="indicacao_reposicao_volemica" class="java.lang.Boolean"/>
	<field name="dsc_prescricoes" class="java.lang.String"/>
	<field name="dsc_hda" class="java.lang.String"/>
	<field name="outros_sinais_alerta" class="java.lang.String"/>
	<field name="dsc_pa_final" class="java.lang.String"/>
	<field name="isn_volume_prescricao_sepse" class="java.lang.Integer"/>
	<field name="cod_volume_reposicao" class="java.lang.Integer"/>
	<field name="volume_formatado" class="java.lang.String"/>
	<field name="profissional_medico" class="java.lang.String"/>
	<field name="profissional_enfermagem" class="java.lang.String"/>
	<field name="dsc_justificativa_reposicao_volemica" class="java.lang.String"/>
	<field name="observacao_enfermagem" class="java.lang.String"/>
	<field name="dsc_atendimento" class="java.lang.String"/>
	<field name="dsc_volume_prescricao_sepse" class="java.lang.String"/>
	<field name="dat_cadastro_enfermagem" class="java.sql.Timestamp"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="16" splitType="Prevent">
			<staticText>
				<reportElement positionType="Float" x="2" y="1" width="114" height="14" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Suspeita de Infecção:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToBandHeight" x="116" y="1" width="438" height="14" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
				<box>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement markup="html"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{STRRISCOSEPSE}]]></textFieldExpression>
			</textField>
		</band>
		<band height="46">
			<textField isBlankWhenNull="true">
				<reportElement x="72" y="16" width="484" height="15"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{profissional_medico}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="2" y="16" width="70" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Profissional:]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="1" width="553" height="15" isRemoveLineWhenBlank="true"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left">
					<font isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Atendimento Médico]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="30" width="165" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Data Abertura Protocolo Sepse:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH:mm:ss">
				<reportElement x="167" y="31" width="143" height="14"/>
				<box>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{dat_cadastro}]]></textFieldExpression>
			</textField>
		</band>
		<band height="30" splitType="Prevent">
			<staticText>
				<reportElement positionType="Float" x="2" y="0" width="28" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[HDA:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="2" y="15" width="552" height="14" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
				<box>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{dsc_hda}]]></textFieldExpression>
			</textField>
		</band>
		<band height="30">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="2" y="15" width="519" height="14" isRemoveLineWhenBlank="true"/>
				<box>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{cod_tela1}.equals(new Integer(1))? "Infecção Respiratória" :
$F{cod_tela1}.equals(new Integer(2))? "Infecção Urinária" :
$F{cod_tela1}.equals(new Integer(3))? "Infecção Abdominal Aguda" :
$F{cod_tela1}.equals(new Integer(4))? "Infecção de Pele e Partes Moles" :
$F{cod_tela1}.equals(new Integer(5))? "S/ foco Definido" :
$F{cod_tela1}.equals(new Integer(6))? "Não tem história sugestiva de infecção" :
$F{cod_tela1}.equals(new Integer(7))? "Infecção do Sistema Nervoso Central(SNC)" :
$F{cod_tela1}.equals(new Integer(8))? "OUTROS - " + $F{outros_sinais_alerta} : ""]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="2" y="0" width="33" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Foco:]]></text>
			</staticText>
		</band>
		<band height="28">
			<staticText>
				<reportElement positionType="Float" x="2" y="0" width="338" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Sinais de disfunção orgânica ou choque séptico:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="2" y="14" width="553" height="13" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
				<box>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement markup="html"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{STRPROTOCOLOSEPSESINAISRESP}]]></textFieldExpression>
			</textField>
		</band>
		<band height="16">
			<staticText>
				<reportElement x="2" y="0" width="67" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Prescrições:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="69" y="0" width="485" height="15" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
				<box>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement markup="html"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{dsc_prescricoes}]]></textFieldExpression>
			</textField>
		</band>
		<band height="16">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="52" y="0" width="500" height="15"/>
				<box>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{dsc_volume_prescricao_sepse}.concat($F{volume_formatado})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement stretchType="RelativeToTallestObject" x="2" y="0" width="50" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Volume:]]></text>
			</staticText>
		</band>
		<band height="16" splitType="Prevent">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="124" y="0" width="430" height="15" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{dsc_justificativa_reposicao_volemica}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement stretchType="RelativeToTallestObject" x="2" y="0" width="122" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Justificativa (Volume):]]></text>
			</staticText>
		</band>
		<band height="35">
			<subreport>
				<reportElement stretchType="RelativeToTallestObject" x="2" y="16" width="550" height="16" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
				<subreportParameter name="CAMINHO_SUB_REPORT">
					<subreportParameterExpression><![CDATA[$P{CAMINHO_SUB_REPORT}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="p2">
					<subreportParameterExpression><![CDATA[$F{isn_protocolo_sepse}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{CAMINHO_SUB_REPORT} + "subRelAberturaSepseExame.jasper"]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement stretchType="RelativeToTallestObject" x="2" y="0" width="67" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Exames:]]></text>
			</staticText>
		</band>
		<band height="80">
			<textField pattern="" isBlankWhenNull="true">
				<reportElement positionType="Float" x="340" y="48" width="42" height="14"/>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{hora_reposicao}.equals("") ? "- - -" : $F{hora_reposicao}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement positionType="Float" x="2" y="16" width="67" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Profissional:]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" x="2" y="64" width="68" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Justificativa:]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" x="2" y="0" width="552" height="15" isRemoveLineWhenBlank="true"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left">
					<font isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Atendimento Enfermagem]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" x="35" y="48" width="63" height="14"/>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{hora_atb}.equals(null)?"":"Hora: "+$F{hora_atb})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement positionType="Float" x="256" y="48" width="84" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Hora Volume:]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" x="99" y="48" width="97" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Volume repos(ml):]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" x="70" y="16" width="296" height="15"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{profissional_enfermagem}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement positionType="Float" x="2" y="48" width="33" height="15"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ATB:]]></text>
			</staticText>
			<textField pattern="###0.00" isBlankWhenNull="true">
				<reportElement positionType="Float" x="196" y="48" width="60" height="14"/>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{volume_reposicao}.equals("") ? "- - -" : $F{volume_reposicao}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" x="70" y="64" width="484" height="15"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{isn_sintoma_sepse_enf}.equals(new Integer(1))? "Hipervolemia" :
$F{isn_sintoma_sepse_enf}.equals(new Integer(2))? "Cogestão Pulmomar" :
$F{isn_sintoma_sepse_enf}.equals(new Integer(3))? "Outros" : ""]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement positionType="Float" x="492" y="48" width="60" height="14"/>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{hora_coleta_exame}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement positionType="Float" x="384" y="48" width="108" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Coleta de Exames:]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" x="2" y="32" width="115" height="15"/>
				<textElement verticalAlignment="Top">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Volume Enfermagem:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="117" y="32" width="435" height="15"/>
				<textElement>
					<font fontName="SansSerif"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{cod_volume_reposicao}.equals(new Integer(1))? "Volume não prescrito" :
$F{cod_volume_reposicao}.equals(new Integer(2))? "Volume administrado menor/maior que prescrição médica" :
$F{cod_volume_reposicao}.equals(new Integer(3))? "Reposição volêmica conforme prescrição médica" : ""]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH:mm" isBlankWhenNull="true">
				<reportElement x="446" y="16" width="106" height="15" isPrintInFirstWholeBand="true"/>
				<textElement>
					<font fontName="SansSerif"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{dat_cadastro_enfermagem}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement positionType="Float" x="366" y="16" width="80" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Data cadastro:]]></text>
			</staticText>
		</band>
		<band height="16">
			<printWhenExpression><![CDATA[!$F{observacao_enfermagem}.trim().equals("")]]></printWhenExpression>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToBandHeight" x="70" y="0" width="484" height="15" isPrintWhenDetailOverflows="true"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{observacao_enfermagem}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement positionType="Float" x="2" y="0" width="68" height="15" isRemoveLineWhenBlank="true"/>
				<box leftPadding="0">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<text><![CDATA[Observação:]]></text>
			</staticText>
		</band>
		<band height="17">
			<subreport>
				<reportElement x="2" y="1" width="552" height="15"/>
				<subreportParameter name="protocolo_sepse">
					<subreportParameterExpression><![CDATA[$F{isn_protocolo_sepse}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{CAMINHO_SUB_REPORT} + "subRelEvolucaoSepse.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
</jasperReport>
