<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
					  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:t="http://myfaces.apache.org/tomahawk">

<ui:composition template="template.xhtml">
	<ui:define name="headHtml">
		<!-- cs_relatorioExames.xhtml -->
	</ui:define>
	<ui:define name="conteudo">
		<a4j:keepAlive beanName="relatorioExamesForm" />

		<rich:modalPanel id="panelStatus" autosized="true">  
	 		<h:panelGrid columns="2" width="180"> 
	 			<h:graphicImage url="IMG/ajax-loader.gif" style="border:0px"/> 
	 			<h:outputText value="Atualizando, aguarde..." />
	 		</h:panelGrid> 
		</rich:modalPanel>
		
		<!-- MODAL PANEL DE PROFISSIONAL -->
		<rich:modalPanel id="panProfissional" autosized="false" width="900" height="500" resizeable="false" headerClass="headerPanel3">
	    	<f:facet name="header">
				<h:panelGroup>
	       			<h:outputText value="Pesquisa de Profissional"></h:outputText>
	       		</h:panelGroup>
	    	</f:facet>
	    	<f:facet name="controls">
	    	 	<h:panelGroup>
	        		<h:graphicImage value="IMG/fechar.png" id="fechaPanel"/>
	        		<rich:componentControl for="panProfissional" attachTo="fechaPanel" operation="hide" event="onclick" />
	        	</h:panelGroup>
	    	</f:facet>
	    	<h:form id="formProfissional">
	    		<fieldset style="background-color: #F5F5F5">
		    		<div>
					    <div class="colLeft">     
		       				<label class="font12"><b>Nome: *</b></label>
		       			</div>
		       			<div class="colLeft">
		       				<h:inputText value="#{relatorioExamesForm.nomeProfissional}" maxlength="50" styleClass="campoTexto" onblur="this.value.toUpperCase();" style="width:450px;" id="nmProfissional" onkeypress="return enter(event);"/>
		       			</div>	       			       
		    		</div>
		    		<div>
					    <div class="colLeft" style="width: 100%; margin-top:10px;">
		       				<a4j:commandButton styleClass="botaoModal" oncomplete="validaPesquisa('#{relatorioExamesForm.msgPesquisa}');" id="pesquisar" value="Pesquisar" actionListener="#{relatorioExamesForm.pesquisarProfissional}" reRender="formProfissional"/>
		       			</div>
		    		</div>
	    		</fieldset>
	    		<div>
					<rich:dataTable id="tabelaProfissional"
							onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
							onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
							value="#{relatorioExamesForm.listaProfissionais}" 
							var="listaProfissional" 
							rows="10"
							rowKeyVar="linha" 
							style="width: 100%; cursor: pointer;">
						<f:facet name="header">
							<rich:columnGroup>
								<h:column>
									<h:outputText width="5%"/>
								</h:column>
								<h:column>
									<h:outputText value="Nome" />
								</h:column>
								<h:column>
									<h:outputText value="CRM" />
								</h:column>
							</rich:columnGroup>
						</f:facet>
						<rich:column align="center" width="5%" sortable="true">
							<a4j:commandLink action="#{relatorioExamesForm.retornarProfissionalPesquisa}" reRender="pnProfissional" oncomplete="#{rich:component('panProfissional')}.hide()">
								<h:graphicImage id="imgSelecionar" url="IMG/selecionar.png" style="border:0;" />
								<f:setPropertyActionListener value="#{listaProfissional}" target="#{relatorioExamesForm.objProfissional}"/>						
							</a4j:commandLink>
						</rich:column>
						<rich:column sortable="true">
							<h:outputText value="#{listaProfissional.dscUsuario}" />
						</rich:column>
						<rich:column sortable="true">
							<h:outputText value="#{listaProfissional.dscLogin}" />
						</rich:column>
						<f:facet name="footer">
							<rich:datascroller id="ds" ajaxSingle="false" />
						</f:facet>
					</rich:dataTable>
				</div>
	    	</h:form>
	 	</rich:modalPanel>
		<!-- FINAL DO MODAL PANEL DE PROFISSIONAL -->

	 	<h:form id="formExame">
	 		<div class="cabAreaPesquisa">GERAL EXAMES</div>			
	    	<h:panelGroup styleClass="areaPesquisa" layout="block" id="filtros">
		       	<div>
		       		<h:selectOneRadio value="#{relatorioExamesForm.tipoPesquisa}">
                        <f:selectItem itemLabel="PESQUISA" itemValue="1" />
                        <f:selectItem itemLabel="RELATÓRIO BPA INDIVIDUALIZADO" itemValue="2" />
						<f:selectItem itemLabel="RELATÓRIO BPA CONSOLIDADO" itemValue="3" />
                        <a4j:support event="onclick" reRender="filtros" action="#{relatorioExamesForm.limpar}"/>
                    </h:selectOneRadio>
		       	</div>
		       	<br style="clear: both;"/>
		       	<h:panelGroup id="pnProfissional" rendered="#{relatorioExamesForm.tipoPesquisa eq 1}" style="font-size:1em">
			       	<div>
			       		<h:outputLabel value="Prontuário"/><br/>
			       		<h:inputText id="inputProntuario" 
								     value="#{relatorioExamesForm.numProntuario}"
								     style="width:100px;"
								     maxlength="20"
								     styleClass="campoTexto"/>
			       	</div>
			       	<br style="clear: both;"/>
			       	<div>
			       		<table cellpadding="0" cellspacing="0" border="0">
		       			<tr>
		       				<td>
		       					<h:outputLabel value="Médico" for="iptMedico"/><br/>
		       					<h:inputText value="#{relatorioExamesForm.objProfissional.dscUsuario}" disabled="true" id="iptMedico" onblur="upper(this);" style="width:305px; height:16px; text-transform:uppercase;"/>
		       				</td>
		       				<td valign="bottom" style="padding-left:5px;">
		       					<a4j:commandButton image="IMG/pesquisa.gif" 
		 										   immediate="true"
		 			                                      id="btnProfissional"
						           		          action="#{relatorioExamesForm.abrirProfissional}"
						           		      oncomplete="Richfaces.showModalPanel('panProfissional');"
							    		        reRender="panProfissional" />
							</td>
							<td valign="bottom" style="padding-left:5px;">
								<a4j:commandButton image="IMG/excluir.png" title="Retirar Profissional"
		 										   immediate="true"
		 			                                      id="btnExcluirProfissional"
						           		          action="#{relatorioExamesForm.excluirProfissional}"
							    		        reRender="formExame" />
		       				</td>
		       			</tr>        			
		       			</table>
			       	</div>
			       	<br style="clear: both;"/>
			       	<div>
			       		<h:outputLabel value="Exame" for="selExames"/><br/>
			       		<h:selectOneMenu value="#{relatorioExamesForm.isnExame}" id="selExames">
							<f:selectItems value="#{relatorioExamesForm.sliExames}" />
						</h:selectOneMenu>
			       	</div>
			       	<div>
			       		<h:outputLabel value="Agrupamento" for="selExameAgrupamento"/><br/>
			       		<h:selectOneMenu value="#{relatorioExamesForm.isnExameAgrupamento}" id="selExameAgrupamento">
							<f:selectItems value="#{relatorioExamesForm.sliExameAgrupamentos}" />
						</h:selectOneMenu>
			       	</div>
			       	<div>
			       		<h:outputLabel value="Situação" for="selExameSituacao"/><br/>
			       		<h:selectOneMenu value="#{relatorioExamesForm.isnExameSituacao}" id="selExameSituacao">
							<f:selectItems value="#{relatorioExamesForm.sliSituacoes}" />
						</h:selectOneMenu>
			       	</div>
			       	<div>
			       		<h:outputLabel value="Grupo" for="selExameGrupo"/><br/>
			       		<h:selectOneMenu value="#{relatorioExamesForm.isnExameGrupo}" id="selExameGrupo">
							<f:selectItems value="#{relatorioExamesForm.sliExameGrupo}" />
						</h:selectOneMenu>
			       	</div>
			       	<div>
			       		<h:outputLabel value="Urgente" for="flgUrgente"/><br/>
			       		<h:selectBooleanCheckbox id="flgUrgente" value="#{relatorioExamesForm.flgUrgente}"/>			       		
			       	</div>
			       	<br style="clear: both;"/>
			    </h:panelGroup>
			    <br style="clear: both;"/>
		       	
		       	<h:panelGroup>
			       	<div>
			       		<h:outputLabel value="Tipo Clínica" for="selTipoClinicas"/><br/>
						<h:selectOneMenu value="#{relatorioExamesForm.filtroClinicaTipo}" id="selTipoClinicas">
						   <f:selectItem itemValue="0" itemLabel="Selecione" />
						   <f:selectItem itemValue="1" itemLabel="Internação" />
						   <f:selectItem itemValue="3" itemLabel="Emergência" />
						   <f:selectItem itemValue="2" itemLabel="Ambulatório" />	 	   		
						   <a4j:support event="onchange" reRender="formExame" action="#{relatorioExamesForm.carregaListaClinicas}" />					
						</h:selectOneMenu>
			       	</div>
			       	
			       	<div>
			       		<h:outputLabel value="Clínica" for="selClinicas1"/><br/>
						<h:selectOneMenu value="#{relatorioExamesForm.objClinica}" converter="simpleIndexConverter" id="selClinicas1">
							<f:selectItem itemValue="" itemLabel="Selecione" />
							<t:selectItems var="o" itemValue="#{o}" itemLabel="#{o.dscClinica}" value="#{relatorioExamesForm.listaClinicas}" />
						</h:selectOneMenu>
			       	</div>
		       	</h:panelGroup>
		       	
		       	<h:panelGroup rendered="#{false}">
			       	<div>
			       		<h:outputLabel value="Clínica" for="selClinicas2"/><br/>
						<h:selectOneMenu value="#{relatorioExamesForm.objClinica}" converter="simpleIndexConverter" id="selClinicas2">
							<f:selectItem itemValue="" itemLabel="Selecione" />
							<t:selectItems var="o" itemValue="#{o}" itemLabel="#{o.dscClinica}" value="#{relatorioExamesForm.listaClinicas}" />
						</h:selectOneMenu>
			       	</div>
		       	</h:panelGroup>
		       	
			    <h:panelGroup rendered="#{relatorioExamesForm.tipoPesquisa eq 2}">
		       		<div>
			       		<h:outputLabel value="Agrupamento Exames" for="selExameAgrupamentoIndividualizado"/><br/>
			       		<h:selectOneMenu value="#{relatorioExamesForm.isnExameAgrupamento}" id="selExameAgrupamentoIndividualizado">
							<f:selectItems value="#{relatorioExamesForm.sliExameAgrupamentos}" />
							<a4j:support event="onchange" reRender="pgExamesIndividualizados" action="#{relatorioExamesForm.carregaSliExamesIndividualizados}" />
						</h:selectOneMenu>
			       	</div>
			    </h:panelGroup>
		       	<h:panelGroup rendered="#{relatorioExamesForm.tipoPesquisa eq 2}" id="pgExamesIndividualizados">
		       		<div>
			       		<h:outputLabel value="Exame" for="selExamesIndividualizados" style="font-size:1em"/><br/>
			       		<h:selectOneMenu value="#{relatorioExamesForm.isnExame}" id="selExamesIndividualizados">
							<f:selectItems value="#{relatorioExamesForm.sliExamesIndividualizados}" />
						</h:selectOneMenu>
			       	</div>
			    </h:panelGroup>
		       	<h:panelGroup rendered="#{relatorioExamesForm.tipoPesquisa eq 3}">
			       	<div>
			       		<h:outputLabel value="Agrupar por" for="selAgrupamento"/><br/>
			       		<h:selectOneMenu value="#{relatorioExamesForm.agrupamento}" id="selAgrupamento">
	                        <f:selectItem itemLabel="EXAMES" itemValue="1" />
	                        <f:selectItem itemLabel="CONSULTAS" itemValue="2" itemDisabled="#{(relatorioExamesForm.filtroClinicaTipo eq 2 or relatorioExamesForm.filtroClinicaTipo eq 3)?'false':'true'}" />
	                        <a4j:support event="onchange" reRender="formExame" />
	                    </h:selectOneMenu>
	                </div>
	                <div style="#{(relatorioExamesForm.filtroClinicaTipo eq 3 and relatorioExamesForm.agrupamento eq 2)?'display:none':''}">
			       		<h:outputLabel value="Especialidade" for="selEspecialidade"/><br/>
						<h:selectOneMenu value="#{relatorioExamesForm.objEspecialidade}" converter="simpleIndexConverter" id="selEspecialidade">
							<f:selectItem itemValue="" itemLabel="Selecione" />
							<t:selectItems var="o" itemValue="#{o}" itemLabel="#{o.dscEspecialidade}" value="#{relatorioExamesForm.listaEspecialidades}" />
						</h:selectOneMenu>
			       	</div>
			       	<div style="#{(relatorioExamesForm.filtroClinicaTipo eq 3 and relatorioExamesForm.agrupamento eq 2)?'':'display:none'}">
			       		<h:outputLabel value="Consultas" for="selConsultas"/><br/>
			       		<h:selectOneRadio value="#{relatorioExamesForm.tipoConsulta}" id="selConsultas">
	                        <f:selectItem itemLabel="MÉDICOS" itemValue="1" />
	                        <f:selectItem itemLabel="ENFERMEIROS" itemValue="2" />
	                    </h:selectOneRadio>
			       	</div>
			       	<div style="#{(relatorioExamesForm.filtroClinicaTipo eq 3 and relatorioExamesForm.agrupamento eq 2)?'':'display:none'}">
			       		<h:outputLabel value="Especialidade Emergência" for="selEspecialidadeEmergencia"/><br/>
						<h:selectOneMenu value="#{relatorioExamesForm.objEspecialidadeEmergencia}" converter="simpleIndexConverter" id="selEspecialidadeEmergencia">
							<f:selectItem itemValue="" itemLabel="Selecione" />
							<t:selectItems var="o" itemValue="#{o}" itemLabel="#{o.dscEspecialidadeEmergencia}" value="#{relatorioExamesForm.listaEspecialidadesEmergencia}" />
						</h:selectOneMenu>
			       	</div>
                </h:panelGroup>
       			<br style="clear:both;"/>
		       	<div>
	    			<h:outputLabel value="Data Realização"/><h:outputText value="*" styleClass="asterisco"/><br/>
		       		<rich:calendar id="datRealInicial" 
		       	               value="#{relatorioExamesForm.dataRealInicial}" 
		       		           datePattern="dd/MM/yyyy" />
					<h:outputLabel value=" a " />	        		               
		       		<rich:calendar id="datRealFinal" 
		       	               value="#{relatorioExamesForm.dataRealFinal}" 
		       	               datePattern="dd/MM/yyyy" />    	       	    
		       	</div>
	    		<div style="#{(relatorioExamesForm.filtroClinicaTipo eq 3 and relatorioExamesForm.agrupamento eq 2)?'display:none':''}">
	    			<h:outputLabel value="Data Programação"/><h:outputText value="*" styleClass="asterisco"/><br/>
		       		<rich:calendar id="datProgInicial" 
		       	               value="#{relatorioExamesForm.dataProgInicial}" 
		       		           datePattern="dd/MM/yyyy" />
					<h:outputLabel value=" a " />        		               
		       		<rich:calendar id="datProgFinal" 
		       	               value="#{relatorioExamesForm.dataProgFinal}" 
		       	               datePattern="dd/MM/yyyy" />    	       	    
		       	</div>
		       	<div style="#{(relatorioExamesForm.filtroClinicaTipo eq 3 and relatorioExamesForm.agrupamento eq 2)?'display:none':''}">
	    			<h:outputLabel value="Data Solicitação"/><h:outputText value="*" styleClass="asterisco"/><br/>
		       		<rich:calendar id="datSolicInicial" 
		       	               value="#{relatorioExamesForm.dataSolicInicial}" 
		       		           datePattern="dd/MM/yyyy" />
					<h:outputLabel value=" a " />	        		               
		       		<rich:calendar id="datSolicFinal" 
		       	               value="#{relatorioExamesForm.dataSolicFinal}" 
		       	               datePattern="dd/MM/yyyy" />    	       	    
		       	</div>
		       	<div class="col150" style="float:right; #{(relatorioExamesForm.tipoPesquisa eq 1)?'':'display:none;'}">
				    <label>Resultado:</label>
				    <h:outputText class="totalizador2" value="#{relatorioExamesForm.totalRegistros}" id="totalRegs"/> 
				</div>
		       	<br style="clear: both;"/>
		       	
		       	<div>
	    			<h:outputLabel value="Ordenar Por:"/><br/>
		       		<h:selectOneMenu value="#{relatorioExamesForm.orderBy}" id="selOrdenacao">
					   <f:selectItem itemValue="1" itemLabel="Prontuário" />
					   <f:selectItem itemValue="2" itemLabel="Paciente" />
					   <f:selectItem itemValue="3" itemLabel="Exame" />
					   <f:selectItem itemValue="4" itemLabel="Solicitação" />
					   <f:selectItem itemValue="5" itemLabel="Agendamento" />
					   <f:selectItem itemValue="6" itemLabel="Programação" />
					   <f:selectItem itemValue="7" itemLabel="Realização" />	 	   			
					   <f:selectItem itemValue="8" itemLabel="Baixa/Laudo" />
					</h:selectOneMenu>   	    
		       	</div>
		       	
		       	<br style="clear:both;"/>
		       	
		       	<div style="height: 30px;">     
       				<label>Pelo menos um dos campos com <font color="red">*</font> é obrigatório!</label>
    			</div>
    			<br style="clear: both;"/>
		       	<div>
		       		<a4j:commandButton value="PESQUISAR"
				       	              action="#{relatorioExamesForm.pesquisar}" 
				       	              oncomplete="avisosPesquisa(#{relatorioExamesForm.erroPesquisa})"
				       	              styleClass="botaoModal" style="margin-right:10px;" reRender="dtExames,totalRegs,formExame" rendered="#{relatorioExamesForm.tipoPesquisa eq 1}">
					</a4j:commandButton>
					
		       	   	<a4j:commandButton value="BPA INDIVIDUALIZADO"
				       	              action="#{relatorioExamesForm.pesquisarBPA}"
				       	              oncomplete="avisosPesquisaBPA(#{relatorioExamesForm.erroPesquisa}, 'linkBPAI');"
				       	              styleClass="botaoModal" style="margin-right:10px;" rendered="#{relatorioExamesForm.tipoPesquisa eq 2}">
					</a4j:commandButton>
					<t:commandLink id="linkBPAI" value="BPA INDIVIDUALIZADO" action="#{relatorioExamesForm.imprimirBPAI}" target="blank" style="display:none" />
					
					<a4j:commandButton value="BPA CONSOLIDADO"
				       	              action="#{relatorioExamesForm.pesquisarBPAC}"
				       	              oncomplete="avisosPesquisaBPA(#{relatorioExamesForm.erroPesquisa}, 'linkBPAC');"
				       	              styleClass="botaoModal" rendered="#{relatorioExamesForm.tipoPesquisa eq 3 and relatorioExamesForm.agrupamento eq 1}">
					</a4j:commandButton>
					<t:commandLink id="linkBPAC" value="BPA CONSOLIDADO" action="#{relatorioExamesForm.imprimirBPAC}" target="blank" style="display:none" />
					
					<a4j:commandButton value="BPA CONSOLIDADO"
				       	              action="#{relatorioExamesForm.pesquisarBPACAP}"
				       	              oncomplete="avisosPesquisaBPA(#{relatorioExamesForm.erroPesquisa}, 'linkBPACAP');"
				       	              styleClass="botaoModal" rendered="#{relatorioExamesForm.tipoPesquisa eq 3 and relatorioExamesForm.filtroClinicaTipo eq 2 and relatorioExamesForm.agrupamento eq 2}">
					</a4j:commandButton>
					<t:commandLink id="linkBPACAP" value="BPA CONSOLIDADO" action="#{relatorioExamesForm.imprimirBPACAP}" target="blank" style="display:none" />
					
					<a4j:commandButton value="BPA CONSOLIDADO"
				       	              action="#{relatorioExamesForm.pesquisarBPACE}"
				       	              oncomplete="avisosPesquisaBPA(#{relatorioExamesForm.erroPesquisa}, 'linkBPACAPE');"
				       	              styleClass="botaoModal" rendered="#{relatorioExamesForm.tipoPesquisa eq 3 and relatorioExamesForm.filtroClinicaTipo eq 3 and relatorioExamesForm.agrupamento eq 2}">
					</a4j:commandButton>
					<t:commandLink id="linkBPACAPE" value="BPA CONSOLIDADO" action="#{relatorioExamesForm.imprimirBPACAPE}" target="blank" style="display:none" />
					
					
					<h:commandLink styleClass="botaoModal" id="linkImprimir" target="_blank" action="#{relatorioExamesForm.imprimir}"  rendered="#{relatorioExamesForm.listExamesSize() > 0}"
		    				oncomplete="avisosPesquisa(#{relatorioExamesForm.erroPesquisa})"
		    				reRender="tabelaPaciente,totalPesq" style="border:0">
		    			<h:graphicImage url="images/icons/impressora.png" style="border:0;"></h:graphicImage>	
		    		</h:commandLink>	
		    		
		    		
		        </div>	
	    	</h:panelGroup>
	    	
	    	<div>
	    		<rich:dataTable id="dtExames"
								onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				           		onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
								value="#{relatorioExamesForm.listExames}" 
								var="exameSolic" 
								style="width:100%;" rows="100" reRender="dsExameList" rendered="#{relatorioExamesForm.tipoPesquisa ne 3 and relatorioExamesForm.filtroClinicaTipo ne 3 and relatorioExamesForm.agrupamento ne 2}">
					<f:facet name="header">
						<rich:columnGroup>
							<rich:column style="text-align:center;">
								Prontuário
							</rich:column>
							<rich:column style="text-align:center;">
								Paciente
							</rich:column>
							<rich:column style="text-align:center;">
								Exame
							</rich:column>
							<rich:column style="text-align:center;">
								Solicitação
							</rich:column>
							<rich:column style="text-align:center;">
								Agendamento
							</rich:column>
							<rich:column style="text-align:center;">
								Programação
							</rich:column>
							<rich:column style="text-align:center;">
								Realização
							</rich:column>
							<rich:column style="text-align:center;">
								Baixa/Laudo
							</rich:column>
							<rich:column>
								
							</rich:column>
						</rich:columnGroup>
					</f:facet>				
					<rich:column style="text-align: center;">
						<h:outputText value="#{exameSolic.internacao.paciente.numProntuario}"  />
					</rich:column>
					<rich:column style="text-align: left;">
				  		<h:outputText value="#{exameSolic.internacao.paciente.dscNome}"/>
					</rich:column>
					<rich:column style="text-align: left;">
				  		<h:outputText value="#{exameSolic.exame.dscExame}"/>
					</rich:column>
					<rich:column style="text-align: center;">
				  		<h:outputText value="#{exameSolic.datSolicitacao}">
				  			<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" timeZone="GMT-3" />
				  		</h:outputText>
					</rich:column>
					<rich:column style="text-align: center;">
				  		<h:outputText value="#{exameSolic.datAgendamento}">
				  			<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" timeZone="GMT-3" />
				  		</h:outputText>
					</rich:column>
					<rich:column style="text-align: center;">
						<h:outputText value="#{exameSolic.datProgramacao}"><f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText> - <h:outputText value=" #{exameSolic.horProgramacao}"/>
					</rich:column>
					<rich:column style="text-align: center;">
				  		<h:outputText value="#{exameSolic.datRealizacao}">
				  			<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" timeZone="GMT-3" />
				  		</h:outputText>
					</rich:column>
					<rich:column style="text-align: center;">
				  		<h:outputText value="#{exameSolic.datLaudo}">
				  			<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" timeZone="GMT-3" />
				  		</h:outputText>
					</rich:column>
					<rich:column style="text-align: center;">
	            		<t:commandLink action="#{exameForm.imprimirExameIndividual}"
								  		   target="_blank"
								  		   title="IMPRESSÃO"
								  		   styleClass="botaoModal">
					  		    <h:graphicImage id="imgRelatorioImprimirExame" url="IMG/impressora.png" style="border:0;" />
					  		    <f:setPropertyActionListener value="#{exameSolic.isnExameSolic}" target="#{exameForm.isnExameSolic}" />
						</t:commandLink>
					</rich:column>
					<f:facet name="footer">
						<rich:columnGroup>
							<rich:column colspan="8">
								<h:outputText value="Não há exames solicitados para esses parâmetros de busca!" rendered="#{empty relatorioExamesForm.listExames}"  />
								<rich:datascroller fastControls="auto" id="dsExameList" ajaxSingle="false" rendered="#{!empty relatorioExamesForm.listExames}" />
							</rich:column>
						</rich:columnGroup>
					</f:facet>
				</rich:dataTable>
				
				<rich:dataTable id="dtExamesEmergencia"
								onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				           		onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
								value="#{relatorioExamesForm.listaExamesEmergencia}" 
								var="exameSolic" 
								style="width:100%;" rows="100" reRender="dsExameEmergencia" rendered="#{relatorioExamesForm.tipoPesquisa eq 3 and relatorioExamesForm.filtroClinicaTipo eq 3 and relatorioExamesForm.agrupamento eq 2}">
					<f:facet name="header">
						<rich:columnGroup>
							<rich:column style="text-align:center;">
								Prontuário
							</rich:column>
							<rich:column style="text-align:center;">
								Paciente
							</rich:column>
							<rich:column style="text-align:center;">
								Exame
							</rich:column>
							<rich:column style="text-align:center;">
								Solicitação
							</rich:column>
							<rich:column style="text-align:center;">
								Agendamento
							</rich:column>
							<rich:column style="text-align:center;">
								Programação
							</rich:column>
							<rich:column style="text-align:center;">
								Realização
							</rich:column>
							<rich:column style="text-align:center;">
								Baixa/Laudo
							</rich:column>
							<rich:column>
								
							</rich:column>
						</rich:columnGroup>
					</f:facet>				
					<rich:column style="text-align: center;">
						<h:outputText value="#{exameSolic.numProntuario}"  />
					</rich:column>
					<rich:column style="text-align: left;">
				  		<h:outputText value="#{exameSolic.dscNome}"/>
					</rich:column>
					<rich:column style="text-align: left;">
				  		<h:outputText value="#{exameSolic.dscExame}"/>
					</rich:column>
					<rich:column style="text-align: center;">
				  		<h:outputText value="#{exameSolic.datSolicitacao}">
				  			<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" timeZone="GMT-3" />
				  		</h:outputText>
					</rich:column>
					<rich:column style="text-align: center;">
				  		<h:outputText value="#{exameSolic.datAgendamento}">
				  			<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" timeZone="GMT-3" />
				  		</h:outputText>
					</rich:column>
					<rich:column style="text-align: center;">
						<h:outputText value="#{exameSolic.datProgramacao}"><f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText> - <h:outputText value=" #{exameSolic.horProgramacao}"/>
					</rich:column>
					<rich:column style="text-align: center;">
				  		<h:outputText value="#{exameSolic.datRealizacao}">
				  			<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" timeZone="GMT-3" />
				  		</h:outputText>
					</rich:column>
					<rich:column style="text-align: center;">
				  		<h:outputText value="#{exameSolic.datLaudo}">
				  			<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" timeZone="GMT-3" />
				  		</h:outputText>
					</rich:column>
					<rich:column style="text-align: center;">
	            		<t:commandLink action="#{exameForm.imprimirExameIndividual}"
								  		   target="_blank"
								  		   title="IMPRESSÃO"
								  		   styleClass="botaoModal">
					  		    <h:graphicImage id="imgRelatorioImprimirExame" url="IMG/impressora.png" style="border:0;" />
					  		    <f:setPropertyActionListener value="#{exameSolic.isnExameSolic}" target="#{exameForm.isnExameSolic}" />
						</t:commandLink>
					</rich:column>
					<f:facet name="footer">
						<rich:columnGroup>
							<rich:column colspan="8">
								<h:outputText value="Não há exames solicitados para esses parâmetros de busca!" rendered="#{empty relatorioExamesForm.listaExamesEmergencia}"  />
								<rich:datascroller fastControls="auto" id="dsExameEmergencia" ajaxSingle="false" rendered="#{!empty relatorioExamesForm.listaExamesEmergencia}" />
							</rich:column>
						</rich:columnGroup>
					</f:facet>
				</rich:dataTable>
				
				
	    	</div>
	 	
		 	<a4j:status id="statusPanel"
				   onstart="Richfaces.showModalPanel('panelStatus');" 
				    onstop="#{rich:component('panelStatus')}.hide()">
			</a4j:status>  
        
		</h:form>
		
		<script>
		<!--
		function avisosPesquisa(erro) {
			if (erro == 1) {
				alert("Informe pelo menos um período de datas.");
			} else if (erro == 2) {
				alert("O intervalo entre as datas deve ser de no máximo um mês (31 dias).");
			} else if (erro == 3) {
				alert("A pesquisa não retornou nada, para esses parâmetros de busca.");
			}
		}

		function avisosPesquisaBPA(erro, id) {
			if (erro == 1) {
				alert("O campo Tipo de Atendimento é obrigatório.");
			} else if (erro == 2) {
				alert("O período de Data de Realização é obrigatório.");
			} else if (erro == 3) {
				alert("O intervalo entre as datas deve ser de no máximo um mês (31 dias).");
			} else if (erro == 4) {
				alert("A pesquisa não retornou nada, para esses parâmetros de busca.");
			} else {
				document.getElementById("formExame:"+id).click();
			}
		}
		//-->
		</script>
		
	</ui:define>
</ui:composition>
</html>