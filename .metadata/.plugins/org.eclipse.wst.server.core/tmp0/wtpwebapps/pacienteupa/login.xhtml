<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:mj="http://mojarra.dev.java.net/mojarra_ext"
	xmlns:t="http://myfaces.apache.org/tomahawk">
<head>
	<title>VITA - Login (<h:outputText value="#{bundle.tituloAplicacao}" />)</title>
	<script src="SCRIPTS/custom.js"></script>
	<link rel="stylesheet" type="text/css" href="CSS/login.css" />
	<script type="text/javascript">
	<!--
	
	function hiddenPasswodJS(input) {
	
		 caractere = '●';
		 inputPassword = input.value;
		 hiddenPassword = document.getElementById('formulario:hiddenPassword').value;
		
		 if(event.keyCode = 9){
			 document.getElementById("formulario:senhaIE").focus();
		 }
		 
		 if(inputPassword == ''){
			 document.getElementById('formulario:hiddenPassword').value = '';
			 return;
		 }else{		 
		 	for (var i=0;i<inputPassword.length;i++){
				if(inputPassword.charAt(i) != caractere){
					hiddenPassword = hiddenPassword+inputPassword.charAt(i);	
					inputPassword = inputPassword.replace(inputPassword.charAt(i), caractere);
			 	} 
	 	  	}
		 }
		 		 
		 document.getElementById('formulario:hiddenPassword').value = hiddenPassword;
		 input.value = inputPassword;	 
    }
	
	function onFocusSenha(input){
		input.value = '';
		document.getElementById('formulario:hiddenPassword').value = '';
	}
	
	function focus(){
		var e = document.getElementById("formulario:login");
		e.focus();
	}
	function enter(e) {
	    var keycode;
	    if (window.event) { 
	       keycode = window.event.keyCode;
 	    } else { 
 	       keycode = e.which; 	       
        }
	    if (keycode == 13) {
	       this.submit();
	    }
	}
	
	
	//-->
	</script>
</head>
<body onload="focus();">
	<a4j:keepAlive beanName="usuarioForm" />
	
	
	<h:form id="formulario">
		
		<h:inputHidden id="hiddenPassword" value="#{usuarioForm.valorCaractere}"/>
		
		<a4j:support id="suportLogin2" event="onload" focus="login" ajaxSingle="true" />
		<div align="center"><h:graphicImage value="images/paciente/#{templateForm.logoUpaLogin}" ></h:graphicImage></div>
		<div id="caixa">
			<div id="inputs">
				<table cellpadding="3">
				<tr>
					<td colspan="2" style="color:yellow;font-weight:bold">
						<a4j:outputPanel ajaxRendered="true">
						    <rich:messages layout="table" globalOnly="true" errorClass="msgError" infoClass="msgError" warnClass="msgWarn" id="messages"/>
						</a4j:outputPanel>&nbsp;
					</td>
				</tr>
				
				<tr>
					<td><label for="login">LOGIN:</label></td>
					<td><h:inputText id="login" styleClass="login" value="#{usuarioForm.usuario.dscLogin}" onblur="upper(this);" onkeyup="upper(this)" maxlength="30" /></td>
				</tr>
				<tr>
					<td><label for="senha">SENHA:</label></td>
					<td>
					    <h:inputSecret id="senhaFirefox" rendered="#{!header['User-Agent'].contains('; MSIE ')}" styleClass="login" onfocus="onFocusSenha(this)" value="#{usuarioForm.valorCaractere}"/>
						<h:inputText id="senhaIE" rendered="#{header['User-Agent'].contains('; MSIE ')}" styleClass="login" onfocus="onFocusSenha(this)" onkeyup="hiddenPasswodJS(this);"/>
					</td>										
				</tr>
				<tr>
					<td colspan="2">
						<h:commandLink id ="bntAlterarSenha" action="#{alteracaoRecuperacaoSenhaForm.preparaAlterarSenha}" >
							<h:outputText value="Alterar Senha" style="color:darkblue; font-size:14px;"/>
						</h:commandLink>
						<rich:spacer width="10" />
						<h:commandButton value="Confirmar" styleClass="botaoLogin" action="#{usuarioForm.validarLogin}" />
					</td>
				</tr>
				
				</table>
			</div>
		</div>
		
		<div id="rodape">
			<h:graphicImage value="#{usuarioForm.imagemRodapeLogin.vlrParametro}" />
		</div>
		<h:inputHidden id="host" value="#{usuarioForm.host}"/> 
	</h:form>	
	
	<script>
		document.getElementById("formulario:host").value = window.location.host;
	</script>	
</body>
</html>