<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
					  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<ui:composition template="template.xhtml">
	<ui:define name="headHtml">
 
	</ui:define>
	<ui:define name="conteudo">
	<a4j:keepAlive beanName="emergenciaForm" />
	
	<!-- MODAL PANEL DE SELEÇÃO DA CLINICA/ HOSPITAL -->
	<rich:modalPanel id="panCid10" autosized="true" width="750" resizeable="false" >
		<!-- BARRA DE TITULO MODAL-->
    	<f:facet name="header">
			<h:panelGroup>
       			<h:outputText value="Pesquisar Codigos CID-10"></h:outputText>
       		</h:panelGroup>
    	</f:facet>

    	<f:facet name="controls">
    		<h:panelGroup>
           		<h:graphicImage value="IMG/excluir.png" id="hidelink2" />
           		<rich:componentControl for="panCid10" attachTo="hidelink2" operation="hide" event="onclick" />
        	</h:panelGroup>
    	</f:facet>
		<!-- FIM DA BARRA DE TITULO MODAL-->
	        
    	<!-- CAMPOS DE BUSCA -->			 
		<h:form id="formCid10">
		<h:panelGrid columns="2">
	    	<h:outputText id="outputClinica" value="Diagnóstico inicial:" /><br />
	    	<h:inputText value="#{emergenciaForm.strDescCid}"></h:inputText>
	    	<a4j:commandButton image="IMG/buscar2.png" action="#{emergenciaForm.buscarCid10}" reRender="tabelaCid" />
	    </h:panelGrid>
	    <!-- FIM CAMPOS DE BUSCA -->		        
	        
		<!-- INICIO DA TABELA -->
		<rich:dataTable	id="tabelaCid"
				onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
		       	onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
				value="#{emergenciaForm.lstCid10}" 
				var="lstCid10" 
				rows="10" 
				rowKeyVar="linha" 
				style="width:100%;" 
				reRender="ds">
							
			<f:facet name="header">
				<rich:columnGroup>
					<h:column><h:outputText value="Selecione" /></h:column>
					<h:column><h:outputText value="Código" /></h:column>
					<h:column><h:outputText value="Descrição" /></h:column>
				</rich:columnGroup>
			</f:facet>
							
			<rich:column width="5%">
				<center>
					<a4j:commandLink id="selecionarCid10" styleClass="primeiro" reRender="mostraCid10">
						<h:graphicImage id="imgSelecionar02" url="IMG/selecionar.png" style="border:0;" />	
						<f:setPropertyActionListener value="#{lstCid10}" target="#{emergenciaForm.objCid10}"/>
						<rich:componentControl for="panCid10" attachTo="selecionarCid10" operation="hide" event="onclick" />
					</a4j:commandLink>
				</center>
			</rich:column>
														
			<rich:column >
				<h:outputText value="#{lstCid10.codCid10}" />
			</rich:column>
							
			<rich:column >
				<h:outputText value="#{lstCid10.dscCid10}" />
			</rich:column>
												
			<f:facet name="footer">
				<rich:datascroller id="ds" ajaxSingle="false" />
			</f:facet>
		</rich:dataTable>
		</h:form>
		<!-- FIM CONTEUDO MODAL -->
 	</rich:modalPanel>	
	<!-- FINAL DO MODAL PANEL DE INTERNACAO DE PACIENTE -->    
	
	<h:form id="cdEmergencia" >	
			
		<div id="geral">
		    <h3>EMERGÊNCIA</h3>
			<div class="quadroPaciente">     	 
        		<div class="col460"> 
                	<label>Nome</label>
		        	<h:outputText styleClass="campoVazio400" id="nomePaciente" value="#{emergenciaForm.objPaciente.dscNome}" />		        	
            	</div>
            	<div class="col460">
                	<label>Nome Mãe</label>
		        	<h:outputText styleClass="campoVazio400" value="#{emergenciaForm.objPaciente.dscMae}" />
            	</div>
            	<div class="col460"> 
                	<label>Sexo</label>
		        	<h:outputText styleClass="campoVazio400" value="#{emergenciaForm.objPaciente.sexo.dscSexo }" />
            	</div>
            	<div class="col460"> 
                	<label>Data Nascimento</label>
	            	<h:outputText styleClass="campoVazio400" value="#{emergenciaForm.objPaciente.datNascimento}" >
		          		<f:convertDateTime pattern="dd/MM/yyyy" />
		          	</h:outputText>
            	</div>
            	<div class="col460">
                  	<label>Naturalidade</label>
		          	<h:outputText styleClass="campoVazio400" value="#{emergenciaForm.objPaciente.dscNaturalidade}" />
             	</div>	 
        	</div>     
	      	<br style="clear: both"/>
	      	<h3>DADOS DO PACIENTE</h3>	
	      	<div class="quadroEdicao">
				<div class="col500"> 
					<label>Situação Familiar</label><br />
					<h:selectOneMenu id="dropDownSituacao"						
						value="#{emergenciaForm.objEmergencia.situacaofamiliar.isnSituacaoFamiliar}">
							<f:selectItems value="#{emergenciaForm.sliSituacaoFamiliar}" />
					</h:selectOneMenu>					
					<h:outputText value="*" style="color:red;font-weight: bold;" />
				</div>					
	            <br style="clear: both"/>	 
				<div class="col500">
	                <label>Endereço</label><br />
					<h:inputText id="inputEndereco"						
						required="true"
						requiredMessage="Campo Endereço é obrigatório."
						value="#{emergenciaForm.objEmergencia.dscEndereco}"
						style="width: 490px" />
					<h:outputText value=" * " style="color:red;font-weight: bold;" />
	            </div>
	            <div class="col400">
	            	<label>Complemento</label><br />
					<h:inputText id="inputComplemento" 
						value="#{emergenciaForm.objEmergencia.dscComplemento}"
						style="width: 380px" />
	            </div>	        
	            <div class="col500">
	                <div style="width: 360px; float: left"> 
	            		<label>Bairro</label><br />
						<h:inputText id="inputBairro" 
							value="#{emergenciaForm.objEmergencia.dscBairro}"
							maxlength="30"					 
							required="true"
							requiredMessage="Campo Bairro é obrigatório."
							style="width: 320px" />
						<h:outputText value="*" style="color:red;font-weight: bold;" />
	            	</div>
	        		<div style="width: 160px; float: left">
	            		<label>CEP</label><br />
						<h:inputText id="inputCep" 
			            	value="#{emergenciaForm.objEmergencia.numCep}"
			            	maxlength="9"
							onkeyup="formataCEP(this);"							
							required="true"
							requiredMessage="Campo CEP é obrigatório"
							style="width: 130px" >								
						</h:inputText>
		   				<h:outputText value="*" style="color:red;font-weight: bold;" />	
	        		</div>
	        	</div>			
		        <div class="col400">
					<div style="width: 300px; float: left">        	 
						<label>Cidade</label><br /> 
						<h:selectOneMenu id="dropDownMunicipio" 
							required="true"
							requiredMessage="Município: campo obrigatório."
							style="width: 280px" 
							value="#{emergenciaForm.objEmergencia.municipio.isnMunicipio}">								
							<a4j:support id="sptMun" reRender="outputUf01"
					             action="#{emergenciaForm.buscarUf}" 					             
					             event="onchange" 					             
					             ajaxSingle="true"/>
							<f:selectItems value="#{emergenciaForm.sliMunicipios}" />
						</h:selectOneMenu>
						<h:outputText value="*" style="color:red;font-weight: bold;" />
					</div>	
					<div style="width: 100px; float: left">
                		<label>UF:</label><br />
						<h:outputText id="outputUf01" value="#{emergenciaForm.strUf}" styleClass="campoVazio" style="width: 80px"/>
               		</div>
				</div>
				<br style="clear: both"/>
			</div>	
			<div class="quadroEdicaoU">					        		
		        <div class="col460">
                	<label><b>Telefone 1</b></label>
	            	<div>
	               		<label style="width: 100px">DDD, Tipo, Nº:</label>
				  		<h:inputText id="inputDDDFixo1" value="#{emergenciaForm.objEmergencia.numDdd1}"
				      		   	maxlength="2"  
				      		   	style="width: 30px" />
	 			  	    <label></label>          
						<h:selectOneMenu id="dropDownTipoTelefone1" 
			                    value="#{emergenciaForm.objEmergencia.tipotelefone1.isnTipoTelefone}">
					 	 	  <f:selectItems value="#{emergenciaForm.sliTiposTelefones}" />
			    		</h:selectOneMenu>
			    		<label></label>
					    <h:inputText id="inputTelefoneFixo1" 	    	         	
	        	    			value="#{emergenciaForm.objEmergencia.numTelefone1}"
					 			maxlength="9"					 	
					 			style="width: 103px"/>
    				</div>
              	</div>
              	<div class="col460">
                	<label><b>Telefone 2</b></label>
	            	<div>
	               		<label style="width: 100px">DDD, Tipo, Nº:</label>
	    		  		<h:inputText id="inputDDDCelular2"  value="#{emergenciaForm.objEmergencia.numDdd2}"
					 		  maxlength="2" style="width: 30px"/>
					 	<label></label>	  
		  				<h:selectOneMenu id="dropDownTipoTelefone2" 
			                value="#{emergenciaForm.objEmergencia.tipotelefone2.isnTipoTelefone}">
				       		<f:selectItems value="#{emergenciaForm.sliTiposTelefones}" />
			      		</h:selectOneMenu>             
			      		<label></label>
					    <h:inputText id="inputTelefoneCelular2" styleClass="inputs"	    	      		    
		       	         	value="#{emergenciaForm.objEmergencia.numTelefone2}"
						   	maxlength="9"					    
					 	   	style="width: 103px"/>
			        </div>
              	</div>              	
            </div>        
            <br style="clear: both"/>
            <h3>DADOS DE ENTRADA</h3>	  		
            <div class="quadroEdicao">		        		
		        <div class="col500">
		            <div style="float: left">
		           		<label>Data entrada</label><br />
						<rich:calendar id="calenderEntrada"
				      		inputSize="20"
				       		datePattern="dd/MM/yyyy"				         	 
				       		value="#{emergenciaForm.objEmergencia.datEntrada}" />			         			
					</div>
					<div style="float: left; margin-right: 5px">
		           		<label>Hora</label><br />
						<h:inputText id="inputHoraEntra"							
							value="#{emergenciaForm.objEmergencia.horaEntrada}" 
							onkeyup="mascaraHora(this);"
							maxlength="5"							
							style="width: 50px" 
							validatorMessage="Hora de entrada é invalida.">
							<f:validator validatorId="ValidadorHora" />
						</h:inputText>
					</div>
					<div style="float: left">
		          		<label>Tipo Atendimento</label><br />
		            	<h:selectOneMenu id="dropDownTipoAtendimento" 
				            value="#{emergenciaForm.objEmergencia.tipoAtendimento}">
					 	 	<f:selectItems value="#{emergenciaForm.sliTipoAtendimento}" />
				    	</h:selectOneMenu>
				    	<h:outputText value=" * " style="color:red;font-weight: bold;" />
				    </div>
				    <div style="float: left">
		          		
				    </div>
				    <div style="float: left">
		          		<label>Profissional</label><br />
		            	<h:selectOneMenu id="dropDownProfissional" 
				            value="#{emergenciaForm.objEmergencia.profissional.isnProfissional}">
					 	 	<f:selectItems value="#{emergenciaForm.sliProfissionais}" />
				    	</h:selectOneMenu>
				    	<h:outputText value=" * " style="color:red;font-weight: bold;" />
				    </div>
				    <div style="float: left">	
		            	<label style="width: 100px">Regulação:</label><br/>
						<h:inputText id="inputRegulacao" 
									 value="#{emergenciaForm.objEmergencia.dscRegulacao}"
									 style="width: 200px" />
					</div>	
					<div style="float: left">	
		            	<label style="width: 100px">Orgão:</label><br/>
							<h:inputText id="input" 
								value="#{emergenciaForm.objEmergencia.dscOgao}"
								style="width: 200px"/>
					</div>			
		        </div>
		    </div>
		    <div class="quadroEdicaoU">		        
				<div>
		        	<h:selectBooleanCheckbox id="flgCasoPolicia" value="#{emergenciaForm.flgPolicia}">
						<f:selectItems value="#{emergenciaForm.flgPolicia}" />						
					</h:selectBooleanCheckbox>
					<label><b>CASO DE POLÍCIA</b></label>  
		        </div>
			</div>
		    <div class="quadroEdicaoU">
				     
					<h:selectBooleanCheckbox id="flgAcidenteTrabalho" value="#{emergenciaForm.flgAcidTrabalho}">
						<f:selectItems value="#{emergenciaForm.flgAcidTrabalho}"/>																
					</h:selectBooleanCheckbox>
					<label><b>ACIDENTE DE TRABALHO</b></label><br/>
												
	                <div class="col500">                        
						<label>Empresa:</label><br />
						<h:inputText id="inputEmpresa" value="#{emergenciaForm.objEmergencia.dscEmpresa}" 
							style="width: 490px" 
							disabled="#{!emergenciaForm.flgAcidTrabalho}"/>
					</div>
					<div class="col400">
	       				<label>CNPJ:</label><br />
						<h:inputText id="inputEmpresaCNPJ" 
							maxlength="14"
							value="#{emergenciaForm.objEmergencia.numCnpj}"
							style="width: 380px" 
							disabled="#{!emergenciaForm.flgAcidTrabalho}"/>
					</div>
					<div class="col500">
						<label>Endereço:</label><br/>
							<h:inputText id="inputEmpresaEndereco"
								value="#{emergenciaForm.objEmergencia.dscEnderecoEmpresa}"
								style="width: 490px" 
								disabled="#{!emergenciaForm.flgAcidTrabalho}"/>
					</div>
					<div class="col400">
						<label>Complemento:</label>
						<h:inputText id="inputEmpresaComplemento"							
							value="#{emergenciaForm.objEmergencia.dscComplementoEmpresa}"
							style="width: 380px" 
							disabled="#{!emergenciaForm.flgAcidTrabalho}"/>
					</div>
					<div class="col500">
						<div style="width: 360px; float: left">
							<label>Bairro:</label><br/>
							<h:inputText id="inputEmpresaBairro"								
								value="#{emergenciaForm.objEmergencia.dscBairroEmpresa}"
								style="width: 320px" 
								disabled="#{!emergenciaForm.flgAcidTrabalho}"/>
		            	</div>
		        		<div style="width: 160px; float: left">
							<label>CEP:</label><br/>
							<h:inputText id="inputEmpresaCEP"								
								maxlength="9"
								value="#{emergenciaForm.objEmergencia.dscCEPEmpresa}"
								style="width: 130px" 
								disabled="#{!emergenciaForm.flgAcidTrabalho}"/>
						</div>
					</div>
					<div class="col400">
						<div style="width: 300px; float: left">   
							<label>Municipio:</label><br/>
							<h:selectOneMenu id="dropDownMunicipioEmpresa" 
								value="#{emergenciaForm.objEmergencia.municipioEmpresa.isnMunicipio}"
								style="width: 280px" 
								disabled="#{!emergenciaForm.flgAcidTrabalho}">
								<f:selectItems value="#{emergenciaForm.sliMunicipios}" />
								<a4j:support id="sptMun2" reRender="outputUf02"
						             action="#{emergenciaForm.buscarUfEmpresa}"
						             event="onchange" 
						             ajaxSingle="true"/>
							</h:selectOneMenu>
						</div>
						<div style="width: 100px; float: left">
	                		<label>UF:</label><br />
							<h:outputText id="outputUf02" 
								value="#{emergenciaForm.strUfEmpresa}" 
								styleClass="campoVazio" style="width: 80px"/>
	               		</div>
					</div>				
					<div class="col500">
					    <div style="float: left; margin-right: 11px">
		                	<label>Telefone (DDD, Tipo, Numero):</label><br/>
							<h:inputText id="inputDDDFixoEmpresa" 
				  		   		value="#{emergenciaForm.objEmergencia.numDDDempresa}"
						   		maxlength="2"					  
					   	   		style="width: 30px; margin-right: 9px" 
					   	   		disabled="#{!emergenciaForm.flgAcidTrabalho}"/>
			            		            
							<h:selectOneMenu id="dropDownTipoFoneEmpresa" 
					        	value="#{emergenciaForm.objEmergencia.tipotelefoneEmpresa.isnTipoTelefone}"
					        	style="margin-right: 9px" 
					        	disabled="#{!emergenciaForm.flgAcidTrabalho}">
						 		<f:selectItems value="#{emergenciaForm.sliTiposTelefones}" />
					    	</h:selectOneMenu>
					    				    
							<h:inputText id="inputTelefoneFixoEmpresa" 	    	         	
		        	    		value="#{emergenciaForm.objEmergencia.numTelefoneFixoEmpresa}"
								maxlength="9"					 	
								style="width: 110px" 
								disabled="#{!emergenciaForm.flgAcidTrabalho}"/><br/>
						</div>
						<div style="float: left">	
		            		<label style="width: 100px">Contato:</label><br/>
							<h:inputText id="inputEmpresaContato" 
								value="#{emergenciaForm.objEmergencia.dscContatoEmpresa}"
								style="width: 200px" 
								disabled="#{!emergenciaForm.flgAcidTrabalho}"/>
						</div>		
					</div>
				
			</div>
		    <div class="quadroEdicaoU">				
				<h:selectBooleanCheckbox id="flgPlanoSaude" 
					value="#{emergenciaForm.flgPlanoSaude}">
					<f:selectItems value="#{emergenciaForm.flgPlanoSaude}" />
					<a4j:support event="onclick" ajaxSingle="true" reRender="#{emergenciaForm.listaIdsPlanoSaude}" />
				</h:selectBooleanCheckbox>
				<label><b>POSSUI PLANO DE SAÚDE</b></label><br/>				
				<div style="float: left; margin-right: 10px">				
					<label>Seguradora:</label><br/>
					<h:inputText id="inputSeguradora"
						value="#{emergenciaForm.objEmergencia.dscSeguradora}"
						style="width: 200px" 
						disabled="#{!emergenciaForm.flgPlanoSaude}"/>					
				</div>
				<div style="float: left; margin-right: 10px">
					<br/>
					<h:selectBooleanCheckbox id="flgTitular"
						value="#{emergenciaForm.flgTitular}"
						disabled="#{!emergenciaForm.flgPlanoSaude}">
						<f:selectItems value="#{emergenciaForm.flgTitular}" />	
						<a4j:support event="onclick" ajaxSingle="true" reRender="inputTitular" />						      
					</h:selectBooleanCheckbox>
					<label>Paciente titular do plano</label>
				</div>
				<div class="col460">	
					<label>Nome do Titular:</label><br/>
					<h:inputText id="inputTitular"
						value="#{emergenciaForm.objEmergencia.dscTitular}"
						style="width: 450px" 
						disabled="#{(!emergenciaForm.flgPlanoSaude || !emergenciaForm.flgTitular)}"/>
				</div>
				<div class="col222">
				   <label>Numero da Inscricao</label><br/>
				   <h:inputText id="inputNumInscricao"
						value="#{emergenciaForm.objEmergencia.numInscricao}"
						style="width: 200px" 
						disabled="#{!emergenciaForm.flgPlanoSaude}"/>		
				</div>
				<div class="col250">
				   <label>Data de Inscricao</label><br/>
				   <rich:calendar id="dataInscricao"
			        	inputSize="20"
			         	datePattern="dd/MM/yyyy" 
			         	enableManualInput="true"
			         	value="#{emergenciaForm.objEmergencia.datInscricao}" 
			         	disabled="#{!emergenciaForm.flgPlanoSaude}"/>	
				</div>
			</div>	
		    <br style="clear: both"/>
		    <h3>DADOS DA EMERGÊNCIA</h3>	
			<div class="quadroEdicao">
			    <div class="col500">              
                  	<label>Código CID:</label><br />
                  		<a4j:commandLink id="cmdCid10" reRender="tabelaCid" ajaxSingle="true">
					  		<h:graphicImage id="gimgbuscaCid10" url="IMG/buscar.png" style="border:0;" />
					  		<rich:componentControl for="panCid10" attachTo="cmdCid10" 
					  		             operation="show" event="onclick" />
				  	</a4j:commandLink>				  
				  	<h:outputText id="mostraCid10" value="#{emergenciaForm.objCid10.dscCid10}" 
				                style="font-weight: 700;margin-left: 5px"  />				  
              	</div>
	        	<div class="col460">
	                <label>Queixa:</label><br />
					<h:inputTextarea id="inputAreaQueixa"							
						value="#{emergenciaForm.objEmergencia.dscQueixa}" 
						style="width: 420px; height: 40px" />
	        	</div>
	        	<div class="col460">
	           		<label>Parecer Clínico:</label><br />
					<h:inputTextarea id="inputAreaParecerClinico"							
						value="#{emergenciaForm.objEmergencia.dscParecerClinico}" 
						style="width: 420px; height: 40px" />
	        	</div>
	        	<div class="col460">
	           		<label>Parecer de Diagnóstico:</label><br />
					<h:inputTextarea id="inputAreaParecerDiagnostico"							
						value="#{emergenciaForm.objEmergencia.dscDiagnostico}" 
						style="width: 420px; height: 40px" />
	        	</div>
	        	<div class="col460">
	            	<label>Procedimentos:</label><br />
					<h:inputTextarea id="inputAreaProcedimentos"							
						value="#{emergenciaForm.objEmergencia.dscProcedimentos}" 
						style="width: 420px; height: 40px" />
	        	</div>
	        	<div class="col460">
	           		<label>Informações adicionais:</label><br />
					<h:inputTextarea id="inputAreaInfoAdicionais"
						value="#{emergenciaForm.objEmergencia.dscObs}" 
						style="width: 420px; height: 40px" />
	    	    </div>
	        	<div class="col460">
	        	    <div style="float: left">
	            		<label>Data saida:</label><br />
						<rich:calendar id="calenderSaida"
			        		inputSize="20"
			         		datePattern="dd/MM/yyyy" 
			         		value="#{emergenciaForm.objEmergencia.datSaida}" />
		    		</div>
		    		<div style="float: left; margin-right: 5px">
	          			<label>Hora:</label><br />
						<h:inputText id="inputHoraSaida" 
							value="#{emergenciaForm.objEmergencia.horaSaida}" 
							onkeyup="mascaraHora(this);" 
							maxlength="5"						 
							style="width: 50px" 
							validatorMessage="Hora de saída é invalida!">
							<f:validator validatorId="ValidadorHora" />							
						</h:inputText>							
	        		</div>
	        		<div style="float: left">
	         			<label>Destino:</label><br />
						<h:selectOneMenu id="dropDownDestino" 
			         		value="#{emergenciaForm.objEmergencia.destino.isnDestino}">
				 	 		<f:selectItems value="#{emergenciaForm.sliDestinos}" />
			    		</h:selectOneMenu>	
			    	</div>
	        	</div>
	        </div>	        
			<div id="divBotoes">
				<h:commandButton id="IncluirEmergencia"   
					image="IMG/botaoGravar.gif" 
					action="#{emergenciaForm.gravar}" style='margin-right: 10px'/>
							
				<h:commandButton id="btnCancelar" 
				  	    image="IMG/botaoCancelar.gif"
		  				style='margin-right: 10px'		  				 
		  				action="#{emergenciaForm.cancelar}" 
		  				immediate="true"/>
		  				
				<h:commandButton id="btnExcluir"
				             onclick="confirmarExclusao()"  
				  	         image="IMG/botaoExcluir.gif"				  	          
				  	         rendered="#{emergenciaForm.mostrarBotaoExcluir}"
				  	         action="#{emergenciaForm.excluir}">
					<f:setPropertyActionListener value="#{true}" target="#{emergenciaForm.acaoDeExcluir}"/>
				</h:commandButton>
			</div>
		</div>		
	</h:form>
	</ui:define>
</ui:composition>
</html>