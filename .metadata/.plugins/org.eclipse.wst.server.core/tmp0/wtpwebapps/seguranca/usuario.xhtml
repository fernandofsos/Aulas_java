<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:a4j="http://richfaces.org/a4j"
				xmlns:rich="http://richfaces.org/rich"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:t="http://myfaces.apache.org/tomahawk"
				xmlns:mj="http://mojarra.dev.java.net/mojarra_ext"
				template="crud_template.xhtml">
    
	<ui:param name="crudBean" value="#{usuarioForm}" />
	 
	<ui:define name="requiredFieldsMessage">
		<h:outputText value="#{bundle.todosCamposObrigatorios}" rendered="#{crudBean.updating}"/>
		<h:outputText value="#{bundle.peloMenosUmCamposObrigatorio}" rendered="#{crudBean.searching}"/>
	</ui:define>
	
	<ui:define name="saveStateObjectsDefined"> 
		<t:saveState value="#{crudBean.listaEntidades}" />
		<t:saveState value="#{crudBean.listaSetores}" />
		<t:saveState value="#{crudBean.listaGruposDestino}" />
		<t:saveState value="#{crudBean.listaGrupos}" />
		<t:saveState value="#{crudBean.listaUf}" />
		<t:saveState value="#{crudBean.listaTipoTelefone}" />
		<t:saveState value="#{crudBean.listaConselho}" />
		<t:saveState value="#{crudBean.listaFormacao}" />
		<t:saveState value="#{crudBean.listaCategoria}" />	
		<t:saveState value="#{crudBean.listaEspecialidades}" />	
		<t:saveState value="#{crudBean.listaEspecialidadesUsuario}" />	
		<t:saveState value="#{crudBean.flgAtendeAmbulatorio}" />	
		<t:saveState value="#{crudBean.flgAtivoEspecialidade}" />	
		<t:saveState value="#{crudBean.usuarioEspecialidade}" />	
		<t:saveState value="#{crudBean.estadoDivEspecialidade}" />
		<t:saveState value="#{crudBean.listVinculoTipo}" />
		<t:saveState value="#{crudBean.picklistEntidade}" />
		<t:saveState value="#{crudBean.picklistEntidadeDestino}" />
		<t:saveState value="#{crudBean.listaUsuarioEntidade}" />
		<t:saveState value="#{crudBean.showDadosComplementares}" />
		<t:saveState value="#{crudBean.usuarioEntidadeSelecionado}" />
		<t:saveState value="#{crudBean.entidadeSelecionada}" />
	</ui:define>	
	
	<a4j:keepAlive beanName="senhaForm" />
	
	<ui:define name="content">
		<!-- Painel de Busca -->
		<h:panelGroup id="panelGroupDePesquisa" style="height:100%;" rendered="#{crudBean.searching}">
			<f:subview id="viewBusca">
				<table class="tabela">
					<tr>
						<td class="tdCor" width="200px">Código *</td>
						<td class="tdBranco">
							<h:inputText id="isnUsuario" value="#{crudBean.searchObject.isnUsuario}" styleClass="baseField" onblur="upper(this);" onkeypress="return soNumero(event, this)" size="10" maxlength="8" />
						</td>
					</tr>				
					<tr>
						<td class="tdCor" width="200px">Login *</td>
						<td class="tdBranco">
							<h:inputText value="#{crudBean.searchObject.filtro.dscLogin}" styleClass="baseField" onblur="upper(this);" size="70" maxlength="20" />
						</td>
					</tr>
					<tr>
						<td class="tdCor" width="200px">Nome *</td>
						<td class="tdBranco">
							<h:inputText value="#{crudBean.searchObject.dscUsuario}" styleClass="baseField" size="70" onblur="upper(this);" maxlength="50" />
						</td>
					</tr>
					<tr>
						<td class="tdCor" width="200px">Entidade *</td>
						<td class="tdBranco">
							<h:selectOneMenu value="#{crudBean.searchObject.isnEntidade}" converter="simpleIndexConverter">
								<f:selectItem itemValue="" itemLabel="SELECIONE" />
								<t:selectItems var="o" itemValue="#{o.isnEntidade}" itemLabel="#{o.dscEntidade}" value="#{crudBean.listaEntidades}" />
							</h:selectOneMenu>						
						</td>
					</tr>
					<tr>
						<td class="tdCor" width="200px">Data do Cadastro *</td>
						<td class="tdBranco" valign="top">
							<rich:calendar value="#{crudBean.searchObject.filtro.datCadastroInicio}" datePattern="dd/MM/yyyy" cellWidth="24px" cellHeight="22px" style="width:200px" showWeeksBar="false" inputSize="10"  enableManualInput="true" oninputkeypress="return formataData(event, this);" maxlength="10" />
								<h:outputText value=" a "/>
							<rich:calendar value="#{crudBean.searchObject.filtro.datCadastroFim}" datePattern="dd/MM/yyyy" cellWidth="24px" cellHeight="22px" style="width:200px" showWeeksBar="false" inputSize="10"  enableManualInput="true" oninputkeypress="return formataData(event, this);" maxlength="10"/>						
						</td>
					</tr>
					<tr>
						<td class="tdCor" width="200px">Situação</td>
						<td class="tdBranco">
							<div style="width:300px;">
								<h:selectOneRadio value="#{crudBean.searchObject.flgSituacao}" styleClass="radioButton">
												<f:selectItem itemValue="" itemLabel="Todos"/>
												<f:selectItem itemValue="S" itemLabel="Ativo"/>
												<f:selectItem itemValue="N" itemLabel="Inativo"/>
												<f:selectItem itemValue="B" itemLabel="Bloqueado"/>
								</h:selectOneRadio>
							</div>	
						</td>
					</tr>
				</table>
				<mj:focus for="formulario:viewBusca:isnUsuario" />
			</f:subview>
		</h:panelGroup>
		
		<h:panelGroup id="panelGroupDeCadastro"  rendered="#{crudBean.updating}" style="height:100%;width: 100%">
			<f:subview id="viewCadastro">
			    <div id="dadosGerais">
			    	<h:panelGroup id="panelGroupDeAlterar" style="height:100%;" rendered="#{crudBean.editing}">
						<table class="tabela">
							<tr>
								<td class="tdCor" width="200px">Código</td>
								<td class="tdBranco">
									<h:outputText value="#{crudBean.entity.isnUsuario}" />
								</td>
							</tr>
													
							<tr>
								<td class="tdCor" width="200px">Data do Cadastro</td>
								<td class="tdBranco">
									<h:outputText value="#{crudBean.entity.datCadastro}" />
								</td>
							</tr>
							<tr>
								<td class="tdCor" width="200px">Login</td>
								<td class="tdBranco">
									<h:inputText id="dscLoginU" value="#{crudBean.entity.dscLogin}" styleClass="baseField" size="30" maxlength="20" onblur="upper(this);" />
								</td>
							</tr>
												
						</table>
					</h:panelGroup>
					<h:panelGroup id="panelGroupInserir" style="height:100%;width:100%;" rendered="#{crudBean.inserting}">
						<table class="tabela">
							<tr>
								<td class="tdCor" width="200px">Login *</td>
								<td class="tdBranco">
									<h:inputText id="dscLogin" value="#{crudBean.entity.dscLogin}" styleClass="baseField" size="30" maxlength="20" onblur="upper(this);" />
								</td>
							</tr>
						</table>
						<mj:focus for="formulario:viewCadastro:dscLogin" />								
					</h:panelGroup>
					<table class="tabela">
						<tr>
							<td class="tdCor" width="200px">Nome *</td>
							<td class="tdBranco">
								<h:inputText value="#{crudBean.entity.dscUsuario}" styleClass="baseField" size="70" maxlength="50" onblur="upper(this);" />
							</td>
						</tr>
						<tr>
							<td class="tdCor" width="200px">Email*</td>
							<td class="tdBranco">
								<h:inputText value="#{crudBean.entity.dscEmail}" styleClass="baseField" size="70" maxlength="100" onblur="upper(this); validarEmail();" />
							</td>
						</tr>
						<tr>
							<td class="tdCor" width="200px">CPF*</td>
							<td class="tdBranco">
								<h:inputText value="#{crudBean.entity.dscCpf}" styleClass="baseField" size="20" id="cpf" maxlength="14">
									<rich:jQuery query="mask('999.999.999-99')" selector="#cpf" binding="#{crudBean.entity.dscCpf}"/>
								</h:inputText>
							</td>
						</tr>
						
						
						<tr>
							<td class="tdCor" width="200px">Telefone 1 *</td>
							<td class="tdBranco">
							
								<h:selectOneMenu value="#{crudBean.entity.isnTipoTelefone}" converter="simpleIndexConverter">
									<f:selectItem itemValue="-1" itemLabel="SELECIONE" />
									<t:selectItems var="o" itemValue="#{o.isnTipoTelefone}" itemLabel="#{o.dscTipoTelefone}" value="#{crudBean.listaTipoTelefone}" />
								</h:selectOneMenu>
								
								<h:outputText value=" " />									
							
								<h:inputText id="telefone1" value="#{crudBean.entity.numTelefone}" styleClass="baseField" size="12"  >
									<rich:jQuery query="mask('(99)9999-9999')" selector="#telefone1" />
								</h:inputText>
							</td>
						</tr>	
						<tr>
							<td class="tdCor" width="200px">Telefone 2</td>
							<td class="tdBranco">
							
								<h:selectOneMenu value="#{crudBean.entity.isnTipoTelefone2}" converter="simpleIndexConverter">
									<f:selectItem itemValue="-1" itemLabel="SELECIONE" />
									<t:selectItems var="o" itemValue="#{o.isnTipoTelefone}" itemLabel="#{o.dscTipoTelefone}" value="#{crudBean.listaTipoTelefone}" />
								</h:selectOneMenu>
								
								<h:outputText value=" " />								
							
								<h:inputText id="telefone2" value="#{crudBean.entity.numTelefone2}" styleClass="baseField" size="12" onkeypress="return soNumero(event, this)" >
									<rich:jQuery query="mask('(99)9999-9999')" selector="#telefone2" />	
								</h:inputText>	
							</td>
						</tr>			
						<tr>
							<td class="tdCor" width="200px">Data de Desativação</td>
							<td class="tdBranco">
								<rich:calendar value="#{crudBean.entity.datDesativacao}" datePattern="dd/MM/yyyy" cellWidth="24px" cellHeight="22px" style="width:200px" showWeeksBar="false" inputSize="10"  enableManualInput="true" oninputkeypress="return formataData(event, this);" maxlength="10" />		
							</td>
						</tr>
					</table>
					<h:panelGroup id="panelGroupDeAlterar2" style="height:100%;width:100%;" rendered="#{crudBean.editing}">
						<table class="tabela">
							<tr>
								<td class="tdCor" width="200px">Situação</td>
								<td class="tdBranco">
									<div style="width:300px;">
										<h:selectOneRadio value="#{crudBean.entity.flgSituacao}" styleClass="radioButton">
													<f:selectItem itemValue="S" itemLabel="Ativo"/>
													<f:selectItem itemValue="N" itemLabel="Inativo"/>
													<f:selectItem itemValue="B" itemLabel="Bloqueado"/>
										</h:selectOneRadio>
									</div>	
								</td>
							</tr>
						</table>
					</h:panelGroup>	
			    </div>
			    <h:panelGroup layout="block" id="dadosPorEntidade">
			      	<rich:dataTable id="tblDataUsuarioEntidade"
							onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
							onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
							value="#{crudBean.listaUsuarioEntidade}" 
							var="rst" 
							binding="#{crudBean.tblDataUsuarioEntidade}"
							rows="10"
							rowKeyVar="linha" 
							style="width: 1224px"	>
							<f:facet name="header">
								<rich:columnGroup>
									<rich:column style="width: 5%; text-align: center;">
										Código
									</rich:column>
									<rich:column style="width: 55%; text-align: center;">
										Entidade
									</rich:column>
								    <rich:column style="width: 3%; text-align: center;"/>
								    <rich:column style="width: 3%; text-align: center;"/>
									
								</rich:columnGroup>
							</f:facet>
							<rich:column style="text-align: left;">
							  <h:outputText value="#{rst.isnEntidade}" />
							</rich:column>
							<rich:column style="text-align: left;">
							    <h:panelGroup layout="block"  style="float:left">
							       <h:outputText value="#{rst.entidade.dscEntidade}" />
							    </h:panelGroup>
							    <h:panelGroup layout="block" style="padding-top:2px;float:left">
							    	<h:graphicImage 
							    	   url="/imagens/icone_principal.png" 
							    	   width="15" height="15" 
							    	   style="margin-left: 5px;"
							    	   rendered="#{rst.entidade.isnEntidade == crudBean.entidadeSelecionada.isnEntidade}" />
							    </h:panelGroup>	
							</rich:column>
							<rich:column style="text-align: center;">
							
					    	    <a4j:commandButton 
						    	    image="/imagens/icone_alterar.gif" 
						    	    style="border:white; width: 12px; height: 12px;" 
						    	    title="ALTERAR" 
						    	    actionListener="#{crudBean.preparaAlterarDadosComplementares}"
						    	    reRender="dadosComplementares,tblDataUsuarioEntidade"
						    	    rendered="#{rst.flgAtivo eq 'S'}" />
					
							</rich:column>
							
							<rich:column style="text-align: center;">
								<a4j:commandButton 
								    image="/imagens/icone_excluir.gif" 
								    style="border:white; width: 12px; height: 12px;" 
								    title="INATIVAR" 
								    actionListener="#{crudBean.toggleAtivarUsuarioEntidade}" 
								    reRender="tblDataUsuarioEntidade"
								    rendered="#{rst.flgAtivo eq 'S'}" />
								    
								<a4j:commandButton 
								    image="/imagens/ok.png" 
								    style="border:white; width: 12px; height: 12px;" 
								    title="ATIVAR" 
								    actionListener="#{crudBean.toggleAtivarUsuarioEntidade}" 
								    reRender="tblDataUsuarioEntidade"
								    rendered="#{rst.flgAtivo eq 'N'}" />
							</rich:column>
							
							<f:facet name="footer">
								
							</f:facet>
						</rich:dataTable>
					
						<h:panelGroup layout="block" style="width: 100%; height: 30px; margin-top: 5px; margin-bottom: 10px; clear: both;">
							<a4j:commandButton 
							   image="imagens/btnAtualizarEntidade.png" 
							   style="border: 0; width: 154px; height: 29px; cursor:pointer" 
							   id="inserirEntidade" 
							   action="#{crudBean.preencherEntidadesAlterar}"
							   oncomplete="#{rich:component('panelAddEntidade')}.show();"
							   reRender="panelAddEntidade"/>
								
						</h:panelGroup>
						
						
						<!-- TABS INTERNAS - EDITANDO USUARIO ENTIDADE -->
						<h:panelGroup layout="block"  id="dadosComplementares" >
							<h:panelGroup rendered="#{crudBean.showDadosComplementares}">
								<br />
								<h:panelGroup id="spanEntidadeSelecionada">
								    <h:outputLabel style="text-transform: uppercase;font-size:13px;" value="Entidade: " />
									<h:outputLabel styleClass="tdBranco" style="text-transform: uppercase;font-size:13px;font-weight:bold;" value="#{crudBean.entidadeSelecionada.dscEntidade}" />	
								</h:panelGroup>
								<br />
								
								<rich:tabPanel switchType="client" width="1224px" headerAlignment="right" >
								    <rich:tab label="Dados Gerais" style="width: 0%;" labelWidth="407px">
								        <table class="tabela">
								            <tr>
												<td class="tdCor" width="200px">Setor *</td>
												<td class="tdBranco">
													<h:panelGroup id="pgSetor">
														<h:selectOneMenu value="#{crudBean.usuarioEntidadeSelecionado.isnSetor}" converter="simpleIndexConverter">
															<f:selectItem itemValue="-1" itemLabel="SELECIONE" />
															<t:selectItems var="s" itemValue="#{s.isnSetor}" itemLabel="#{s.dscSetor}" value="#{crudBean.listaSetores}"/>
														</h:selectOneMenu>
													</h:panelGroup>
												</td>
											 </tr>									 
											 
											 <tr>
												<td class="tdCor" width="200px">Conselho</td>
												<td class="tdBranco">
													<h:selectOneMenu value="#{crudBean.usuarioEntidadeSelecionado.isnConselho}" converter="simpleIndexConverter">
													 	<f:selectItem itemValue="-1" itemLabel="SELECIONE" />
														<t:selectItems var="o" itemValue="#{o.isnConselho}" itemLabel="#{o.dscConselho} - #{o.sglConselho}" value="#{crudBean.listaConselho}" />
														<a4j:support event="onchange" reRender="dadosComplementares" action="#{crudBean.limparCamposConselho}"/>
													</h:selectOneMenu>
													
												</td>
											</tr>
											
											 <tr>
												<td class="tdCor" width="200px">UF Conselho <h:outputText value=" *" rendered="#{crudBean.usuarioEntidadeSelecionado.isnConselho != null and crudBean.usuarioEntidadeSelecionado.isnConselho != -1}" /></td>
												<td class="tdBranco">
													<h:selectOneMenu value="#{crudBean.usuarioEntidadeSelecionado.isnUfConselho}" converter="simpleIndexConverter">
														<f:selectItem itemValue="-1" itemLabel="SELECIONE"/>
														<t:selectItems var="a" itemValue="#{a.isnUf}" itemLabel="#{a.sglUf}" value="#{crudBean.listaUf}" />
														
														<a4j:support event="onchange" reRender="numConselhoInput" />
													</h:selectOneMenu>
												</td>
											</tr>
											
											<tr>
												<td class="tdCor" width="200px">Número do Conselho <h:outputText value=" *" rendered="#{crudBean.usuarioEntidadeSelecionado.isnConselho != null and crudBean.usuarioEntidadeSelecionado.isnConselho != -1}" /></td>
												<td class="tdBranco">
													<h:inputText id="numConselhoInput" value="#{crudBean.usuarioEntidadeSelecionado.numConselho}" disabled="#{crudBean.usuarioEntidadeSelecionado.isnConselho == null or crudBean.usuarioEntidadeSelecionado.isnConselho == -1}" styleClass="baseField" size="12" maxlength="10" onblur="upper(this);" onkeypress="return soNumero(event, this);"/>
												</td>
											</tr>
											
											<tr>
												<td class="tdCor" width="200px">Parecer <h:outputText value=" *" rendered="#{crudBean.usuarioEntidadeSelecionado.isnConselho != null and crudBean.usuarioEntidadeSelecionado.isnConselho != -1}" /> </td>
												<td class="tdBranco">
													<div style="width:300px;">
														<h:selectOneRadio value="#{crudBean.usuarioEntidadeSelecionado.flgParecer}" styleClass="radioButton">
															<f:selectItem itemValue="S" itemLabel="Sim"/>
															<f:selectItem itemValue="N" itemLabel="Não"/>
														</h:selectOneRadio>
													</div>	
												</td>
											</tr>
											
											<tr>
												<td class="tdCor" width="200px">Categoria <h:outputText value=" *" rendered="#{crudBean.entity.isnConselho != null and crudBean.entity.isnConselho != -1 and crudBean.inserting}" /> </td>
												<td class="tdBranco">
													<h:selectOneMenu value="#{crudBean.usuarioEntidadeSelecionado.isnCategoria}" converter="simpleIndexConverter">
														<f:selectItem itemValue="-1" itemLabel="SELECIONE" />
														<t:selectItems var="o" itemValue="#{o.isnCategoria}" itemLabel="#{o.dscCategoria}" value="#{crudBean.listaCategoria}" />
													</h:selectOneMenu>
												</td>
											</tr>
											
											<tr>
												<td class="tdCor" width="200px">Vínculo <h:outputText value=" *" rendered="#{crudBean.entity.isnConselho != null and crudBean.entity.isnConselho != -1 and crudBean.inserting}" /> </td>
												<td class="tdBranco">
													<div style="width:300px;">
														
														<h:inputHidden value="#{crudBean.setorEmpty}" />
																						
														<!-- NAC -->   <h:outputText value="" rendered="#{crudBean.inserting and crudBean.setorEmpty}"/>	
													    <!-- NAC -->   <h:outputText value="Contratado" rendered="#{crudBean.inserting and crudBean.setorNAC}"/>
														<!-- RH -->    <h:outputText value="Funcionário" rendered="#{crudBean.inserting and crudBean.setorRH}"/>
														<!-- C.EST --> <h:outputText value="Ensino" rendered="#{crudBean.inserting and crudBean.setorCentroEstudo}"/>
													
														<h:selectOneRadio value="#{crudBean.usuarioEntidadeSelecionado.isnVinculo}" styleClass="radioButton" rendered="#{!crudBean.setorNAC and !crudBean.setorRH and !crudBean.setorCentroEstudo and !crudBean.setorEmpty}">
															<f:selectItem itemValue="1" itemLabel="Funcionário"/>
															<f:selectItem itemValue="2" itemLabel="Contratado"/>
															<f:selectItem itemValue="3" itemLabel="Ensino"/>
															<a4j:support event="onclick" reRender="panelGroupDeCadastro" actionListener="#{crudBean.carregarVinculoTipo}"/>
														</h:selectOneRadio>
													</div>	
												</td>
											</tr>										
									    </table>
								        
								        <h:panelGroup id="panelTipoVinculo" layout="block" style="display: #{crudBean.usuarioEntidadeSelecionado.isnVinculo eq 3? 'block': 'none'}">
											<table class="tabela">
												<tr>
													<td class="tdCor" width="200px">Tipo do Vínculo <h:outputText value=" *"/> </td>
													<td class="tdBranco">
														<div style="width:300px;">																		  
															<h:selectOneMenu value="#{crudBean.usuarioEntidadeSelecionado.isnVinculoTipo}" converter="simpleIndexConverter">
																<f:selectItem itemValue="-1" itemLabel="SELECIONE"/>
																<t:selectItems var="a" itemValue="#{a.isnVinculoTipo}" itemLabel="#{a.dscVinculoTipo}" value="#{crudBean.listVinculoTipo}" />												
															</h:selectOneMenu>											
														</div>	
													</td>
												</tr>
											</table>								
										</h:panelGroup>	
										
									</rich:tab>
									<rich:tab label="Grupos" style="width: 0%;" labelWidth="407px">
											<table class="tabela" id="tabelaGrupos">							
												<tr>
													<td class="tdCor" style="text-align: center;width: 50%">Não Participa</td>
													<td class="tdCor" style="text-align: center;width: 50%">Participa</td>
												</tr>
												<tr>
													<td class="tdBranco" colspan="2">
														<rich:pickList value="#{crudBean.usuarioEntidadeSelecionado.auxVo.listaGruposDestino}"
																		sourceListWidth="500" 
																		listsHeight="300" 
																		targetListWidth="500" 
																		showButtonsLabel="false" 
																		removeTitle="" 
																		copyAllTitle="" 
																		copyTitle=""
																		id="pick"
																		converter="simpleIndexConverter"
																		orderable="true">
															<t:selectItems var="o" itemValue="#{o.value}" itemLabel="#{o.label}" value="#{crudBean.listaGrupos}" />
														</rich:pickList>							
													</td>
												</tr>
											</table>						
									</rich:tab>				
									<rich:tab label="Especialidade" style="width: 0%;" labelWidth="407px">
										<h:panelGroup id="panelEspecialidades" layout="block" style="margin: 5px 0 15px 0">
										
											<rich:dataTable id="tblDataEspecialidade" value="#{crudBean.usuarioEntidadeSelecionado.auxVo.listaEspecialidadesUsuario}" binding="#{crudBean.tblDataEspecialidade}" var="rst" rowClasses="par,impar">
												<f:facet name="header">
													<rich:columnGroup>
														<rich:column style="text-align: center;width: 60%;">
															Especialidade
														</rich:column>
														<rich:column style="text-align: center;width: 15%;">
															Atende Ambulatório
														</rich:column>
														<rich:column style="text-align: center;width: 15%;">
															Ativo
														</rich:column>
														<rich:column style="text-align: center;width: 5%;">
														</rich:column>
														<rich:column style="text-align: center;width: 5%;">
														</rich:column>
													</rich:columnGroup>
												</f:facet>
												
												<rich:column style="text-align: left;">
													<h:outputText value="#{rst.especialidadeBean.dscEspecialidade}"/>
												</rich:column>
												<rich:column style="text-align: left;">
													<h:outputText value="SIM" rendered="#{rst.flgAmbulatorio == 'S'}"/>
													<h:outputText value="NÃO" rendered="#{rst.flgAmbulatorio == 'N'}"/>
												</rich:column>					
												<rich:column style="text-align: left;">
													<h:outputText value="SIM" rendered="#{rst.flgAtivo == 'S'}"/>
													<h:outputText value="NÃO" rendered="#{rst.flgAtivo == 'N'}"/>
												</rich:column>					
												<rich:column style="text-align: center;">
													<a4j:commandButton image="/imagens/icone_alterar.gif" style="border:white; width: 12px; height: 12px;" title="ALTERAR" actionListener="#{crudBean.preparaAlterarEspecialidade}" reRender="formulario" oncomplete="mostrarBotoesAlterar();"/>
												</rich:column>
												<rich:column style="text-align: center;">
													<a4j:commandButton image="/imagens/icone_excluir.gif" style="border:white; width: 12px; height: 12px;" title="INATIVAR" actionListener="#{crudBean.inativarEspecialidade}" reRender="formulario" onclick="if (!confirm('Deseja realmente inativar este Usuário?')) return false" rendered="#{rst.flgAtivo == 'S'}"/>
												</rich:column>	
																					
											</rich:dataTable>
											
										</h:panelGroup>
										
										<table  class="tabela" id="tabelaEspecialidades" style="border: 1px solid #C0C0C0">
											<tr>
												<td class="tdCor" width="200px">
													<h:outputText value="Especialidade" />
												</td>
												<td class="tdBranco">
													<h:selectOneMenu value="#{crudBean.isnEspecialidade}" converter="simpleIndexConverter">
														<f:selectItem itemValue="" itemLabel="SELECIONE" />
														<t:selectItems var="o" itemValue="#{o.isnEspecialidade}" itemLabel="#{o.dscEspecialidade}" value="#{crudBean.listaEspecialidades}" />
													</h:selectOneMenu>								
												</td>
											</tr>
											<tr>
												<td class="tdCor" width="200px">
													<h:outputText value="Faz Ambulatório ?" />
												</td>
												<td class="tdBranco" >
													<div style="width:200px;">
														<h:selectOneRadio value="#{crudBean.flgAtendeAmbulatorio}" styleClass="radioButton">
																		<f:selectItem itemValue="S" itemLabel="SIM"/>
																		<f:selectItem itemValue="N" itemLabel="NÃO"/>
														</h:selectOneRadio>
													</div>								
												</td>
											</tr>
											<tr>
												<td class="tdCor" width="200px">
													<h:outputText value="Ativo" />
												</td>
												<td class="tdBranco" >
													<div style="width:200px;">
														<h:selectOneRadio value="#{crudBean.flgAtivoEspecialidade}" styleClass="radioButton">
																		<f:selectItem itemValue="S" itemLabel="SIM"/>
																		<f:selectItem itemValue="N" itemLabel="NÃO"/>
														</h:selectOneRadio>
													</div>								
												</td>
											</tr>
											<tr>
												<td colspan="2">
													<a4j:commandButton image="imagens/bntAdicionar.png" style="border: 0; width: 154px; height: 29px;" id="adicionar" value="Adicionar" actionListener="#{crudBean.adicionarEspecialidade}" reRender="formulario" rendered="#{crudBean.estadoDivEspecialidade == 1}"  />
													<a4j:commandButton image="imagens/bntAtualizar.png" style="border: 0; width: 154px; height: 29px;" id="atualizar" value="Atualizar" actionListener="#{crudBean.alterarEspecialidade}" reRender="formulario, panelEspecialidades" rendered="#{crudBean.estadoDivEspecialidade == 2}"/>
													<h:outputText value=" " rendered="#{crudBean.estadoDivEspecialidade == 2}"/>
													<a4j:commandButton image="imagens/bntLimpar.png" style="border: 0; width: 154px; height: 29px;" id="limpar" value="Limpar" actionListener="#{crudBean.limparDivEspecialidade}" reRender="formulario, panelEspecialidades" rendered="#{crudBean.estadoDivEspecialidade == 2}"/>									
												</td>
											</tr>
										</table>
									</rich:tab>		
								</rich:tabPanel>
							</h:panelGroup>	
						</h:panelGroup>
						<!-- FIM TABS INTERNAS - EDITANDO USUARIO ENTIDADE -->
				</h:panelGroup>
				
			</f:subview>
		</h:panelGroup>			
	</ui:define>
	
	<ui:define name="modals">
	 <!-- MODAL EDITAR ENTIDADES -->
		<rich:modalPanel id="panelAddEntidade" autosized="true" width="500" resizeable="false">
			<!-- BARRA DE TITULO MODAL-->
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Entidade" styleClass="outputTextBig" />
				</h:panelGroup>
			</f:facet>
	
	
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="imagens/fechar.png" id="fechar" />
					<rich:componentControl for="panelAddEntidade" attachTo="fechar"
						operation="hide" event="onclick" />
				</h:panelGroup>
			</f:facet>
			<!-- FIM DA BARRA DE TITULO MODAL-->
			<h:form>
			     <table class="tabela" id="tabelaUsuarioEntidades">							
					<tr>
						<td class="tdCor" style="text-align: center;width: 50%">NÃO PARTICIPA</td>
						<td class="tdCor" style="text-align: center;width: 50%">PARTICIPA</td>
					</tr>
					<tr>
						<td class="tdBranco" colspan="2">
							<rich:pickList value="#{crudBean.picklistEntidadeDestino}"
											sourceListWidth="500" 
											listsHeight="300" 
											targetListWidth="500" 
											showButtonsLabel="false" 
											removeTitle="" 
											copyAllTitle="" 
											copyTitle=""
											id="pick"
											converter="simpleIndexConverter"
											orderable="true">
								<t:selectItems var="o" itemValue="#{o.value}" itemLabel="#{o.label}" value="#{crudBean.picklistEntidade}" />
							</rich:pickList>							
						</td>
					</tr>
					
				</table>
				<h:panelGroup layout="block" style="margin-top: 5px">
     	        	<a4j:commandButton 
     	        	   image="imagens/bntConfirmar.png" 
     	        	   style="border: 0; width: 154px; 
     	        	   height: 29px;" id="btnAtualizarEntidades" 
     	        	   value="Gravar" 
     	        	   actionListener="#{crudBean.alterarUsuarioEntidade}" 
     	        	   oncomplete="Richfaces.hideModalPanel('panelAddEntidade')"
     	        	   reRender="dadosPorEntidade, tblDataUsuarioEntidade" />
            	</h:panelGroup>	
        	</h:form>
	        
		</rich:modalPanel>
		<!-- MODAL VALIDACAO DESATIVAR -->
	
	</ui:define>
	
	<ui:define name="list">
	
		<!-- Painel de resultado da busca-->
		<h:panelGroup id="panelGroupDeListagem" style="height:100%;" rendered="#{crudBean.searching}">
			<f:subview id="viewListagem">
			
				<rich:dataTable id="tblData" value="#{crudBean.searchResult}" binding="#{crudBean.tblData}" var="rst" style="width: 100%;" rowClasses="par,impar">
					<f:facet name="header">
						<rich:columnGroup>
							<rich:column style="text-align: center;width: 5%;">
								Código
							</rich:column>
							<rich:column style="text-align: center;">
								Login
							</rich:column>
							<rich:column style="text-align: center;">
								Nome
							</rich:column>
							<rich:column style="text-align: center;">
								Setor
							</rich:column>
							<rich:column style="text-align: center;">
								Entidade
							</rich:column>										
							<rich:column style="text-align: center;width: 7%;">
								Situação
							</rich:column>
							<rich:column style="text-align: center;width: 10%;">
								Data do Cadastro
							</rich:column>
							<rich:column style="text-align: center;width: 3%;" >
							</rich:column>
							<rich:column style="text-align: center;width: 3%;">
							</rich:column>
							<rich:column style="text-align: center;width: 3%;">
							</rich:column>
							<rich:column style="text-align: center;width: 3%;">
							</rich:column>
						</rich:columnGroup>
					</f:facet>
					
					<rich:column style="text-align: left;">
						<h:outputText value="#{rst.isnUsuario}" reRender="formulario"/>
					</rich:column>
					<rich:column style="text-align: left;">
						<h:outputText value="#{rst.dscLogin}"/>
					</rich:column>
					<rich:column style="text-align: left;">
						<h:outputText value="#{rst.dscUsuario}"/>
					</rich:column>
					<rich:column style="text-align: left;">
						<h:outputText value="#{rst.setorBean.dscSetor}"/>
					</rich:column>					
					<rich:column style="text-align: left;">
						<h:outputText value="#{rst.entidadeBean.dscEntidade}"/>
					</rich:column>	
					<rich:column style="text-align: left;">
						<h:outputText value="ATIVO" rendered="#{rst.flgSituacao == 'S'}"/>
						<h:outputText value="INATIVO" rendered="#{rst.flgSituacao == 'N'}"/>
						<h:outputText value="BLOQUEADO" rendered="#{rst.flgSituacao == 'B'}"/>
					</rich:column>
					<rich:column style="text-align: center;">
						<h:outputText value="#{rst.datCadastro}" reRender="formulario" />
					</rich:column>
					<rich:column style="text-align: center;">
						<a4j:commandLink id="visSenha" action="#{senhaForm.preparaAlterar}" rendered="#{rst.flgSituacao == 'S'}">
							<h:graphicImage url="/imagens/alterar_password.png" style="border:white; width: 12px; height: 12px;" title="ALTERAR SENHA" rendered="#{rst.flgSituacao == 'S'}"/>
							<f:setPropertyActionListener value="#{rst}" target="#{senhaForm.usuarioBean}" />
						</a4j:commandLink>
					</rich:column>
					
					<rich:column style="text-align: center;">
						<a4j:commandButton image="/imagens/icone_alterar.gif" style="border:white; width: 12px; height: 12px;" title="ALTERAR" actionListener="#{crudBean.preparaAlterar}" reRender="formulario, panelTitle, formulario:viewCadastro:abaEspec" rendered="#{(crudBean.valorAlterar == rst.isnVinculo or crudBean.liberaAlterarAll) }"/>
					</rich:column>
					<rich:column style="text-align: center;">
						<a4j:commandButton image="/imagens/icone_excluir.gif" style="border:white; width: 12px; height: 12px;" title="INATIVAR" actionListener="#{crudBean.inativar}" reRender="formulario" onclick="if (!confirm('Deseja realmente inativar este usuário?')) return false" rendered="#{rst.flgSituacao == 'S'}"/>
					</rich:column>
					<rich:column style="text-align: center;">
						<a4j:commandButton image="/imagens/cadeado.gif" style="border:white; width: 12px; height: 12px;" title="RESETAR" actionListener="#{crudBean.resetarSenha}" reRender="formulario" onclick="if (!confirm('Deseja realmente resetar a senha deste usuário?')) return false" rendered="#{rst.flgSituacao == 'S'}"/>
					</rich:column>
				</rich:dataTable>
			</f:subview>
		</h:panelGroup>	
	</ui:define>
</ui:composition>	